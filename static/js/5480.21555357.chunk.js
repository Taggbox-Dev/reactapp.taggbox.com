"use strict";(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[5480],{45480:function(e,t,i){i.r(t),i.d(t,{default:function(){return te}});var n=i(15671),o=i(43144),r=i(60136),a=i(29388),s=i(72791),c=i(50732),d=i(22109),u=i(90031),l=i(6697),p=i(97326),h=i(58620),m=i(97657),g=i(94362),v={strings:{pluginNameInstagram:"Instagram"}},f=function(e){(0,r.Z)(i,e);var t=(0,a.Z)(i);function i(e,o){var r;return(0,n.Z)(this,i),(r=t.call(this,e,o)).id=r.opts.id||"Instagram",m.zt.initPlugin((0,p.Z)(r),o),r.icon=function(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,h.h)("g",{fill:"none",fillRule:"evenodd"},(0,h.h)("rect",{className:"uppy-ProviderIconBg",fill:"#E1306C",width:"32",height:"32",rx:"16"}),(0,h.h)("path",{d:"M16 8.622c2.403 0 2.688.009 3.637.052.877.04 1.354.187 1.67.31.392.144.745.374 1.036.673.299.29.529.644.673 1.035.123.317.27.794.31 1.671.043.95.052 1.234.052 3.637s-.009 2.688-.052 3.637c-.04.877-.187 1.354-.31 1.671a2.98 2.98 0 0 1-1.708 1.708c-.317.123-.794.27-1.671.31-.95.043-1.234.053-3.637.053s-2.688-.01-3.637-.053c-.877-.04-1.354-.187-1.671-.31a2.788 2.788 0 0 1-1.035-.673 2.788 2.788 0 0 1-.673-1.035c-.123-.317-.27-.794-.31-1.671-.043-.949-.052-1.234-.052-3.637s.009-2.688.052-3.637c.04-.877.187-1.354.31-1.67.144-.392.374-.745.673-1.036.29-.299.644-.529 1.035-.673.317-.123.794-.27 1.671-.31.95-.043 1.234-.052 3.637-.052zM16 7c-2.444 0-2.75.01-3.71.054-.959.044-1.613.196-2.185.419-.6.225-1.145.58-1.594 1.038-.458.45-.813.993-1.039 1.594-.222.572-.374 1.226-.418 2.184C7.01 13.25 7 13.556 7 16s.01 2.75.054 3.71c.044.959.196 1.613.419 2.185.226.6.58 1.145 1.038 1.594.45.458.993.813 1.594 1.038.572.223 1.227.375 2.184.419.96.044 1.267.054 3.711.054s2.75-.01 3.71-.054c.959-.044 1.613-.196 2.185-.419a4.602 4.602 0 0 0 2.632-2.632c.223-.572.375-1.226.419-2.184.044-.96.054-1.267.054-3.711s-.01-2.75-.054-3.71c-.044-.959-.196-1.613-.419-2.185A4.412 4.412 0 0 0 23.49 8.51a4.412 4.412 0 0 0-1.594-1.039c-.572-.222-1.226-.374-2.184-.418C18.75 7.01 18.444 7 16 7zm0 4.5a4.5 4.5 0 1 0 0 9 4.5 4.5 0 0 0 0-9zm0 7.421a2.921 2.921 0 1 1 0-5.842 2.921 2.921 0 0 1 0 5.842zm4.875-6.671a1.125 1.125 0 1 1 0-2.25 1.125 1.125 0 0 1 0 2.25z",fill:"#FFF"})))},r.defaultLocale=v,r.i18nInit(),r.title=r.i18n("pluginNameInstagram"),r.provider=new m.zt(e,{companionUrl:r.opts.companionUrl,companionHeaders:r.opts.companionHeaders,companionKeysParams:r.opts.companionKeysParams,companionCookiesRule:r.opts.companionCookiesRule,provider:"instagram",pluginId:r.id}),r.onFirstRender=r.onFirstRender.bind((0,p.Z)(r)),r.render=r.render.bind((0,p.Z)(r)),r}return(0,o.Z)(i,[{key:"install",value:function(){this.view=new g.h(this,{provider:this.provider,viewType:"grid",showTitles:!1,showFilter:!1,showBreadcrumbs:!1});var e=this.opts.target;e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.view.tearDown(),this.unmount()}},{key:"onFirstRender",value:function(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder("recent")])}},{key:"render",value:function(e){return this.view.render(e)}}]),i}(c.di);f.VERSION="3.0.1";var y=i(53841),b=i(74165),w=i(15861),S=i(1413),k=i(11752),R=i(61120),C=i(29439),P={"audio/mp3":"mp3","audio/mp4":"mp4","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};function Z(e){var t=e.split(";",1);return e=(0,C.Z)(t,1)[0],P[e]||null}var x=i(75611),I=i(32789);var M=function(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55"},(0,h.h)("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z",fillRule:"evenodd"}))},T=function(e){var t=e.onSnapshot,i=e.i18n;return(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:i("takePicture"),"aria-label":i("takePicture"),onClick:t,"data-uppy-super-focusable":!0},M())};function D(e){var t=e.recording,i=e.onStartRecording,n=e.onStopRecording,o=e.i18n;return t?(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:o("stopRecording"),"aria-label":o("stopRecording"),onClick:n,"data-uppy-super-focusable":!0},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,h.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:o("startRecording"),"aria-label":o("startRecording"),onClick:i,"data-uppy-super-focusable":!0},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,h.h)("circle",{cx:"50",cy:"50",r:"40"})))}function F(e){var t,i=e.recordingLengthSeconds,n=e.i18n,o=(t=i,"".concat(Math.floor(t/60),":").concat(String(t%60).padStart(2,0)));return(0,h.h)("span",{"aria-label":n("recordingLength",{recording_length:o})},o)}var N=function(e){var t=e.onSubmit,i=e.i18n;return(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--submit",type:"button",title:i("submitRecordedFile"),"aria-label":i("submitRecordedFile"),onClick:t,"data-uppy-super-focusable":!0},(0,h.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,h.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})))};var V=function(e){var t=e.onDiscard,i=e.i18n;return(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--discard",type:"button",title:i("discardRecordedFile"),"aria-label":i("discardRecordedFile"),onClick:t,"data-uppy-super-focusable":!0},(0,h.h)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,h.h)("g",{fill:"#FFF",fillRule:"evenodd"},(0,h.h)("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),(0,h.h)("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"}))))};function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},L.apply(this,arguments)}function O(e,t){return e.includes(t)}var z=function(e){(0,r.Z)(i,e);var t=(0,a.Z)(i);function i(){return(0,n.Z)(this,i),t.apply(this,arguments)}return(0,o.Z)(i,[{key:"componentDidMount",value:function(){(0,this.props.onFocus)()}},{key:"componentWillUnmount",value:function(){(0,this.props.onStop)()}},{key:"render",value:function(){var e=this,t=this.props,i=t.src,n=t.recordedVideo,o=t.recording,r=t.modes,a=t.supportsRecording,s=t.videoSources,c=t.showVideoSourceDropdown,d=t.showRecordingLength,u=t.onSubmit,l=t.i18n,p=t.mirror,m=t.onSnapshot,g=t.onStartRecording,v=t.onStopRecording,f=t.onDiscardRecordedVideo,y=t.recordingLengthSeconds,b=!!n,w=!b&&a&&(O(r,"video-only")||O(r,"audio-only")||O(r,"video-audio")),S=!b&&O(r,"picture"),k=a&&d&&!b,R=c&&s&&s.length>1,C={playsinline:!0};return n?(C.muted=!1,C.controls=!0,C.src=n,this.videoElement&&(this.videoElement.srcObject=void 0)):(C.muted=!0,C.autoplay=!0,C.srcObject=i),(0,h.h)("div",{className:"uppy uppy-Webcam-container"},(0,h.h)("div",{className:"uppy-Webcam-videoContainer"},(0,h.h)("video",L({ref:function(t){return e.videoElement=t},className:"uppy-Webcam-video  ".concat(p?"uppy-Webcam-video--mirrored":"")},C))),(0,h.h)("div",{className:"uppy-Webcam-footer"},(0,h.h)("div",{className:"uppy-Webcam-videoSourceContainer"},R?function(e){var t=e.currentDeviceId,i=e.videoSources,n=e.onChangeVideoSource;return(0,h.h)("div",{className:"uppy-Webcam-videoSource"},(0,h.h)("select",{className:"uppy-u-reset uppy-Webcam-videoSource-select",onChange:function(e){n(e.target.value)}},i.map((function(e){return(0,h.h)("option",{key:e.deviceId,value:e.deviceId,selected:e.deviceId===t},e.label)}))))}(this.props):null),(0,h.h)("div",{className:"uppy-Webcam-buttonContainer"},S&&(0,h.h)(T,{onSnapshot:m,i18n:l}),w&&(0,h.h)(D,{recording:o,onStartRecording:g,onStopRecording:v,i18n:l}),b&&(0,h.h)(N,{onSubmit:u,i18n:l}),b&&(0,h.h)(V,{onDiscard:f,i18n:l})),(0,h.h)("div",{className:"uppy-Webcam-recordingLength"},k&&(0,h.h)(F,{recordingLengthSeconds:y,i18n:l}))))}}]),i}(h.wA),W=z,B=function(e){var t=e.icon,i=e.i18n,n=e.hasCamera;return(0,h.h)("div",{className:"uppy-Webcam-permissons"},(0,h.h)("div",{className:"uppy-Webcam-permissonsIcon"},t()),(0,h.h)("h1",{className:"uppy-Webcam-title"},i(n?"allowAccessTitle":"noCameraTitle")),(0,h.h)("p",null,i(n?"allowAccessDescription":"noCameraDescription")))},E={strings:{pluginNameCamera:"Camera",noCameraTitle:"Camera Not Available",noCameraDescription:"In order to take pictures or record video, please connect a camera device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file",smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",recordingLength:"Recording length %{recording_length}",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site."}};function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},A.apply(this,arguments)}function j(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var U=0;function _(e){return"__private_"+U+++"_"+e}function H(e){return"."===e[0]?x.Z[e.slice(1)]:e}function G(e){return/^video\/[^*]+$/.test(e)}function K(e){return/^image\/[^*]+$/.test(e)}function q(e,t){return e.includes(t)}var $=_("enableMirror"),Y=function(e){(0,r.Z)(i,e);var t=(0,a.Z)(i);function i(e,o){var r;(0,n.Z)(this,i),r=t.call(this,e,o),Object.defineProperty((0,p.Z)(r),$,{writable:!0,value:void 0}),r.mediaDevices=navigator.mediaDevices,r.supportsUserMedia=!!r.mediaDevices,r.protocol=location.protocol.match(/https/i)?"https":"http",r.id=r.opts.id||"Webcam",r.type="acquirer",r.capturedMediaFile=null,r.icon=function(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,h.h)("g",{fill:"none",fillRule:"evenodd"},(0,h.h)("rect",{className:"uppy-ProviderIconBg",fill:"#03BFEF",width:"32",height:"32",rx:"16"}),(0,h.h)("path",{d:"M22 11c1.133 0 2 .867 2 2v7.333c0 1.134-.867 2-2 2H10c-1.133 0-2-.866-2-2V13c0-1.133.867-2 2-2h2.333l1.134-1.733C13.6 9.133 13.8 9 14 9h4c.2 0 .4.133.533.267L19.667 11H22zm-6 1.533a3.764 3.764 0 0 0-3.8 3.8c0 2.129 1.672 3.801 3.8 3.801s3.8-1.672 3.8-3.8c0-2.13-1.672-3.801-3.8-3.801zm0 6.261c-1.395 0-2.46-1.066-2.46-2.46 0-1.395 1.065-2.461 2.46-2.461s2.46 1.066 2.46 2.46c0 1.395-1.065 2.461-2.46 2.461z",fill:"#FFF",fillRule:"nonzero"})))},r.defaultLocale=E;var a={onBeforeSnapshot:function(){return Promise.resolve()},countdown:!1,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,showVideoSourceDropdown:!1,facingMode:"user",videoConstraints:void 0,preferredImageMimeType:null,preferredVideoMimeType:null,showRecordingLength:!1,mobileNativeCamera:I({tablet:!0})};return r.opts=(0,S.Z)((0,S.Z)({},a),o),r.i18nInit(),r.title=r.i18n("pluginNameCamera"),j((0,p.Z)(r),$)[$]=r.opts.mirror,r.install=r.install.bind((0,p.Z)(r)),r.setPluginState=r.setPluginState.bind((0,p.Z)(r)),r.render=r.render.bind((0,p.Z)(r)),r.start=r.start.bind((0,p.Z)(r)),r.stop=r.stop.bind((0,p.Z)(r)),r.takeSnapshot=r.takeSnapshot.bind((0,p.Z)(r)),r.startRecording=r.startRecording.bind((0,p.Z)(r)),r.stopRecording=r.stopRecording.bind((0,p.Z)(r)),r.discardRecordedVideo=r.discardRecordedVideo.bind((0,p.Z)(r)),r.submit=r.submit.bind((0,p.Z)(r)),r.oneTwoThreeSmile=r.oneTwoThreeSmile.bind((0,p.Z)(r)),r.focus=r.focus.bind((0,p.Z)(r)),r.changeVideoSource=r.changeVideoSource.bind((0,p.Z)(r)),r.webcamActive=!1,r.opts.countdown&&(r.opts.onBeforeSnapshot=r.oneTwoThreeSmile),r.setPluginState({hasCamera:!1,cameraReady:!1,cameraError:null,recordingLengthSeconds:0,videoSources:[],currentDeviceId:null}),r}return(0,o.Z)(i,[{key:"setOptions",value:function(e){(0,k.Z)((0,R.Z)(i.prototype),"setOptions",this).call(this,(0,S.Z)((0,S.Z)({},e),{},{videoConstraints:(0,S.Z)((0,S.Z)({},this.opts.videoConstraints),null==e?void 0:e.videoConstraints)}))}},{key:"hasCameraCheck",value:function(){return this.mediaDevices?this.mediaDevices.enumerateDevices().then((function(e){return e.some((function(e){return"videoinput"===e.kind}))})):Promise.resolve(!1)}},{key:"isAudioOnly",value:function(){return 1===this.opts.modes.length&&"audio-only"===this.opts.modes[0]}},{key:"getConstraints",value:function(e){void 0===e&&(e=null);var t=-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),i=!this.isAudioOnly()&&(-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("video-only")||-1!==this.opts.modes.indexOf("picture")),n=(0,S.Z)((0,S.Z)({},this.opts.videoConstraints||{facingMode:this.opts.facingMode}),e?{deviceId:e,facingMode:null}:{});return{audio:t,video:!!i&&n}}},{key:"start",value:function(e){var t=this;if(void 0===e&&(e=null),!this.supportsUserMedia)return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0,this.opts.mirror&&(j(this,$)[$]=!0);var i=this.getConstraints(e&&e.deviceId?e.deviceId:null);this.hasCameraCheck().then((function(n){return t.setPluginState({hasCamera:n}),t.mediaDevices.getUserMedia(i).then((function(i){t.stream=i;var n=null,o=t.isAudioOnly()?i.getAudioTracks():i.getVideoTracks();e&&e.deviceId?o.forEach((function(t){t.getSettings().deviceId===e.deviceId&&(n=t.getSettings().deviceId)})):n=o[0].getSettings().deviceId,t.updateVideoSources(),t.setPluginState({currentDeviceId:n,cameraReady:!0})})).catch((function(e){t.setPluginState({cameraReady:!1,cameraError:e}),t.uppy.info(e.message,"error")}))}))}},{key:"getMediaRecorderOptions",value:function(){var e={};if(MediaRecorder.isTypeSupported){var t=this.uppy.opts.restrictions,i=[];this.opts.preferredVideoMimeType?i=[this.opts.preferredVideoMimeType]:t.allowedFileTypes&&(i=t.allowedFileTypes.map(H).filter(G));var n=i.filter((function(e){return MediaRecorder.isTypeSupported(e)&&Z(e)}));n.length>0&&(e.mimeType=n[0])}return e}},{key:"startRecording",value:function(){var e=this;this.recorder=new MediaRecorder(this.stream,this.getMediaRecorderOptions()),this.recordingChunks=[];var t=!1;this.recorder.addEventListener("dataavailable",(function(i){e.recordingChunks.push(i.data);var n=e.uppy.opts.restrictions;if(e.recordingChunks.length>1&&null!=n.maxFileSize&&!t){var o=e.recordingChunks.reduce((function(e,t){return e+t.size}),0),r=3*((o-e.recordingChunks[0].size)/(e.recordingChunks.length-1));o>Math.max(0,n.maxFileSize-r)&&(t=!0,e.uppy.info(e.i18n("recordingStoppedMaxSize"),"warning",4e3),e.stopRecording())}})),this.recorder.start(500),this.opts.showRecordingLength&&(this.recordingLengthTimer=setInterval((function(){var t=e.getPluginState().recordingLengthSeconds;e.setPluginState({recordingLengthSeconds:t+1})}),1e3)),this.setPluginState({isRecording:!0})}},{key:"stopRecording",value:function(){var e=this;return new Promise((function(t){e.recorder.addEventListener("stop",(function(){t()})),e.recorder.stop(),e.opts.showRecordingLength&&(clearInterval(e.recordingLengthTimer),e.setPluginState({recordingLengthSeconds:0}))})).then((function(){return e.setPluginState({isRecording:!1}),e.getVideo()})).then((function(t){try{e.capturedMediaFile=t,e.setPluginState({recordedVideo:URL.createObjectURL(t.data)}),j(e,$)[$]=!1}catch(i){i.isRestriction||e.uppy.log(i)}})).then((function(){e.recordingChunks=null,e.recorder=null}),(function(t){throw e.recordingChunks=null,e.recorder=null,t}))}},{key:"discardRecordedVideo",value:function(){this.setPluginState({recordedVideo:null}),this.opts.mirror&&(j(this,$)[$]=!0),this.capturedMediaFile=null}},{key:"submit",value:function(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(e){e.isRestriction||this.uppy.log(e,"error")}}},{key:"stop",value:function(){var e=(0,w.Z)((0,b.Z)().mark((function e(){var t,i,n=this;return(0,b.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stream&&(t=this.stream.getAudioTracks(),i=this.stream.getVideoTracks(),t.concat(i).forEach((function(e){return e.stop()}))),!this.recorder){e.next=4;break}return e.next=4,new Promise((function(e){n.recorder.addEventListener("stop",e,{once:!0}),n.recorder.stop(),n.opts.showRecordingLength&&clearInterval(n.recordingLengthTimer)}));case 4:this.recordingChunks=null,this.recorder=null,this.webcamActive=!1,this.stream=null,this.setPluginState({recordedVideo:null,isRecording:!1,recordingLengthSeconds:0});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVideoElement",value:function(){return this.el.querySelector(".uppy-Webcam-video")}},{key:"oneTwoThreeSmile",value:function(){var e=this;return new Promise((function(t,i){var n=e.opts.countdown,o=setInterval((function(){if(!e.webcamActive)return clearInterval(o),e.captureInProgress=!1,i(new Error("Webcam is not active"));n>0?(e.uppy.info("".concat(n,"..."),"warning",800),n--):(clearInterval(o),e.uppy.info(e.i18n("smile"),"success",1500),setTimeout((function(){return t()}),1500))}),1e3)}))}},{key:"takeSnapshot",value:function(){var e=this;this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch((function(t){var i="object"===typeof t?t.message:t;return e.uppy.info(i,"error",5e3),Promise.reject(new Error("onBeforeSnapshot: ".concat(i)))})).then((function(){return e.getImage()})).then((function(t){e.captureInProgress=!1;try{e.uppy.addFile(t)}catch(i){i.isRestriction||e.uppy.log(i)}}),(function(t){throw e.captureInProgress=!1,t})))}},{key:"getImage",value:function(){var e=this,t=this.getVideoElement();if(!t)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));var i=t.videoWidth,n=t.videoHeight,o=document.createElement("canvas");o.width=i,o.height=n,o.getContext("2d").drawImage(t,0,0);var r=this.uppy.opts.restrictions,a=[];this.opts.preferredImageMimeType?a=[this.opts.preferredImageMimeType]:r.allowedFileTypes&&(a=r.allowedFileTypes.map(H).filter(K));var s=a[0]||"image/jpeg",c=Z(s)||"jpg",d="cam-".concat(Date.now(),".").concat(c);return function(e,t,i){return new Promise((function(n){e.toBlob(n,t,i)}))}(o,s).then((function(t){return{source:e.id,name:d,data:new Blob([t],{type:s}),type:s}}))}},{key:"getVideo",value:function(){var e=this.recordingChunks.find((function(e){var t;return(null==(t=e.type)?void 0:t.length)>0})).type,t=Z(e);if(!t)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'.concat(e,'"')));var i="webcam-".concat(Date.now(),".").concat(t),n=new Blob(this.recordingChunks,{type:e}),o={source:this.id,name:i,data:new Blob([n],{type:e}),type:e};return Promise.resolve(o)}},{key:"focus",value:function(){var e=this;this.opts.countdown&&setTimeout((function(){e.uppy.info(e.i18n("smile"),"success",1500)}),1e3)}},{key:"changeVideoSource",value:function(e){this.stop(),this.start({deviceId:e})}},{key:"updateVideoSources",value:function(){var e=this;this.mediaDevices.enumerateDevices().then((function(t){e.setPluginState({videoSources:t.filter((function(e){return"videoinput"===e.kind}))})}))}},{key:"render",value:function(){this.webcamActive||this.start();var e=this.getPluginState();return e.cameraReady&&e.hasCamera?(0,h.h)(W,A({},e,{onChangeVideoSource:this.changeVideoSource,onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onDiscardRecordedVideo:this.discardRecordedVideo,onSubmit:this.submit,onFocus:this.focus,onStop:this.stop,i18n:this.i18n,modes:this.opts.modes,showRecordingLength:this.opts.showRecordingLength,showVideoSourceDropdown:this.opts.showVideoSourceDropdown,supportsRecording:"function"===typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"===typeof MediaRecorder.prototype.start,recording:e.isRecording,mirror:j(this,$)[$],src:this.stream})):(0,h.h)(B,{icon:M,i18n:this.i18n,hasCamera:e.hasCamera})}},{key:"install",value:function(){var e,t=this,i=this.opts,n=i.mobileNativeCamera,o=i.modes,r=i.facingMode,a=i.videoConstraints,s=this.opts.target;n&&s?null==(e=this.getTargetPlugin(s))||e.setOptions({showNativeVideoCameraButton:q(o,"video-only")||q(o,"video-audio"),showNativePhotoCameraButton:q(o,"picture"),nativeCameraFacingMode:(null==a?void 0:a.facingMode)||r}):(this.setPluginState({cameraReady:!1,recordingLengthSeconds:0}),s&&this.mount(s,this),this.mediaDevices&&(this.updateVideoSources(),this.mediaDevices.ondevicechange=function(){if(t.updateVideoSources(),t.stream){var e=!0,i=t.getPluginState(),n=i.videoSources,o=i.currentDeviceId;n.forEach((function(t){o===t.deviceId&&(e=!1)})),e&&(t.stop(),t.start())}}))}},{key:"uninstall",value:function(){this.stop(),this.unmount()}},{key:"onUnmount",value:function(){this.stop()}}]),i}(c.di);Y.VERSION="3.2.1";var J=i(80184),Q="https://test.taggbox.com",X=new c.ZP({id:"editA",debug:!0,autoProceed:!0,restrictions:{maxFileSize:5e6,maxNumberOfFiles:500,minNumberOfFiles:1,allowedFileTypes:["image/*"]}});X.use(u.ZP,{target:"#a",params:{auth:{key:"0701d3d7f8d94e92a65a9cba388b1d96"},steps:{resize:{robot:"/image/resize",width:500,resize_strategy:"fit",background:"none"},store:{robot:"/wasabi/store",bucket_region:"us-west-1",bucket:"cloud.taggbox.com",key:"47ABVORKG52UYE1KB28S",secret:"pcaTfeokaz28geAAns08H3yaGbOVz6ILgTptu19v",path:"uploaded/suit"}}},waitForEncoding:!0}),X.use(f,{target:c.ZP.Dashboard,companionUrl:Q}),X.use(l.Z,{target:c.ZP.Dashboard,companionUrl:Q}),X.use(y.Z,{target:c.ZP.Dashboard,companionUrl:Q}),X.use(Y,{target:c.ZP.Dashboard,companionUrl:Q});var ee=function(e){(0,r.Z)(i,e);var t=(0,a.Z)(i);function i(){return(0,n.Z)(this,i),t.apply(this,arguments)}return(0,o.Z)(i,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this;return(0,J.jsx)("div",{className:"card mb-3",children:(0,J.jsx)("div",{className:"card-body text-decoration-none",children:(0,J.jsx)(d.A,{onClick:function(){return e.uploadNextStep("editUploadedMedia")},proudlyDisplayPoweredByUppy:!1,hideUploadButton:!0,showProgressDetails:!0,disableThumbnailGenerator:!1,height:"100%",width:"100%",theme:"light",showRemoveButtonAfterComplete:!1,uppy:X,plugins:["Webcam","Instagram","GoogleDrive","Dropbox"]})})})}}]),i}(s.Component),te=ee},32789:function(e){e.exports=o,e.exports.isMobile=o,e.exports.default=o;var t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/CrOS/,n=/android|ipad|playbook|silk/i;function o(e){e||(e={});var o=e.ua;if(o||"undefined"===typeof navigator||(o=navigator.userAgent),o&&o.headers&&"string"===typeof o.headers["user-agent"]&&(o=o.headers["user-agent"]),"string"!==typeof o)return!1;var r=t.test(o)&&!i.test(o)||!!e.tablet&&n.test(o);return!r&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==o.indexOf("Macintosh")&&-1!==o.indexOf("Safari")&&(r=!0),r}}}]);
//# sourceMappingURL=5480.21555357.chunk.js.map