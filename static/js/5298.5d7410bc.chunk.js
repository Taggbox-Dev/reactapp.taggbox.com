/*! For license information please see 5298.5d7410bc.chunk.js.LICENSE.txt */
(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[5298],{39968:function(e){e.exports=function(e){if("number"!==typeof e||isNaN(e))throw new TypeError("Expected a number, got ".concat(typeof e));var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return"".concat((t?"-":"")+e," B");var r=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);e=Number(e/Math.pow(1024,r));var i=n[r];return e>=10||e%1===0?"".concat((t?"-":"")+e.toFixed(0)," ").concat(i):"".concat((t?"-":"")+e.toFixed(1)," ").concat(i)}},79773:function(e){function t(e){if(e)return function(e){for(var n in t.prototype)e[n]=t.prototype[n];return e}(e)}e.exports=t,t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},33881:function(e,t,n){var r="Expected a function",i=/^\s+|\s+$/g,o=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,u=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,c="object"==typeof self&&self&&self.Object===Object&&self,p=l||c||Function("return this")(),h=Object.prototype.toString,f=Math.max,d=Math.min,v=function(){return p.Date.now()};function y(e,t,n){var i,o,s,a,u,l,c=0,p=!1,h=!1,y=!0;if("function"!=typeof e)throw new TypeError(r);function b(t){var n=i,r=o;return i=o=void 0,c=t,a=e.apply(r,n)}function w(e){return c=e,u=setTimeout(k,t),p?b(e):a}function _(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-c>=s}function k(){var e=v();if(_(e))return P(e);u=setTimeout(k,function(e){var n=t-(e-l);return h?d(n,s-(e-c)):n}(e))}function P(e){return u=void 0,y&&i?b(e):(i=o=void 0,a)}function Z(){var e=v(),n=_(e);if(i=arguments,o=this,l=e,n){if(void 0===u)return w(l);if(h)return u=setTimeout(k,t),b(l)}return void 0===u&&(u=setTimeout(k,t)),a}return t=g(t)||0,m(n)&&(p=!!n.leading,s=(h="maxWait"in n)?f(g(n.maxWait)||0,t):s,y="trailing"in n?!!n.trailing:y),Z.cancel=function(){void 0!==u&&clearTimeout(u),c=0,i=l=o=u=void 0},Z.flush=function(){return void 0===u?a:P(v())},Z}function m(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function g(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==h.call(e)}(e))return NaN;if(m(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=m(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=s.test(e);return n||a.test(e)?u(e.slice(2),n?2:8):o.test(e)?NaN:+e}e.exports=function(e,t,n){var i=!0,o=!0;if("function"!=typeof e)throw new TypeError(r);return m(n)&&(i="leading"in n?!!n.leading:i,o="trailing"in n?!!n.trailing:o),y(e,t,{leading:i,maxWait:t,trailing:o})}},92026:function(e,t,n){var r=n(10145),i=/[\/\+\.]/;e.exports=function(e,t){function n(t){var n=r(t,e,i);return n&&n.length>=2}return t?n(t.split(";")[0]):n}},15336:function(e){e.exports=function(){var e={},t=e._fns={};return e.emit=function(e,n,r,i,o,s,a){var u=function(e){var n=t[e]?t[e]:[],r=e.indexOf(":"),i=-1===r?[e]:[e.substring(0,r),e.substring(r+1)],o=Object.keys(t),s=0,a=o.length;for(;s<a;s++){var u=o[s];if("*"===u&&(n=n.concat(t[u])),2===i.length&&i[0]===u){n=n.concat(t[u]);break}}return n}(e);u.length&&function(e,t,n){var r=0,i=t.length;for(;r<i&&t[r];r++)t[r].event=e,t[r].apply(t[r],n)}(e,u,[n,r,i,o,s,a])},e.on=function(e,n){t[e]||(t[e]=[]),t[e].push(n)},e.once=function(t,n){this.on(t,(function r(){n.apply(this,arguments),e.off(t,r)}))},e.off=function(e,t){var n=[];if(e&&t)for(var r=this._fns[e],i=0,o=r?r.length:0;i<o;i++)r[i]!==t&&n.push(r[i]);n.length?this._fns[e]=n:delete this._fns[e]},e}},58620:function(e,t,n){"use strict";n.d(t,{HY:function(){return y},Tm:function(){return N},Vf:function(){return v},bR:function(){return Z},h:function(){return f},sY:function(){return I},wA:function(){return m}});var r,i,o,s,a,u={},l=[],c=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function p(e,t){for(var n in t)e[n]=t[n];return e}function h(e){var t=e.parentNode;t&&t.removeChild(e)}function f(e,t,n){var i,o,s,a={};for(s in t)"key"==s?i=t[s]:"ref"==s?o=t[s]:a[s]=t[s];if(arguments.length>2&&(a.children=arguments.length>3?r.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(s in e.defaultProps)void 0===a[s]&&(a[s]=e.defaultProps[s]);return d(e,a,i,o,null)}function d(e,t,n,r,s){var a={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==s?++o:s};return null==s&&null!=i.vnode&&i.vnode(a),a}function v(){return{current:null}}function y(e){return e.children}function m(e,t){this.props=e,this.context=t}function g(e,t){if(null==t)return e.__?g(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?g(e):null}function b(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return b(e)}}function w(e){(!e.__d&&(e.__d=!0)&&s.push(e)&&!_.__r++||a!==i.debounceRendering)&&((a=i.debounceRendering)||setTimeout)(_)}function _(){for(var e;_.__r=s.length;)e=s.sort((function(e,t){return e.__v.__b-t.__v.__b})),s=[],e.some((function(e){var t,n,r,i,o,s;e.__d&&(o=(i=(t=e).__v).__e,(s=t.__P)&&(n=[],(r=p({},i)).__v=i.__v+1,A(s,i,r,t.__n,void 0!==s.ownerSVGElement,null!=i.__h?[o]:null,n,null==o?g(i):o,i.__h),U(n,i),i.__e!=o&&b(i)))}))}function k(e,t,n,r,i,o,s,a,c,p){var h,f,v,m,b,w,_,k=r&&r.__k||l,Z=k.length;for(n.__k=[],h=0;h<t.length;h++)if(null!=(m=n.__k[h]=null==(m=t[h])||"boolean"==typeof m?null:"string"==typeof m||"number"==typeof m||"bigint"==typeof m?d(null,m,null,null,m):Array.isArray(m)?d(y,{children:m},null,null,null):m.__b>0?d(m.type,m.props,m.key,m.ref?m.ref:null,m.__v):m)){if(m.__=n,m.__b=n.__b+1,null===(v=k[h])||v&&m.key==v.key&&m.type===v.type)k[h]=void 0;else for(f=0;f<Z;f++){if((v=k[f])&&m.key==v.key&&m.type===v.type){k[f]=void 0;break}v=null}A(e,m,v=v||u,i,o,s,a,c,p),b=m.__e,(f=m.ref)&&v.ref!=f&&(_||(_=[]),v.ref&&_.push(v.ref,null,m),_.push(f,m.__c||b,m)),null!=b?(null==w&&(w=b),"function"==typeof m.type&&m.__k===v.__k?m.__d=c=P(m,c,e):c=S(e,m,v,k,b,c),"function"==typeof n.type&&(n.__d=c)):c&&v.__e==c&&c.parentNode!=e&&(c=g(v))}for(n.__e=w,h=Z;h--;)null!=k[h]&&C(k[h],k[h]);if(_)for(h=0;h<_.length;h++)T(_[h],_[++h],_[++h])}function P(e,t,n){for(var r,i=e.__k,o=0;i&&o<i.length;o++)(r=i[o])&&(r.__=e,t="function"==typeof r.type?P(r,t,n):S(n,r,r,i,r.__e,t));return t}function Z(e,t){return t=t||[],null==e||"boolean"==typeof e||(Array.isArray(e)?e.some((function(e){Z(e,t)})):t.push(e)),t}function S(e,t,n,r,i,o){var s,a,u;if(void 0!==t.__d)s=t.__d,t.__d=void 0;else if(null==n||i!=o||null==i.parentNode)e:if(null==o||o.parentNode!==e)e.appendChild(i),s=null;else{for(a=o,u=0;(a=a.nextSibling)&&u<r.length;u+=1)if(a==i)break e;e.insertBefore(i,o),s=o}return void 0!==s?s:i.nextSibling}function O(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]=null==n?"":"number"!=typeof n||c.test(t)?n:n+"px"}function x(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||O(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||O(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r||e.addEventListener(t,o?R:E,o):e.removeEventListener(t,o?R:E,o);else if("dangerouslySetInnerHTML"!==t){if(i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function E(e){this.l[e.type+!1](i.event?i.event(e):e)}function R(e){this.l[e.type+!0](i.event?i.event(e):e)}function A(e,t,n,r,o,s,a,u,l){var c,h,f,d,v,g,b,w,_,P,Z,S,O,x,E,R=t.type;if(void 0!==t.constructor)return null;null!=n.__h&&(l=n.__h,u=t.__e=n.__e,t.__h=null,s=[u]),(c=i.__b)&&c(t);try{e:if("function"==typeof R){if(w=t.props,_=(c=R.contextType)&&r[c.__c],P=c?_?_.props.value:c.__:r,n.__c?b=(h=t.__c=n.__c).__=h.__E:("prototype"in R&&R.prototype.render?t.__c=h=new R(w,P):(t.__c=h=new m(w,P),h.constructor=R,h.render=j),_&&_.sub(h),h.props=w,h.state||(h.state={}),h.context=P,h.__n=r,f=h.__d=!0,h.__h=[],h._sb=[]),null==h.__s&&(h.__s=h.state),null!=R.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=p({},h.__s)),p(h.__s,R.getDerivedStateFromProps(w,h.__s))),d=h.props,v=h.state,f)null==R.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==R.getDerivedStateFromProps&&w!==d&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(w,P),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(w,h.__s,P)||t.__v===n.__v){for(h.props=w,h.state=h.__s,t.__v!==n.__v&&(h.__d=!1),h.__v=t,t.__e=n.__e,t.__k=n.__k,t.__k.forEach((function(e){e&&(e.__=t)})),Z=0;Z<h._sb.length;Z++)h.__h.push(h._sb[Z]);h._sb=[],h.__h.length&&a.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(w,h.__s,P),null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(d,v,g)}))}if(h.context=P,h.props=w,h.__v=t,h.__P=e,S=i.__r,O=0,"prototype"in R&&R.prototype.render){for(h.state=h.__s,h.__d=!1,S&&S(t),c=h.render(h.props,h.state,h.context),x=0;x<h._sb.length;x++)h.__h.push(h._sb[x]);h._sb=[]}else do{h.__d=!1,S&&S(t),c=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++O<25);h.state=h.__s,null!=h.getChildContext&&(r=p(p({},r),h.getChildContext())),f||null==h.getSnapshotBeforeUpdate||(g=h.getSnapshotBeforeUpdate(d,v)),E=null!=c&&c.type===y&&null==c.key?c.props.children:c,k(e,Array.isArray(E)?E:[E],t,n,r,o,s,a,u,l),h.base=t.__e,t.__h=null,h.__h.length&&a.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==s&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=F(n.__e,t,n,r,o,s,a,l);(c=i.diffed)&&c(t)}catch(e){t.__v=null,(l||null!=s)&&(t.__e=u,t.__h=!!l,s[s.indexOf(u)]=null),i.__e(e,t,n)}}function U(e,t){i.__c&&i.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){i.__e(e,t.__v)}}))}function F(e,t,n,i,o,s,a,l){var c,p,f,d=n.props,v=t.props,y=t.type,m=0;if("svg"===y&&(o=!0),null!=s)for(;m<s.length;m++)if((c=s[m])&&"setAttribute"in c==!!y&&(y?c.localName===y:3===c.nodeType)){e=c,s[m]=null;break}if(null==e){if(null===y)return document.createTextNode(v);e=o?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,v.is&&v),s=null,l=!1}if(null===y)d===v||l&&e.data===v||(e.data=v);else{if(s=s&&r.call(e.childNodes),p=(d=n.props||u).dangerouslySetInnerHTML,f=v.dangerouslySetInnerHTML,!l){if(null!=s)for(d={},m=0;m<e.attributes.length;m++)d[e.attributes[m].name]=e.attributes[m].value;(f||p)&&(f&&(p&&f.__html==p.__html||f.__html===e.innerHTML)||(e.innerHTML=f&&f.__html||""))}if(function(e,t,n,r,i){var o;for(o in n)"children"===o||"key"===o||o in t||x(e,o,null,n[o],r);for(o in t)i&&"function"!=typeof t[o]||"children"===o||"key"===o||"value"===o||"checked"===o||n[o]===t[o]||x(e,o,t[o],n[o],r)}(e,v,d,o,l),f)t.__k=[];else if(m=t.props.children,k(e,Array.isArray(m)?m:[m],t,n,i,o&&"foreignObject"!==y,s,a,s?s[0]:n.__k&&g(n,0),l),null!=s)for(m=s.length;m--;)null!=s[m]&&h(s[m]);l||("value"in v&&void 0!==(m=v.value)&&(m!==e.value||"progress"===y&&!m||"option"===y&&m!==d.value)&&x(e,"value",m,d.value,!1),"checked"in v&&void 0!==(m=v.checked)&&m!==e.checked&&x(e,"checked",m,d.checked,!1))}return e}function T(e,t,n){try{"function"==typeof e?e(t):e.current=t}catch(e){i.__e(e,n)}}function C(e,t,n){var r,o;if(i.unmount&&i.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||T(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){i.__e(e,t)}r.base=r.__P=null,e.__c=void 0}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&C(r[o],t,n||"function"!=typeof e.type);n||null==e.__e||h(e.__e),e.__=e.__e=e.__d=void 0}function j(e,t,n){return this.constructor(e,n)}function I(e,t,n){var o,s,a;i.__&&i.__(e,t),s=(o="function"==typeof n)?null:n&&n.__k||t.__k,a=[],A(t,e=(!o&&n||t).__k=f(y,null,[e]),s||u,u,void 0!==t.ownerSVGElement,!o&&n?[n]:s?null:t.firstChild?r.call(t.childNodes):null,a,!o&&n?n:s?s.__e:t.firstChild,o),U(a,e)}function N(e,t,n){var i,o,s,a=p({},e.props);for(s in t)"key"==s?i=t[s]:"ref"==s?o=t[s]:a[s]=t[s];return arguments.length>2&&(a.children=arguments.length>3?r.call(arguments,2):n),d(e.type,a,i||e.key,o||e.ref,null)}r=l.slice,i={__e:function(e,t,n,r){for(var i,o,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(t){e=t}throw e}},o=0,m.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=p({},this.state),"function"==typeof e&&(e=e(p({},n),this.props)),e&&p(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),w(this))},m.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),w(this))},m.prototype.render=y,s=[],_.__r=0},96962:function(e,t){"use strict";var n=Object.prototype.hasOwnProperty;function r(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function i(e){try{return encodeURIComponent(e)}catch(t){return null}}t.stringify=function(e,t){t=t||"";var r,o,s=[];for(o in"string"!==typeof t&&(t="?"),e)if(n.call(e,o)){if((r=e[o])||null!==r&&undefined!==r&&!isNaN(r)||(r=""),o=i(o),r=i(r),null===o||null===r)continue;s.push(o+"="+r)}return s.length?t+s.join("&"):""},t.parse=function(e){for(var t,n=/([^=?#&]+)=?([^&]*)/g,i={};t=n.exec(e);){var o=r(t[1]),s=r(t[2]);null===o||null===s||o in i||(i[o]=s)}return i}},43841:function(e){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},65915:function(e,t,n){"use strict";var r=n(43841),i=n(96962),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,u=/:\d+$/,l=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,c=/^[a-zA-Z]:/;function p(e){return(e||"").toString().replace(o,"")}var h=[["#","hash"],["?","query"],function(e,t){return v(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function d(e){var t,r=("undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{}).location||{},i={},o=typeof(e=e||r);if("blob:"===e.protocol)i=new m(unescape(e.pathname),{});else if("string"===o)for(t in i=new m(e,{}),f)delete i[t];else if("object"===o){for(t in e)t in f||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function v(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function y(e,t){e=(e=p(e)).replace(s,""),t=t||{};var n,r=l.exec(e),i=r[1]?r[1].toLowerCase():"",o=!!r[2],a=!!r[3],u=0;return o?a?(n=r[2]+r[3]+r[4],u=r[2].length+r[3].length):(n=r[2]+r[4],u=r[2].length):a?(n=r[3]+r[4],u=r[3].length):n=r[4],"file:"===i?u>=2&&(n=n.slice(2)):v(i)?n=r[4]:i?o&&(n=n.slice(2)):u>=2&&v(t.protocol)&&(n=r[4]),{protocol:i,slashes:o||v(i),slashesCount:u,rest:n}}function m(e,t,n){if(e=(e=p(e)).replace(s,""),!(this instanceof m))return new m(e,t,n);var o,a,u,l,f,g,b=h.slice(),w=typeof t,_=this,k=0;for("object"!==w&&"string"!==w&&(n=t,t=null),n&&"function"!==typeof n&&(n=i.parse),o=!(a=y(e||"",t=d(t))).protocol&&!a.slashes,_.slashes=a.slashes||o&&t.slashes,_.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||c.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!v(_.protocol)))&&(b[3]=[/(.*)/,"pathname"]);k<b.length;k++)"function"!==typeof(l=b[k])?(u=l[0],g=l[1],u!==u?_[g]=e:"string"===typeof u?~(f="@"===u?e.lastIndexOf(u):e.indexOf(u))&&("number"===typeof l[2]?(_[g]=e.slice(0,f),e=e.slice(f+l[2])):(_[g]=e.slice(f),e=e.slice(0,f))):(f=u.exec(e))&&(_[g]=f[1],e=e.slice(0,f.index)),_[g]=_[g]||o&&l[3]&&t[g]||"",l[4]&&(_[g]=_[g].toLowerCase())):e=l(e,_);n&&(_.query=n(_.query)),o&&t.slashes&&"/"!==_.pathname.charAt(0)&&(""!==_.pathname||""!==t.pathname)&&(_.pathname=function(e,t){if(""===e)return t;for(var n=(t||"/").split("/").slice(0,-1).concat(e.split("/")),r=n.length,i=n[r-1],o=!1,s=0;r--;)"."===n[r]?n.splice(r,1):".."===n[r]?(n.splice(r,1),s++):s&&(0===r&&(o=!0),n.splice(r,1),s--);return o&&n.unshift(""),"."!==i&&".."!==i||n.push(""),n.join("/")}(_.pathname,t.pathname)),"/"!==_.pathname.charAt(0)&&v(_.protocol)&&(_.pathname="/"+_.pathname),r(_.port,_.protocol)||(_.host=_.hostname,_.port=""),_.username=_.password="",_.auth&&(~(f=_.auth.indexOf(":"))?(_.username=_.auth.slice(0,f),_.username=encodeURIComponent(decodeURIComponent(_.username)),_.password=_.auth.slice(f+1),_.password=encodeURIComponent(decodeURIComponent(_.password))):_.username=encodeURIComponent(decodeURIComponent(_.auth)),_.auth=_.password?_.username+":"+_.password:_.username),_.origin="file:"!==_.protocol&&v(_.protocol)&&_.host?_.protocol+"//"+_.host:"null",_.href=_.toString()}m.prototype={set:function(e,t,n){var o=this;switch(e){case"query":"string"===typeof t&&t.length&&(t=(n||i.parse)(t)),o[e]=t;break;case"port":o[e]=t,r(t,o.protocol)?t&&(o.host=o.hostname+":"+t):(o.host=o.hostname,o[e]="");break;case"hostname":o[e]=t,o.port&&(t+=":"+o.port),o.host=t;break;case"host":o[e]=t,u.test(t)?(t=t.split(":"),o.port=t.pop(),o.hostname=t.join(":")):(o.hostname=t,o.port="");break;case"protocol":o.protocol=t.toLowerCase(),o.slashes=!n;break;case"pathname":case"hash":if(t){var s="pathname"===e?"/":"#";o[e]=t.charAt(0)!==s?s+t:t}else o[e]=t;break;case"username":case"password":o[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(o.username=t.slice(0,a),o.username=encodeURIComponent(decodeURIComponent(o.username)),o.password=t.slice(a+1),o.password=encodeURIComponent(decodeURIComponent(o.password))):o.username=encodeURIComponent(decodeURIComponent(t))}for(var l=0;l<h.length;l++){var c=h[l];c[4]&&(o[c[1]]=o[c[1]].toLowerCase())}return o.auth=o.password?o.username+":"+o.password:o.username,o.origin="file:"!==o.protocol&&v(o.protocol)&&o.host?o.protocol+"//"+o.host:"null",o.href=o.toString(),o},toString:function(e){e&&"function"===typeof e||(e=i.stringify);var t,n=this,r=n.host,o=n.protocol;o&&":"!==o.charAt(o.length-1)&&(o+=":");var s=o+(n.protocol&&n.slashes||v(n.protocol)?"//":"");return n.username?(s+=n.username,n.password&&(s+=":"+n.password),s+="@"):n.password?(s+=":"+n.password,s+="@"):"file:"!==n.protocol&&v(n.protocol)&&!r&&"/"!==n.pathname&&(s+="@"),(":"===r[r.length-1]||u.test(n.hostname)&&!n.port)&&(r+=":"),s+=r+n.pathname,(t="object"===typeof n.query?e(n.query):n.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),n.hash&&(s+=n.hash),s}},m.extractProtocol=y,m.location=d,m.trimLeft=p,m.qs=i,e.exports=m},10145:function(e){"use strict";function t(e,t){this.text=e=e||"",this.hasWild=~e.indexOf("*"),this.separator=t,this.parts=e.split(t)}t.prototype.match=function(e){var t,n,r=!0,i=this.parts,o=i.length;if("string"==typeof e||e instanceof String)if(this.hasWild||this.text==e){for(n=(e||"").split(this.separator),t=0;r&&t<o;t++)"*"!==i[t]&&(r=t<n.length&&i[t]===n[t]);r=r&&n}else r=!1;else if("function"==typeof e.splice)for(r=[],t=e.length;t--;)this.match(e[t])&&(r[r.length]=e[t]);else if("object"==typeof e)for(var s in r={},e)this.match(s)&&(r[s]=e[s]);return r},e.exports=function(e,n,r){var i=new t(e,r||/[\/\.]/);return"undefined"!=typeof n?i.match(n):i}},97657:function(e,t,n){"use strict";n.d(t,{zt:function(){return C},C$:function(){return S},sk:function(){return H}});var r={};n.r(r),n.d(r,{getItem:function(){return F},removeItem:function(){return T},setItem:function(){return U}});var i=n(29439),o=n(4942),s=n(74165),a=n(1413),u=n(15671),l=n(43144),c=n(15861),p=n(73411),h=n(51853),f=n(60136),d=n(29388),v=function(e){(0,f.Z)(n,e);var t=(0,d.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.call(this,"Authorization required")).name="AuthError",e.isAuthError=!0,e}return(0,l.Z)(n)}((0,n(98737).Z)(Error));function y(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var m=0;function g(e){return"__private_"+m+++"_"+e}function b(e){return w.apply(this,arguments)}function w(){return(w=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.status){e.next=2;break}throw new v;case 2:if(n=t.json(),!t.ok){e.next=5;break}return e.abrupt("return",n);case 5:return r="Failed request with status: ".concat(t.status,". ").concat(t.statusText),e.prev=6,e.next=9,n;case 9:i=e.sent,r=i.message?"".concat(r," message: ").concat(i.message):r,r=i.requestId?"".concat(r," request-Id: ").concat(i.requestId):r,e.next=16;break;case 14:e.prev=14,e.t0=e.catch(6);case 16:throw new Error(r);case 17:case"end":return e.stop()}}),e,null,[[6,14]])})))).apply(this,arguments)}var _=new Map,k=g("companionHeaders"),P=g("getUrl"),Z=g("request"),S=function(e){function t(e,n){(0,u.Z)(this,t),Object.defineProperty(this,Z,{value:x}),Object.defineProperty(this,P,{value:O}),Object.defineProperty(this,k,{writable:!0,value:void 0}),this.uppy=e,this.opts=n,this.onReceiveResponse=this.onReceiveResponse.bind(this),y(this,k)[k]=null==n?void 0:n.companionHeaders}return(0,l.Z)(t,[{key:"setCompanionHeaders",value:function(e){y(this,k)[k]=e}},{key:e,value:function(){return y(this,k)[k]}},{key:"hostname",get:function(){var e=this.uppy.getState().companion,t=this.opts.companionUrl;return(e&&e[t]?e[t]:t).replace(/\/$/,"")}},{key:"headers",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var n;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={Accept:"application/json","Content-Type":"application/json","Uppy-Versions":"@uppy/companion-client=".concat(t.VERSION)},e.abrupt("return",(0,a.Z)((0,a.Z)({},n),y(this,k)[k]));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onReceiveResponse",value:function(e){var t=e.headers,n=this.uppy.getState().companion||{},r=this.opts.companionUrl;t.has("i-am")&&t.get("i-am")!==n[r]&&this.uppy.setState({companion:(0,a.Z)((0,a.Z)({},n),{},(0,o.Z)({},r,t.get("i-am")))})}},{key:"preflight",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i,o=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null==(n=_.get(this.hostname))){e.next=3;break}return e.abrupt("return",n);case 3:return r=["accept","content-type","uppy-auth-token"],i=(0,c.Z)((0,s.Z)().mark((function e(){var n,i,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(y(o,P)[P](t),{method:"OPTIONS"});case 3:if(n=e.sent,null!=(i=n.headers.get("access-control-allow-headers"))&&"*"!==i){e.next=8;break}return _.set(o.hostname,r),e.abrupt("return",r);case 8:return o.uppy.log("[CompanionClient] adding allowed preflight headers to companion cache: ".concat(o.hostname," ").concat(i)),a=i.split(",").map((function(e){return e.trim().toLowerCase()})),_.set(o.hostname,a),e.abrupt("return",a);case 14:return e.prev=14,e.t0=e.catch(0),o.uppy.log("[CompanionClient] unable to make preflight request ".concat(e.t0),"warning"),_.delete(o.hostname),e.abrupt("return",r);case 19:case"end":return e.stop()}}),e,null,[[0,14]])})))(),_.set(this.hostname,i),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"preflightAndHeaders",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,o,a,u=this;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.preflight(t),this.headers()]);case 2:return n=e.sent,r=(0,i.Z)(n,2),o=r[0],a=r[1],e.abrupt("return",Object.fromEntries(Object.entries(a).filter((function(e){var t=(0,i.Z)(e,1)[0];return!!o.includes(t.toLowerCase())||(u.uppy.log("[CompanionClient] excluding disallowed header ".concat(t)),!1)}))));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,n){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=void 0),"boolean"===typeof n&&(n={skipPostResponse:n}),e.abrupt("return",y(this,Z)[Z]((0,a.Z)((0,a.Z)({},n),{},{path:t})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"post",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,n,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=void 0),"boolean"===typeof r&&(r={skipPostResponse:r}),e.abrupt("return",y(this,Z)[Z]((0,a.Z)((0,a.Z)({},r),{},{path:t,method:"POST",data:n})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(t,n,r){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=void 0),"boolean"===typeof r&&(r={skipPostResponse:r}),e.abrupt("return",y(this,Z)[Z]((0,a.Z)((0,a.Z)({},r),{},{path:t,method:"DELETE",data:n})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()}]),t}(Symbol.for("uppy test: getCompanionHeaders"));function O(e){return/^(https?:|)\/\//.test(e)?e:"".concat(this.hostname,"/").concat(e)}function x(e){return E.apply(this,arguments)}function E(){return(E=(0,c.Z)((0,s.Z)().mark((function e(t){var n,r,i,o,a,u,l,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.path,r=t.method,i=void 0===r?"GET":r,o=t.data,a=t.skipPostResponse,u=t.signal,e.prev=1,e.next=4,this.preflightAndHeaders(n);case 4:return l=e.sent,e.next=7,(0,p.Z)(y(this,P)[P](n),{method:i,signal:u,headers:l,credentials:this.opts.companionCookiesRule||"same-origin",body:o?JSON.stringify(o):null});case 7:return c=e.sent,a||this.onReceiveResponse(c),e.abrupt("return",b(c));case 12:if(e.prev=12,e.t0=e.catch(1),null==e.t0||!e.t0.isAuthError){e.next=16;break}throw e.t0;case 16:throw new h.Z("Could not ".concat(i," ").concat(y(this,P)[P](n)),{cause:e.t0});case 17:case"end":return e.stop()}}),e,this,[[1,12]])})))).apply(this,arguments)}S.VERSION="3.1.1";var R=n(11752),A=n(61120);function U(e,t){return new Promise((function(n){localStorage.setItem(e,t),n()}))}function F(e){return Promise.resolve(localStorage.getItem(e))}function T(e){return new Promise((function(t){localStorage.removeItem(e),t()}))}var C=function(e){(0,f.Z)(n,e);var t=(0,d.Z)(n);function n(e,r){var i;return(0,u.Z)(this,n),(i=t.call(this,e,r)).provider=r.provider,i.id=i.provider,i.name=i.opts.name||function(e){return e.split("-").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")}(i.id),i.pluginId=i.opts.pluginId,i.tokenKey="companion-".concat(i.pluginId,"-auth-token"),i.companionKeysParams=i.opts.companionKeysParams,i.preAuthToken=null,i}return(0,l.Z)(n,[{key:"headers",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t,r,o,u,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,R.Z)((0,A.Z)(n.prototype),"headers",this).call(this),this.getAuthToken()]);case 2:return t=e.sent,r=(0,i.Z)(t,2),o=r[0],u=r[1],l={},u&&(l["uppy-auth-token"]=u),this.companionKeysParams&&(l["uppy-credentials-params"]=btoa(JSON.stringify({params:this.companionKeysParams}))),e.abrupt("return",(0,a.Z)((0,a.Z)({},o),l));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onReceiveResponse",value:function(e){(0,R.Z)((0,A.Z)(n.prototype),"onReceiveResponse",this).call(this,e);var t=this.uppy.getPlugin(this.pluginId),r=t.getPluginState().authenticated?401!==e.status:e.status<400;return t.setPluginState({authenticated:r}),e}},{key:"setAuthToken",value:function(e){return this.uppy.getPlugin(this.pluginId).storage.setItem(this.tokenKey,e)}},{key:"getAuthToken",value:function(){return this.uppy.getPlugin(this.pluginId).storage.getItem(this.tokenKey)}},{key:"ensurePreAuth",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.companionKeysParams||this.preAuthToken){e.next=5;break}return e.next=3,this.fetchPreAuthToken();case 3:if(this.preAuthToken){e.next=5;break}throw new Error("Could not load authentication data required for third-party login. Please try again later.");case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"authUrl",value:function(e){void 0===e&&(e={});var t=new URLSearchParams(e);return this.preAuthToken&&t.set("uppyPreAuthToken",this.preAuthToken),"".concat(this.hostname,"/").concat(this.id,"/connect?").concat(t)}},{key:"fileUrl",value:function(e){return"".concat(this.hostname,"/").concat(this.id,"/get/").concat(e)}},{key:"fetchPreAuthToken",value:function(){var e=(0,c.Z)((0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.companionKeysParams){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.post("".concat(this.id,"/preauth/"),{params:this.companionKeysParams});case 5:t=e.sent,this.preAuthToken=t.token,e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),this.uppy.log("[CompanionClient] unable to fetch preAuthToken ".concat(e.t0),"warning");case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"list",value:function(e){return this.get("".concat(this.id,"/list/").concat(e||""))}},{key:"logout",value:function(){var e=this;return this.get("".concat(this.id,"/logout")).then((function(t){return Promise.all([t,e.uppy.getPlugin(e.pluginId).storage.removeItem(e.tokenKey)])})).then((function(e){return(0,i.Z)(e,1)[0]}))}}],[{key:"initPlugin",value:function(e,t,n){if(e.type="acquirer",e.files=[],n&&(e.opts=(0,a.Z)((0,a.Z)({},n),t)),t.serverUrl||t.serverPattern)throw new Error("`serverUrl` and `serverPattern` have been renamed to `companionUrl` and `companionAllowedHosts` respectively in the 0.30.5 release. Please consult the docs (for example, https://uppy.io/docs/instagram/ for the Instagram plugin) and use the updated options.`");if(t.companionAllowedHosts){var i=t.companionAllowedHosts;if("string"!==typeof i&&!Array.isArray(i)&&!(i instanceof RegExp))throw new TypeError("".concat(e.id,': the option "companionAllowedHosts" must be one of string, Array, RegExp'));e.opts.companionAllowedHosts=i}else/^(?!https?:\/\/).*$/i.test(t.companionUrl)?e.opts.companionAllowedHosts="https://".concat(t.companionUrl.replace(/^\/\//,"")):e.opts.companionAllowedHosts=new URL(t.companionUrl).origin;e.storage=e.opts.storage||r}}]),n}(S),j=n(15336);function I(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var N=0;function L(e){return"__private_"+N+++"_"+e}var B=L("queued"),D=L("emitter"),z=L("isOpen"),q=L("socket"),M=L("handleMessage"),H=function(e,t){function n(e){var t=this;(0,u.Z)(this,n),Object.defineProperty(this,B,{writable:!0,value:[]}),Object.defineProperty(this,D,{writable:!0,value:j()}),Object.defineProperty(this,z,{writable:!0,value:!1}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:function(e){try{var n=JSON.parse(e.data);t.emit(n.action,n.payload)}catch(r){console.log(r)}}}),this.opts=e,e&&!1===e.autoOpen||this.open()}return(0,l.Z)(n,[{key:"isOpen",get:function(){return I(this,z)[z]}},{key:e,value:function(){return I(this,q)[q]}},{key:t,value:function(){return I(this,B)[B]}},{key:"open",value:function(){var e=this;I(this,q)[q]=new WebSocket(this.opts.target),I(this,q)[q].onopen=function(){for(I(e,z)[z]=!0;I(e,B)[B].length>0&&I(e,z)[z];){var t=I(e,B)[B].shift();e.send(t.action,t.payload)}},I(this,q)[q].onclose=function(){I(e,z)[z]=!1},I(this,q)[q].onmessage=I(this,M)[M]}},{key:"close",value:function(){var e;null==(e=I(this,q)[q])||e.close()}},{key:"send",value:function(e,t){I(this,z)[z]?I(this,q)[q].send(JSON.stringify({action:e,payload:t})):I(this,B)[B].push({action:e,payload:t})}},{key:"on",value:function(e,t){I(this,D)[D].on(e,t)}},{key:"emit",value:function(e,t){I(this,D)[D].emit(e,t)}},{key:"once",value:function(e,t){I(this,D)[D].once(e,t)}}]),n}(Symbol.for("uppy test: getSocket"),Symbol.for("uppy test: getQueued"))},63798:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(4942),i=n(1413),o=n(15671),s=n(43144),a=n(11885),u=function(){function e(t,n){(0,o.Z)(this,e),void 0===n&&(n={}),this.uppy=t,this.opts=n}return(0,s.Z)(e,[{key:"getPluginState",value:function(){return this.uppy.getState().plugins[this.id]||{}}},{key:"setPluginState",value:function(e){var t=this.uppy.getState().plugins;this.uppy.setState({plugins:(0,i.Z)((0,i.Z)({},t),{},(0,r.Z)({},this.id,(0,i.Z)((0,i.Z)({},t[this.id]),e)))})}},{key:"setOptions",value:function(e){this.opts=(0,i.Z)((0,i.Z)({},this.opts),e),this.setPluginState(),this.i18nInit()}},{key:"i18nInit",value:function(){var e=new a.Z([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState()}},{key:"addTarget",value:function(){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}},{key:"install",value:function(){}},{key:"uninstall",value:function(){}},{key:"render",value:function(){throw new Error("Extend the render method to add your plugin to a DOM element")}},{key:"update",value:function(){}},{key:"afterUpdate",value:function(){}}]),e}()},50732:function(e,t,n){"use strict";n.d(t,{di:function(){return Te},hS:function(){return ke},ZP:function(){return ke}});var r=n(74165),i=n(15861),o=n(93433),s=n(4942),a=n(1413),u=n(15671),l=n(43144),c=n(11885),p=n(15336),h="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",f=n(33881);function d(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var v=0;function y(e){return"__private_"+v+++"_"+e}var m=y("callbacks"),g=y("publish"),b=function(){function e(){(0,u.Z)(this,e),Object.defineProperty(this,g,{value:w}),Object.defineProperty(this,m,{writable:!0,value:new Set}),this.state={}}return(0,l.Z)(e,[{key:"getState",value:function(){return this.state}},{key:"setState",value:function(e){var t=(0,a.Z)({},this.state),n=(0,a.Z)((0,a.Z)({},this.state),e);this.state=n,d(this,g)[g](t,n,e)}},{key:"subscribe",value:function(e){var t=this;return d(this,m)[m].add(e),function(){d(t,m)[m].delete(e)}}}]),e}();function w(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];d(this,m)[m].forEach((function(e){e.apply(void 0,t)}))}b.VERSION="3.0.2";var _=b,k=n(53700),P=n(13377),Z=n(68594),S=n(29439);function O(e){if(null==e&&"undefined"!==typeof navigator&&(e=navigator.userAgent),!e)return!0;var t=/Edge\/(\d+\.\d+)/.exec(e);if(!t)return!0;var n=t[1].split("."),r=(0,S.Z)(n,2),i=r[0],o=r[1];return i=parseInt(i,10),o=parseInt(o,10),i<15||15===i&&o<15063||(i>18||18===i&&o>=18218)}function x(e){return e<10?"0".concat(e):e.toString()}function E(){var e=new Date,t=x(e.getHours()),n=x(e.getMinutes()),r=x(e.getSeconds());return"".concat(t,":").concat(n,":").concat(r)}var R={debug:function(){},warn:function(){},error:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,["[Uppy] [".concat(E(),"]")].concat(n))}},A={debug:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).debug.apply(e,["[Uppy] [".concat(E(),"]")].concat(n))},warn:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).warn.apply(e,["[Uppy] [".concat(E(),"]")].concat(n))},error:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=console).error.apply(e,["[Uppy] [".concat(E(),"]")].concat(n))}},U=n(37762),F=n(60136),T=n(29388),C=n(98737),j=n(39968),I=n(92026),N={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]},L=function(e){(0,F.Z)(n,e);var t=(0,T.Z)(n);function n(){var e;return(0,u.Z)(this,n),(e=t.apply(this,arguments)).isRestriction=!0,e}return(0,l.Z)(n)}((0,C.Z)(Error)),B=function(){function e(t,n){(0,u.Z)(this,e),this.i18n=n,this.getOpts=function(){var e=t();if(null!=e.restrictions.allowedFileTypes&&!Array.isArray(e.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return e}}return(0,l.Z)(e,[{key:"validate",value:function(e,t){var n=this.getOpts().restrictions,r=n.maxFileSize,i=n.minFileSize,o=n.maxTotalFileSize,s=n.maxNumberOfFiles,a=n.allowedFileTypes;if(s&&t.filter((function(e){return!e.isGhost})).length+1>s)throw new L("".concat(this.i18n("youCanOnlyUploadX",{smart_count:s})));if(a&&!a.some((function(t){return t.includes("/")?!!e.type&&I(e.type.replace(/;.*?$/,""),t):!("."!==t[0]||!e.extension)&&e.extension.toLowerCase()===t.slice(1).toLowerCase()}))){var u=a.join(", ");throw new L(this.i18n("youCanOnlyUploadFileTypes",{types:u}))}if(o&&null!=e.size&&t.reduce((function(e,t){return e+t.size}),e.size)>o)throw new L(this.i18n("exceedsSize",{size:j(o),file:e.name}));if(r&&null!=e.size&&e.size>r)throw new L(this.i18n("exceedsSize",{size:j(r),file:e.name}));if(i&&null!=e.size&&e.size<i)throw new L(this.i18n("inferiorSize",{size:j(i)}))}},{key:"validateMinNumberOfFiles",value:function(e){var t=this.getOpts().restrictions.minNumberOfFiles;if(Object.keys(e).length<t)throw new L(this.i18n("youHaveToAtLeastSelectX",{smart_count:t}))}},{key:"getMissingRequiredMetaFields",value:function(e){var t,n=new L(this.i18n("missingRequiredMetaFieldOnFile",{fileName:e.name})),r=this.getOpts().restrictions.requiredMetaFields,i=[],o=(0,U.Z)(r);try{for(o.s();!(t=o.n()).done;){var s=t.value;Object.hasOwn(e.meta,s)&&""!==e.meta[s]||i.push(s)}}catch(a){o.e(a)}finally{o.f()}return{missingFields:i,error:n}}}]),e}(),D={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",emptyFolderAdded:"No files were added from empty folder",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"}}};function z(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var q=0;function M(e){return"__private_"+q+++"_"+e}var H=M("plugins"),K=M("restricter"),V=M("storeUnsubscribe"),W=M("emitter"),$=M("preProcessors"),Y=M("uploaders"),G=M("postProcessors"),J=M("informAndEmit"),X=M("checkRequiredMetaFieldsOnFile"),Q=M("checkRequiredMetaFields"),ee=M("assertNewUploadAllowed"),te=M("checkAndCreateFileStateObject"),ne=M("startIfAutoProceed"),re=M("addListeners"),ie=M("updateOnlineStatus"),oe=M("createUpload"),se=M("getUpload"),ae=M("removeUpload"),ue=M("runUpload"),le=function(e,t){function n(e){var t=this;(0,u.Z)(this,n),Object.defineProperty(this,ue,{value:we}),Object.defineProperty(this,ae,{value:be}),Object.defineProperty(this,se,{value:ge}),Object.defineProperty(this,oe,{value:me}),Object.defineProperty(this,re,{value:ye}),Object.defineProperty(this,ne,{value:ve}),Object.defineProperty(this,te,{value:de}),Object.defineProperty(this,ee,{value:fe}),Object.defineProperty(this,Q,{value:he}),Object.defineProperty(this,X,{value:pe}),Object.defineProperty(this,J,{value:ce}),Object.defineProperty(this,H,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,V,{writable:!0,value:void 0}),Object.defineProperty(this,W,{writable:!0,value:p()}),Object.defineProperty(this,$,{writable:!0,value:new Set}),Object.defineProperty(this,Y,{writable:!0,value:new Set}),Object.defineProperty(this,G,{writable:!0,value:new Set}),Object.defineProperty(this,ie,{writable:!0,value:this.updateOnlineStatus.bind(this)}),this.defaultLocale=D;var r={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:N,meta:{},onBeforeFileAdded:function(e){return e},onBeforeUpload:function(e){return e},store:new _,logger:R,infoTimeout:5e3};this.opts=(0,a.Z)((0,a.Z)((0,a.Z)({},r),e),{},{restrictions:(0,a.Z)((0,a.Z)({},r.restrictions),e&&e.restrictions)}),e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=A),this.log("Using Core v".concat(this.constructor.VERSION)),this.i18nInit(),this.calculateProgress=f(this.calculateProgress.bind(this),500,{leading:!0,trailing:!0}),this.store=this.opts.store,this.setState({plugins:{},files:{},currentUploads:{},allowNewUpload:!0,capabilities:{uploadProgress:O(),individualCancellation:!0,resumableUploads:!1},totalProgress:0,meta:(0,a.Z)({},this.opts.meta),info:[],recoveredState:null}),z(this,K)[K]=new B((function(){return t.opts}),this.i18n),z(this,V)[V]=this.store.subscribe((function(e,n,r){t.emit("state-update",e,n,r),t.updateAll(n)})),this.opts.debug&&"undefined"!==typeof window&&(window[this.opts.id]=this),z(this,re)[re]()}return(0,l.Z)(n,[{key:"emit",value:function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=z(this,W)[W]).emit.apply(t,[e].concat(r))}},{key:"on",value:function(e,t){return z(this,W)[W].on(e,t),this}},{key:"once",value:function(e,t){return z(this,W)[W].once(e,t),this}},{key:"off",value:function(e,t){return z(this,W)[W].off(e,t),this}},{key:"updateAll",value:function(e){this.iteratePlugins((function(t){t.update(e)}))}},{key:"setState",value:function(e){this.store.setState(e)}},{key:"getState",value:function(){return this.store.getState()}},{key:"setFileState",value:function(e,t){if(!this.getState().files[e])throw new Error("Can\u2019t set state for ".concat(e," (the file could have been removed)"));this.setState({files:(0,a.Z)((0,a.Z)({},this.getState().files),{},(0,s.Z)({},e,(0,a.Z)((0,a.Z)({},this.getState().files[e]),t)))})}},{key:"i18nInit",value:function(){var e=new c.Z([this.defaultLocale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.locale=e.locale}},{key:"setOptions",value:function(e){this.opts=(0,a.Z)((0,a.Z)((0,a.Z)({},this.opts),e),{},{restrictions:(0,a.Z)((0,a.Z)({},this.opts.restrictions),e&&e.restrictions)}),e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins((function(e){e.setOptions()})),this.setState()}},{key:"resetProgress",value:function(){var e={percentage:0,bytesUploaded:0,uploadComplete:!1,uploadStarted:null},t=(0,a.Z)({},this.getState().files),n={};Object.keys(t).forEach((function(r){var i=(0,a.Z)({},t[r]);i.progress=(0,a.Z)((0,a.Z)({},i.progress),e),n[r]=i})),this.setState({files:n,totalProgress:0}),this.emit("reset-progress")}},{key:"addPreProcessor",value:function(e){z(this,$)[$].add(e)}},{key:"removePreProcessor",value:function(e){return z(this,$)[$].delete(e)}},{key:"addPostProcessor",value:function(e){z(this,G)[G].add(e)}},{key:"removePostProcessor",value:function(e){return z(this,G)[G].delete(e)}},{key:"addUploader",value:function(e){z(this,Y)[Y].add(e)}},{key:"removeUploader",value:function(e){return z(this,Y)[Y].delete(e)}},{key:"setMeta",value:function(e){var t=(0,a.Z)((0,a.Z)({},this.getState().meta),e),n=(0,a.Z)({},this.getState().files);Object.keys(n).forEach((function(t){n[t]=(0,a.Z)((0,a.Z)({},n[t]),{},{meta:(0,a.Z)((0,a.Z)({},n[t].meta),e)})})),this.log("Adding metadata:"),this.log(e),this.setState({meta:t,files:n})}},{key:"setFileMeta",value:function(e,t){var n=(0,a.Z)({},this.getState().files);if(n[e]){var r=(0,a.Z)((0,a.Z)({},n[e].meta),t);n[e]=(0,a.Z)((0,a.Z)({},n[e]),{},{meta:r}),this.setState({files:n})}else this.log("Was trying to set metadata for a file that has been removed: ",e)}},{key:"getFile",value:function(e){return this.getState().files[e]}},{key:"getFiles",value:function(){var e=this.getState().files;return Object.values(e)}},{key:"getObjectOfFilesPerState",value:function(){var e=this.getState(),t=e.files,n=e.totalProgress,r=e.error,i=Object.values(t),o=i.filter((function(e){var t=e.progress;return!t.uploadComplete&&t.uploadStarted})),s=i.filter((function(e){return!e.progress.uploadStarted})),a=i.filter((function(e){return e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess})),u=i.filter((function(e){return e.progress.uploadStarted})),l=i.filter((function(e){return e.isPaused})),c=i.filter((function(e){return e.progress.uploadComplete})),p=i.filter((function(e){return e.error})),h=o.filter((function(e){return!e.isPaused})),f=i.filter((function(e){return e.progress.preprocess||e.progress.postprocess}));return{newFiles:s,startedFiles:a,uploadStartedFiles:u,pausedFiles:l,completeFiles:c,erroredFiles:p,inProgressFiles:o,inProgressNotPausedFiles:h,processingFiles:f,isUploadStarted:u.length>0,isAllComplete:100===n&&c.length===i.length&&0===f.length,isAllErrored:!!r&&p.length===i.length,isAllPaused:0!==o.length&&l.length===o.length,isUploadInProgress:o.length>0,isSomeGhost:i.some((function(e){return e.isGhost}))}}},{key:"validateRestrictions",value:function(e,t){void 0===t&&(t=this.getFiles());try{z(this,K)[K].validate(e,t)}catch(n){return n}return null}},{key:"checkIfFileAlreadyExists",value:function(e){var t=this.getState().files;return!(!t[e]||t[e].isGhost)}},{key:"addFile",value:function(e){z(this,ee)[ee](e);var t=this.getState().files,n=z(this,te)[te](t,e);return t[n.id]&&t[n.id].isGhost&&(n=(0,a.Z)((0,a.Z)({},t[n.id]),{},{data:e.data,isGhost:!1}),this.log("Replaced the blob in the restored ghost file: ".concat(n.name,", ").concat(n.id))),this.setState({files:(0,a.Z)((0,a.Z)({},t),{},(0,s.Z)({},n.id,n))}),this.emit("file-added",n),this.emit("files-added",[n]),this.log("Added file: ".concat(n.name,", ").concat(n.id,", mime type: ").concat(n.type)),z(this,ne)[ne](),n.id}},{key:"addFiles",value:function(e){var t=this;z(this,ee)[ee]();for(var n=(0,a.Z)({},this.getState().files),r=[],i=[],o=0;o<e.length;o++)try{var s=z(this,te)[te](n,e[o]);n[s.id]&&n[s.id].isGhost&&(s=(0,a.Z)((0,a.Z)({},n[s.id]),{},{data:e[o].data,isGhost:!1}),this.log("Replaced blob in a ghost file: ".concat(s.name,", ").concat(s.id))),n[s.id]=s,r.push(s)}catch(l){l.isRestriction||i.push(l)}if(this.setState({files:n}),r.forEach((function(e){t.emit("file-added",e)})),this.emit("files-added",r),r.length>5?this.log("Added batch of ".concat(r.length," files")):Object.keys(r).forEach((function(e){t.log("Added file: ".concat(r[e].name,"\n id: ").concat(r[e].id,"\n type: ").concat(r[e].type))})),r.length>0&&z(this,ne)[ne](),i.length>0){var u="Multiple errors occurred while adding files:\n";if(i.forEach((function(e){u+="\n * ".concat(e.message)})),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:i.length}),details:u},"error",this.opts.infoTimeout),"function"===typeof AggregateError)throw new AggregateError(i,u);var l=new Error(u);throw l.errors=i,l}}},{key:"removeFiles",value:function(e,t){var n=this,r=this.getState(),i=r.files,o=r.currentUploads,s=(0,a.Z)({},i),u=(0,a.Z)({},o),l=Object.create(null);function c(e){return void 0===l[e]}e.forEach((function(e){i[e]&&(l[e]=i[e],delete s[e])})),Object.keys(u).forEach((function(e){var t=o[e].fileIDs.filter(c);if(0!==t.length){var r=n.getState().capabilities;if(t.length!==o[e].fileIDs.length&&!r.individualCancellation)throw new Error("individualCancellation is disabled");u[e]=(0,a.Z)((0,a.Z)({},o[e]),{},{fileIDs:t})}else delete u[e]}));var p={currentUploads:u,files:s};0===Object.keys(s).length&&(p.allowNewUpload=!0,p.error=null,p.recoveredState=null),this.setState(p),this.calculateTotalProgress();var h=Object.keys(l);h.forEach((function(e){n.emit("file-removed",l[e],t)})),h.length>5?this.log("Removed ".concat(h.length," files")):this.log("Removed files: ".concat(h.join(", ")))}},{key:"removeFile",value:function(e,t){void 0===t&&(t=null),this.removeFiles([e],t)}},{key:"pauseResume",value:function(e){if(this.getState().capabilities.resumableUploads&&!this.getFile(e).uploadComplete){var t=!(this.getFile(e).isPaused||!1);return this.setFileState(e,{isPaused:t}),this.emit("upload-pause",e,t),t}}},{key:"pauseAll",value:function(){var e=(0,a.Z)({},this.getState().files);Object.keys(e).filter((function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted})).forEach((function(t){var n=(0,a.Z)((0,a.Z)({},e[t]),{},{isPaused:!0});e[t]=n})),this.setState({files:e}),this.emit("pause-all")}},{key:"resumeAll",value:function(){var e=(0,a.Z)({},this.getState().files);Object.keys(e).filter((function(t){return!e[t].progress.uploadComplete&&e[t].progress.uploadStarted})).forEach((function(t){var n=(0,a.Z)((0,a.Z)({},e[t]),{},{isPaused:!1,error:null});e[t]=n})),this.setState({files:e}),this.emit("resume-all")}},{key:"retryAll",value:function(){var e=(0,a.Z)({},this.getState().files),t=Object.keys(e).filter((function(t){return e[t].error}));if(t.forEach((function(t){var n=(0,a.Z)((0,a.Z)({},e[t]),{},{isPaused:!1,error:null});e[t]=n})),this.setState({files:e,error:null}),this.emit("retry-all",t),0===t.length)return Promise.resolve({successful:[],failed:[]});var n=z(this,oe)[oe](t,{forceAllowNewUpload:!0});return z(this,ue)[ue](n)}},{key:"cancelAll",value:function(e){var t=(void 0===e?{}:e).reason,n=void 0===t?"user":t;if(this.emit("cancel-all",{reason:n}),"user"===n){var r=this.getState().files,i=Object.keys(r);i.length&&this.removeFiles(i,"cancel-all"),this.setState({totalProgress:0,error:null,recoveredState:null})}}},{key:"retryUpload",value:function(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",e);var t=z(this,oe)[oe]([e],{forceAllowNewUpload:!0});return z(this,ue)[ue](t)}},{key:"logout",value:function(){this.iteratePlugins((function(e){e.provider&&e.provider.logout&&e.provider.logout()}))}},{key:"calculateProgress",value:function(e,t){if(null!=e&&this.getFile(e.id)){var n=Number.isFinite(t.bytesTotal)&&t.bytesTotal>0;this.setFileState(e.id,{progress:(0,a.Z)((0,a.Z)({},this.getFile(e.id).progress),{},{bytesUploaded:t.bytesUploaded,bytesTotal:t.bytesTotal,percentage:n?Math.round(t.bytesUploaded/t.bytesTotal*100):0})}),this.calculateTotalProgress()}else this.log("Not setting progress for a file that has been removed: ".concat(null==e?void 0:e.id))}},{key:"calculateTotalProgress",value:function(){var e=this.getFiles().filter((function(e){return e.progress.uploadStarted||e.progress.preprocess||e.progress.postprocess}));if(0===e.length)return this.emit("progress",0),void this.setState({totalProgress:0});var t=e.filter((function(e){return null!=e.progress.bytesTotal})),n=e.filter((function(e){return null==e.progress.bytesTotal}));if(0!==t.length){var r=t.reduce((function(e,t){return e+t.progress.bytesTotal}),0),i=r/t.length;r+=i*n.length;var o=0;t.forEach((function(e){o+=e.progress.bytesUploaded})),n.forEach((function(e){o+=i*(e.progress.percentage||0)/100}));var s=0===r?0:Math.round(o/r*100);s>100&&(s=100),this.setState({totalProgress:s}),this.emit("progress",s)}else{var a=100*e.length,u=n.reduce((function(e,t){return e+t.progress.percentage}),0),l=Math.round(u/a*100);this.setState({totalProgress:l})}}},{key:"updateOnlineStatus",value:function(){"undefined"===typeof window.navigator.onLine||window.navigator.onLine?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}},{key:"getID",value:function(){return this.opts.id}},{key:"use",value:function(e,t){if("function"!==typeof e){var n="Expected a plugin class, but got ".concat(null===e?"null":typeof e,".")+" Please verify that the plugin was imported and spelled correctly.";throw new TypeError(n)}var r=new e(this,t),i=r.id;if(!i)throw new Error("Your plugin must have an id");if(!r.type)throw new Error("Your plugin must have a type");var o=this.getPlugin(i);if(o){var s="Already found a plugin named '".concat(o.id,"'. ")+"Tried to use: '".concat(i,"'.\n")+"Uppy plugins must have unique `id` options. See https://uppy.io/docs/plugins/#id.";throw new Error(s)}return e.VERSION&&this.log("Using ".concat(i," v").concat(e.VERSION)),r.type in z(this,H)[H]?z(this,H)[H][r.type].push(r):z(this,H)[H][r.type]=[r],r.install(),this}},{key:"getPlugin",value:function(e){for(var t=0,n=Object.values(z(this,H)[H]);t<n.length;t++){var r=n[t].find((function(t){return t.id===e}));if(null!=r)return r}}},{key:e,value:function(e){return z(this,H)[H][e]}},{key:"iteratePlugins",value:function(e){Object.values(z(this,H)[H]).flat(1).forEach(e)}},{key:"removePlugin",value:function(e){this.log("Removing plugin ".concat(e.id)),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();var t=z(this,H)[H][e.type],n=t.findIndex((function(t){return t.id===e.id}));-1!==n&&t.splice(n,1);var r=this.getState(),i={plugins:(0,a.Z)((0,a.Z)({},r.plugins),{},(0,s.Z)({},e.id,void 0))};this.setState(i)}},{key:"close",value:function(e){var t=this,n=(void 0===e?{}:e).reason;this.log("Closing Uppy instance ".concat(this.opts.id,": removing all files and uninstalling plugins")),this.cancelAll({reason:n}),z(this,V)[V](),this.iteratePlugins((function(e){t.removePlugin(e)})),"undefined"!==typeof window&&window.removeEventListener&&(window.removeEventListener("online",z(this,ie)[ie]),window.removeEventListener("offline",z(this,ie)[ie]))}},{key:"hideInfo",value:function(){var e=this.getState().info;this.setState({info:e.slice(1)}),this.emit("info-hidden")}},{key:"info",value:function(e,t,n){var r=this;void 0===t&&(t="info"),void 0===n&&(n=3e3);var i="object"===typeof e;this.setState({info:[].concat((0,o.Z)(this.getState().info),[{type:t,message:i?e.message:e,details:i?e.details:null}])}),setTimeout((function(){return r.hideInfo()}),n),this.emit("info-visible")}},{key:"log",value:function(e,t){var n=this.opts.logger;switch(t){case"error":n.error(e);break;case"warning":n.warn(e);break;default:n.debug(e)}}},{key:"restore",value:function(e){return this.log('Core: attempting to restore upload "'.concat(e,'"')),this.getState().currentUploads[e]?z(this,ue)[ue](e):(z(this,ae)[ae](e),Promise.reject(new Error("Nonexistent upload")))}},{key:t,value:function(){var e;return(e=z(this,oe))[oe].apply(e,arguments)}},{key:"addResultData",value:function(e,t){if(z(this,se)[se](e)){var n=this.getState().currentUploads,r=(0,a.Z)((0,a.Z)({},n[e]),{},{result:(0,a.Z)((0,a.Z)({},n[e].result),t)});this.setState({currentUploads:(0,a.Z)((0,a.Z)({},n),{},(0,s.Z)({},e,r))})}else this.log("Not setting result for an upload that has been removed: ".concat(e))}},{key:"upload",value:function(){var e,t=this;null!=(e=z(this,H)[H].uploader)&&e.length||this.log("No uploader type plugins are used","warning");var n=this.getState().files,r=this.opts.onBeforeUpload(n);return!1===r?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(r&&"object"===typeof r&&(n=r,this.setState({files:n})),Promise.resolve().then((function(){return z(t,K)[K].validateMinNumberOfFiles(n)})).catch((function(e){throw z(t,J)[J](e),e})).then((function(){if(!z(t,Q)[Q](n))throw new L(t.i18n("missingRequiredMetaField"))})).catch((function(e){throw e})).then((function(){var e=t.getState().currentUploads,r=Object.values(e).flatMap((function(e){return e.fileIDs})),i=[];Object.keys(n).forEach((function(e){var n=t.getFile(e);n.progress.uploadStarted||-1!==r.indexOf(e)||i.push(n.id)}));var o=z(t,oe)[oe](i);return z(t,ue)[ue](o)})).catch((function(e){throw t.emit("error",e),t.log(e,"error"),e})))}}]),n}(Symbol.for("uppy test: getPlugins"),Symbol.for("uppy test: createUpload"));function ce(e,t){var n=e.message,r=e.details,i=void 0===r?"":r;e.isRestriction?this.emit("restriction-failed",t,e):this.emit("error",e),this.info({message:n,details:i},"error",this.opts.infoTimeout),this.log("".concat(n," ").concat(i).trim(),"error")}function pe(e){var t=z(this,K)[K].getMissingRequiredMetaFields(e),n=t.missingFields,r=t.error;return!(n.length>0)||(this.setFileState(e.id,{missingRequiredMetaFields:n}),this.log(r.message),this.emit("restriction-failed",e,r),!1)}function he(e){for(var t=!0,n=0,r=Object.values(e);n<r.length;n++){var i=r[n];z(this,X)[X](i)||(t=!1)}return t}function fe(e){if(!1===this.getState().allowNewUpload){var t=new L(this.i18n("noMoreFilesAllowed"));throw z(this,J)[J](t,e),t}}function de(e,t){t instanceof File&&(t={name:t.name,type:t.type,size:t.size,data:t});var n=(0,k.Z)(t),r=function(e,t){return t.name?t.name:"image"===e.split("/")[0]?"".concat(e.split("/")[0],".").concat(e.split("/")[1]):"noname"}(n,t),i=(0,P.Z)(r).extension,o=Boolean(t.isRemote),s=(0,Z.Z)((0,a.Z)((0,a.Z)({},t),{},{type:n}));if(this.checkIfFileAlreadyExists(s)){var u=new L(this.i18n("noDuplicates",{fileName:r}));throw z(this,J)[J](u,t),u}var l=t.meta||{};l.name=r,l.type=n;var c=Number.isFinite(t.data.size)?t.data.size:null,p={source:t.source||"",id:s,name:r,extension:i||"",meta:(0,a.Z)((0,a.Z)({},this.getState().meta),l),type:n,data:t.data,progress:{percentage:0,bytesUploaded:0,bytesTotal:c,uploadComplete:!1,uploadStarted:null},size:c,isRemote:o,remote:t.remote||"",preview:t.preview},h=this.opts.onBeforeFileAdded(p,e);if(!1===h){var f=new L("Cannot add the file because onBeforeFileAdded returned false.");throw this.emit("restriction-failed",t,f),f}"object"===typeof h&&null!==h&&(p=h);try{var d=Object.keys(e).map((function(t){return e[t]}));z(this,K)[K].validate(p,d)}catch(v){throw z(this,J)[J](v,p),v}return p}function ve(){var e=this;this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout((function(){e.scheduledAutoProceed=null,e.upload().catch((function(t){t.isRestriction||e.log(t.stack||t.message||t)}))}),4))}function ye(){var e=this,t=function(t,n,r){var i=t.message||"Unknown error";t.details&&(i+=" ".concat(t.details)),e.setState({error:i}),null!=n&&n.id in e.getState().files&&e.setFileState(n.id,{error:i,response:r})};this.on("error",t),this.on("upload-error",(function(n,r,i){if(t(r,n,i),"object"===typeof r&&r.message){var o=new Error(r.message);o.details=r.message,r.details&&(o.details+=" ".concat(r.details)),o.message=e.i18n("failedToUpload",{file:null==n?void 0:n.name}),z(e,J)[J](o)}else z(e,J)[J](r)})),this.on("upload",(function(){e.setState({error:null})})),this.on("upload-started",(function(t){null!=t&&e.getFile(t.id)?e.setFileState(t.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,percentage:0,bytesUploaded:0,bytesTotal:t.size}}):e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id))})),this.on("upload-progress",this.calculateProgress),this.on("upload-success",(function(t,n){if(null!=t&&e.getFile(t.id)){var r=e.getFile(t.id).progress;e.setFileState(t.id,{progress:(0,a.Z)((0,a.Z)({},r),{},{postprocess:z(e,G)[G].size>0?{mode:"indeterminate"}:null,uploadComplete:!0,percentage:100,bytesUploaded:r.bytesTotal}),response:n,uploadURL:n.uploadURL,isPaused:!1}),null==t.size&&e.setFileState(t.id,{size:n.bytesUploaded||r.bytesTotal}),e.calculateTotalProgress()}else e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id))})),this.on("preprocess-progress",(function(t,n){null!=t&&e.getFile(t.id)?e.setFileState(t.id,{progress:(0,a.Z)((0,a.Z)({},e.getFile(t.id).progress),{},{preprocess:n})}):e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id))})),this.on("preprocess-complete",(function(t){if(null!=t&&e.getFile(t.id)){var n=(0,a.Z)({},e.getState().files);n[t.id]=(0,a.Z)((0,a.Z)({},n[t.id]),{},{progress:(0,a.Z)({},n[t.id].progress)}),delete n[t.id].progress.preprocess,e.setState({files:n})}else e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id))})),this.on("postprocess-progress",(function(t,n){null!=t&&e.getFile(t.id)?e.setFileState(t.id,{progress:(0,a.Z)((0,a.Z)({},e.getState().files[t.id].progress),{},{postprocess:n})}):e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id))})),this.on("postprocess-complete",(function(t){if(null!=t&&e.getFile(t.id)){var n=(0,a.Z)({},e.getState().files);n[t.id]=(0,a.Z)((0,a.Z)({},n[t.id]),{},{progress:(0,a.Z)({},n[t.id].progress)}),delete n[t.id].progress.postprocess,e.setState({files:n})}else e.log("Not setting progress for a file that has been removed: ".concat(null==t?void 0:t.id))})),this.on("restored",(function(){e.calculateTotalProgress()})),this.on("dashboard:file-edit-complete",(function(t){t&&z(e,X)[X](t)})),"undefined"!==typeof window&&window.addEventListener&&(window.addEventListener("online",z(this,ie)[ie]),window.addEventListener("offline",z(this,ie)[ie]),setTimeout(z(this,ie)[ie],3e3))}function me(e,t){void 0===t&&(t={});var n=t.forceAllowNewUpload,r=void 0!==n&&n,i=this.getState(),o=i.allowNewUpload,u=i.currentUploads;if(!o&&!r)throw new Error("Cannot create a new upload: already uploading.");var l=function(){for(var e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;t--;)e+=h[64*Math.random()|0];return e}();return this.emit("upload",{id:l,fileIDs:e}),this.setState({allowNewUpload:!1!==this.opts.allowMultipleUploadBatches&&!1!==this.opts.allowMultipleUploads,currentUploads:(0,a.Z)((0,a.Z)({},u),{},(0,s.Z)({},l,{fileIDs:e,step:0,result:{}}))}),l}function ge(e){return this.getState().currentUploads[e]}function be(e){var t=(0,a.Z)({},this.getState().currentUploads);delete t[e],this.setState({currentUploads:t})}function we(e){return _e.apply(this,arguments)}function _e(){return(_e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,u,l,c,p,h,f,d,v,y,m,g=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.getState(),i=n.currentUploads,u=i[t],l=u.step||0,c=[].concat((0,o.Z)(z(this,$)[$]),(0,o.Z)(z(this,Y)[Y]),(0,o.Z)(z(this,G)[G])),e.prev=4,p=l;case 6:if(!(p<c.length)){e.next=19;break}if(u){e.next=9;break}return e.abrupt("break",19);case 9:return h=c[p],f=(0,a.Z)((0,a.Z)({},u),{},{step:p}),this.setState({currentUploads:(0,a.Z)((0,a.Z)({},i),{},(0,s.Z)({},t,f))}),e.next=14,h(f.fileIDs,t);case 14:i=this.getState().currentUploads,u=i[t];case 16:p++,e.next=6;break;case 19:e.next=25;break;case 21:throw e.prev=21,e.t0=e.catch(4),z(this,ae)[ae](t),e.t0;case 25:if(!u){e.next=34;break}return u.fileIDs.forEach((function(e){var t=g.getFile(e);t&&t.progress.postprocess&&g.emit("postprocess-complete",t)})),d=u.fileIDs.map((function(e){return g.getFile(e)})),v=d.filter((function(e){return!e.error})),y=d.filter((function(e){return e.error})),e.next=32,this.addResultData(t,{successful:v,failed:y,uploadID:t});case 32:i=this.getState().currentUploads,u=i[t];case 34:return u&&(m=u.result,this.emit("complete",m),z(this,ae)[ae](t)),null==m&&this.log("Not setting result for an upload that has been removed: ".concat(t)),e.abrupt("return",m);case 37:case"end":return e.stop()}}),e,this,[[4,21]])})))).apply(this,arguments)}le.VERSION="3.0.4";var ke=le,Pe=n(97326),Ze=n(58620),Se=n(8165);var Oe=n(4692),xe=n(63798);function Ee(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Re=0;function Ae(e){return"__private_"+Re+++"_"+e}var Ue=Ae("updateUI"),Fe=function(e){(0,F.Z)(n,e);var t=(0,T.Z)(n);function n(){var e;return(0,u.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,Pe.Z)(e),Ue,{writable:!0,value:void 0}),e}return(0,l.Z)(n,[{key:"getTargetPlugin",value:function(e){var t;if("object"===typeof e&&e instanceof n)t=e;else if("function"===typeof e){var r=e;this.uppy.iteratePlugins((function(e){e instanceof r&&(t=e)}))}return t}},{key:"mount",value:function(e,t){var n,r,i=this,s=t.id,a=(n=e,void 0===r&&(r=document),"string"===typeof n?r.querySelector(n):(0,Se.Z)(n)?n:null);if(a){this.isTargetDOMEl=!0;var u=document.createElement("div");return u.classList.add("uppy-Root"),Ee(this,Ue)[Ue]=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return n=i,t||(t=Promise.resolve().then((function(){return t=null,e.apply(void 0,(0,o.Z)(n))}))),t}}((function(e){i.uppy.getPlugin(i.id)&&((0,Ze.sY)(i.render(e),u),i.afterUpdate())})),this.uppy.log("Installing ".concat(s," to a DOM element '").concat(e,"'")),this.opts.replaceTargetContent&&(a.innerHTML=""),(0,Ze.sY)(this.render(this.uppy.getState()),u),this.el=u,a.appendChild(u),u.dir=this.opts.direction||(0,Oe.Z)(u)||"ltr",this.onMount(),this.el}var l=this.getTargetPlugin(e);if(l)return this.uppy.log("Installing ".concat(s," to ").concat(l.id)),this.parent=l,this.el=l.addTarget(t),this.onMount(),this.el;this.uppy.log("Not installing ".concat(s));var c="Invalid target option given to ".concat(s,".");throw c+="function"===typeof e?" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":"If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(c)}},{key:"update",value:function(e){var t,n;null!=this.el&&(null==(t=(n=Ee(this,Ue))[Ue])||t.call(n,e))}},{key:"unmount",value:function(){var e;this.isTargetDOMEl&&(null==(e=this.el)||e.remove());this.onUnmount()}},{key:"onMount",value:function(){}},{key:"onUnmount",value:function(){}}]),n}(xe.Z),Te=Fe},6697:function(e,t,n){"use strict";n.d(t,{Z:function(){return v}});var r=n(15671),i=n(43144),o=n(97326),s=n(60136),a=n(29388),u=n(50732),l=n(97657),c=n(58620),p=n(11752),h=n(61120),f=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,i.Z)(n,[{key:"toggleCheckbox",value:function(e,t){e.stopPropagation(),e.preventDefault(),t.custom.isSharedDrive||(0,p.Z)((0,h.Z)(n.prototype),"toggleCheckbox",this).call(this,e,t)}}]),n}(n(94362).h),d={strings:{pluginNameGoogleDrive:"Google Drive"}},v=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(e,i){var s;return(0,r.Z)(this,n),(s=t.call(this,e,i)).id=s.opts.id||"GoogleDrive",s.title=s.opts.title||"Google Drive",l.zt.initPlugin((0,o.Z)(s),i),s.title=s.opts.title||"Google Drive",s.icon=function(){return(0,c.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,c.h)("g",{fill:"none",fillRule:"evenodd"},(0,c.h)("rect",{className:"uppy-ProviderIconBg",fill:"#4285F4",width:"32",height:"32",rx:"16"}),(0,c.h)("path",{d:"M25.216 17.736L19.043 7h-6.086l6.175 10.736h6.084zm-11.275.896L10.9 24h11.723l3.04-5.368H13.942zm-1.789-10.29l-5.816 10.29L9.38 24l5.905-10.29-3.132-5.369z",fill:"#FFF"})))},s.provider=new l.zt(e,{companionUrl:s.opts.companionUrl,companionHeaders:s.opts.companionHeaders,companionKeysParams:s.opts.companionKeysParams,companionCookiesRule:s.opts.companionCookiesRule,provider:"drive",pluginId:s.id}),s.defaultLocale=d,s.i18nInit(),s.title=s.i18n("pluginNameGoogleDrive"),s.onFirstRender=s.onFirstRender.bind((0,o.Z)(s)),s.render=s.render.bind((0,o.Z)(s)),s}return(0,i.Z)(n,[{key:"install",value:function(){this.view=new f(this,{provider:this.provider});var e=this.opts.target;e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.view.tearDown(),this.unmount()}},{key:"onFirstRender",value:function(){return Promise.all([this.provider.fetchPreAuthToken(),this.view.getFolder("root","/")])}},{key:"render",value:function(e){return this.view.render(e)}}]),n}(u.di);v.VERSION="3.0.1"},94362:function(e,t,n){"use strict";n.d(t,{h:function(){return H}});var r=n(74165),i=n(15861),o=n(1413),s=n(15671),a=n(43144),u=n(97326),l=n(60136),c=n(29388),p=n(58620);function h(){return(0,p.h)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",xmlns:"http://www.w3.org/2000/svg"},(0,p.h)("g",{fill:"none","fill-rule":"evenodd"},(0,p.h)("circle",{fill:"#FFF",cx:"13",cy:"13",r:"13"}),(0,p.h)("path",{d:"M21.64 13.205c0-.639-.057-1.252-.164-1.841H13v3.481h4.844a4.14 4.14 0 01-1.796 2.716v2.259h2.908c1.702-1.567 2.684-3.875 2.684-6.615z",fill:"#4285F4","fill-rule":"nonzero"}),(0,p.h)("path",{d:"M13 22c2.43 0 4.467-.806 5.956-2.18l-2.908-2.259c-.806.54-1.837.86-3.048.86-2.344 0-4.328-1.584-5.036-3.711H4.957v2.332A8.997 8.997 0 0013 22z",fill:"#34A853","fill-rule":"nonzero"}),(0,p.h)("path",{d:"M7.964 14.71A5.41 5.41 0 017.682 13c0-.593.102-1.17.282-1.71V8.958H4.957A8.996 8.996 0 004 13c0 1.452.348 2.827.957 4.042l3.007-2.332z",fill:"#FBBC05","fill-rule":"nonzero"}),(0,p.h)("path",{d:"M13 7.58c1.321 0 2.508.454 3.44 1.345l2.582-2.58C17.463 4.891 15.426 4 13 4a8.997 8.997 0 00-8.043 4.958l3.007 2.332C8.672 9.163 10.656 7.58 13 7.58z",fill:"#EA4335","fill-rule":"nonzero"}),(0,p.h)("path",{d:"M4 4h18v18H4z"})))}var f=function(e){var t=e.pluginName,n=e.pluginIcon,r=e.i18nArray,i=e.handleAuth,o="Google Drive"===t,s=(0,p.h)("span",{className:"uppy-Provider-authTitleName"},t,(0,p.h)("br",null));return(0,p.h)("div",{className:"uppy-Provider-auth"},(0,p.h)("div",{className:"uppy-Provider-authIcon"},n()),(0,p.h)("div",{className:"uppy-Provider-authTitle"},r("authenticateWithTitle",{pluginName:s})),o?(0,p.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn uppy-Provider-btn-google",onClick:i,"data-uppy-super-focusable":!0},(0,p.h)(h,null),r("signInWithGoogle")):(0,p.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Provider-authBtn",onClick:i,"data-uppy-super-focusable":!0},r("authenticateWith",{pluginName:t})))},d=function(e){var t=e.getFolder,n=e.title,r=e.isLast;return(0,p.h)(p.HY,null,(0,p.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn",onClick:t},n),r?"":" / ")},v=function(e){var t=[];return e.showBreadcrumbs&&t.push(function(e){var t=e.getFolder,n=e.title,r=e.breadcrumbsIcon,i=e.directories;return(0,p.h)("div",{className:"uppy-Provider-breadcrumbs"},(0,p.h)("div",{className:"uppy-Provider-breadcrumbsIcon"},r),i.map((function(e,r){return(0,p.h)(d,{key:e.id,getFolder:function(){return t(e.id)},title:0===r?n:e.title,isLast:r+1===i.length})})))}({getFolder:e.getFolder,directories:e.directories,breadcrumbsIcon:e.pluginIcon&&e.pluginIcon(),title:e.title})),t.push(function(e){var t=e.i18n,n=e.logout,r=e.username;return[(0,p.h)("span",{className:"uppy-ProviderBrowser-user",key:"username"},r),(0,p.h)("button",{type:"button",onClick:n,className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowser-userLogout",key:"logout"},t("logOut"))]}({logout:e.logout,username:e.username,i18n:e.i18n})),t},y=n(93433),m=n(81694),g=n(13377);function b(e){return(0,o.Z)((0,o.Z)({},e),{},{type:e.mimeType,extension:e.name?(0,g.Z)(e.name).extension:null})}var w=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e){var r;return(0,s.Z)(this,n),(r=t.call(this,e)).preventEnterPress=r.preventEnterPress.bind((0,u.Z)(r)),r}return(0,a.Z)(n,[{key:"preventEnterPress",value:function(e){13===e.keyCode&&(e.stopPropagation(),e.preventDefault())}},{key:"render",value:function(){var e=this.props,t=e.i18n,n=e.filterInput,r=e.filterQuery;return(0,p.h)("div",{className:"uppy-ProviderBrowser-filter"},(0,p.h)("input",{className:"uppy-u-reset uppy-ProviderBrowser-filterInput",type:"text",placeholder:t("filter"),"aria-label":t("filter"),onKeyUp:this.preventEnterPress,onKeyDown:this.preventEnterPress,onKeyPress:this.preventEnterPress,onInput:function(e){return r(e)},value:n}),(0,p.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-ProviderBrowser-filterIcon",width:"12",height:"12",viewBox:"0 0 12 12"},(0,p.h)("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})),n&&(0,p.h)("button",{className:"uppy-u-reset uppy-ProviderBrowser-filterClose",type:"button","aria-label":t("resetFilter"),title:t("resetFilter"),onClick:r},(0,p.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",viewBox:"0 0 19 19"},(0,p.h)("path",{d:"M17.318 17.232L9.94 9.854 9.586 9.5l-.354.354-7.378 7.378h.707l-.62-.62v.706L9.318 9.94l.354-.354-.354-.354L1.94 1.854v.707l.62-.62h-.706l7.378 7.378.354.354.354-.354 7.378-7.378h-.707l.622.62v-.706L9.854 9.232l-.354.354.354.354 7.378 7.378.708-.707-7.38-7.378v.708l7.38-7.38.353-.353-.353-.353-.622-.622-.353-.353-.354.352-7.378 7.38h.708L2.56 1.23 2.208.88l-.353.353-.622.62-.353.355.352.353 7.38 7.38v-.708l-7.38 7.38-.353.353.352.353.622.622.353.353.354-.353 7.38-7.38h-.708l7.38 7.38z"}))))}}]),n}(p.wA),_=function(e){var t=e.cancel,n=e.done,r=e.i18n,i=e.selected;return(0,p.h)("div",{className:"uppy-ProviderBrowser-footer"},(0,p.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary",onClick:n,type:"button"},r("selectX",{smart_count:i})),(0,p.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link",onClick:t,type:"button"},r("cancel")))};function k(){return(0,p.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:11,height:14.5,viewBox:"0 0 44 58"},(0,p.h)("path",{d:"M27.437.517a1 1 0 0 0-.094.03H4.25C2.037.548.217 2.368.217 4.58v48.405c0 2.212 1.82 4.03 4.03 4.03H39.03c2.21 0 4.03-1.818 4.03-4.03V15.61a1 1 0 0 0-.03-.28 1 1 0 0 0 0-.093 1 1 0 0 0-.03-.032 1 1 0 0 0 0-.03 1 1 0 0 0-.032-.063 1 1 0 0 0-.03-.063 1 1 0 0 0-.032 0 1 1 0 0 0-.03-.063 1 1 0 0 0-.032-.03 1 1 0 0 0-.03-.063 1 1 0 0 0-.063-.062l-14.593-14a1 1 0 0 0-.062-.062A1 1 0 0 0 28 .708a1 1 0 0 0-.374-.157 1 1 0 0 0-.156 0 1 1 0 0 0-.03-.03l-.003-.003zM4.25 2.547h22.218v9.97c0 2.21 1.82 4.03 4.03 4.03h10.564v36.438a2.02 2.02 0 0 1-2.032 2.032H4.25c-1.13 0-2.032-.9-2.032-2.032V4.58c0-1.13.902-2.032 2.03-2.032zm24.218 1.345l10.375 9.937.75.718H30.5c-1.13 0-2.032-.9-2.032-2.03V3.89z"}))}function P(){return(0,p.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",style:{minWidth:16,marginRight:3},viewBox:"0 0 276.157 276.157"},(0,p.h)("path",{d:"M273.08 101.378c-3.3-4.65-8.86-7.32-15.254-7.32h-24.34V67.59c0-10.2-8.3-18.5-18.5-18.5h-85.322c-3.63 0-9.295-2.875-11.436-5.805l-6.386-8.735c-4.982-6.814-15.104-11.954-23.546-11.954H58.73c-9.292 0-18.638 6.608-21.737 15.372l-2.033 5.752c-.958 2.71-4.72 5.37-7.596 5.37H18.5C8.3 49.09 0 57.39 0 67.59v167.07c0 .886.16 1.73.443 2.52.152 3.306 1.18 6.424 3.053 9.064 3.3 4.652 8.86 7.32 15.255 7.32h188.487c11.395 0 23.27-8.425 27.035-19.18l40.677-116.188c2.11-6.035 1.43-12.164-1.87-16.816zM18.5 64.088h8.864c9.295 0 18.64-6.607 21.738-15.37l2.032-5.75c.96-2.712 4.722-5.373 7.597-5.373h29.565c3.63 0 9.295 2.876 11.437 5.806l6.386 8.735c4.982 6.815 15.104 11.954 23.546 11.954h85.322c1.898 0 3.5 1.602 3.5 3.5v26.47H69.34c-11.395 0-23.27 8.423-27.035 19.178L15 191.23V67.59c0-1.898 1.603-3.5 3.5-3.5zm242.29 49.15l-40.676 116.188c-1.674 4.78-7.812 9.135-12.877 9.135H18.75c-1.447 0-2.576-.372-3.02-.997-.442-.625-.422-1.814.057-3.18l40.677-116.19c1.674-4.78 7.812-9.134 12.877-9.134h188.487c1.448 0 2.577.372 3.02.997.443.625.423 1.814-.056 3.18z"}))}function Z(){return(0,p.h)("svg",{"aria-hidden":"true",focusable:"false",style:{width:16,marginRight:4},viewBox:"0 0 58 58"},(0,p.h)("path",{d:"M36.537 28.156l-11-7a1.005 1.005 0 0 0-1.02-.033C24.2 21.3 24 21.635 24 22v14a1 1 0 0 0 1.537.844l11-7a1.002 1.002 0 0 0 0-1.688zM26 34.18V23.82L34.137 29 26 34.18z"}),(0,p.h)("path",{d:"M57 6H1a1 1 0 0 0-1 1v44a1 1 0 0 0 1 1h56a1 1 0 0 0 1-1V7a1 1 0 0 0-1-1zM10 28H2v-9h8v9zm-8 2h8v9H2v-9zm10 10V8h34v42H12V40zm44-12h-8v-9h8v9zm-8 2h8v9h-8v-9zm8-22v9h-8V8h8zM2 8h8v9H2V8zm0 42v-9h8v9H2zm54 0h-8v-9h8v9z"}))}var S=function(e){var t=e.itemIconString;if(null!==t)switch(t){case"file":return(0,p.h)(k,null);case"folder":return(0,p.h)(P,null);case"video":return(0,p.h)(Z,null);default:var n=e.alt;return(0,p.h)("img",{src:t,alt:n})}};var O=function(e){var t=e.className,n=e.isDisabled,r=e.restrictionError,i=e.isChecked,o=e.title,s=e.itemIconEl,a=e.showTitles,u=e.toggleCheckbox,l=e.recordShiftKeyPress,c=e.id,h=e.children;return(0,p.h)("li",{className:t,title:n?null==r?void 0:r.message:null},(0,p.h)("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox ".concat(i?"uppy-ProviderBrowserItem-checkbox--is-checked":""," uppy-ProviderBrowserItem-checkbox--grid"),onChange:u,onKeyDown:l,name:"listitem",id:c,checked:i,disabled:n,"data-uppy-super-focusable":!0}),(0,p.h)("label",{htmlFor:c,"aria-label":o,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},(0,p.h)("span",{className:"uppy-ProviderBrowserItem-inner-relative"},s,a&&o,h)))};var x=function(e){var t=e.className,n=e.isDisabled,r=e.restrictionError,i=e.isCheckboxDisabled,o=e.isChecked,s=e.toggleCheckbox,a=e.recordShiftKeyPress,u=e.type,l=e.id,c=e.itemIconEl,h=e.title,f=e.handleFolderClick,d=e.showTitles,v=e.i18n;return(0,p.h)("li",{className:t,title:n?null==r?void 0:r.message:null},i?null:(0,p.h)("input",{type:"checkbox",className:"uppy-u-reset uppy-ProviderBrowserItem-checkbox ".concat(o?"uppy-ProviderBrowserItem-checkbox--is-checked":""),onChange:s,onKeyDown:a,name:"listitem",id:l,checked:o,"aria-label":"file"===u?null:v("allFilesFromFolderNamed",{name:h}),disabled:n,"data-uppy-super-focusable":!0}),"file"===u?(0,p.h)("label",{htmlFor:l,className:"uppy-u-reset uppy-ProviderBrowserItem-inner"},(0,p.h)("div",{className:"uppy-ProviderBrowserItem-iconWrap"},c),d&&h):(0,p.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-ProviderBrowserItem-inner",onClick:f,"aria-label":v("openFolderNamed",{name:h})},(0,p.h)("div",{className:"uppy-ProviderBrowserItem-iconWrap"},c),d&&(0,p.h)("span",null,h)))};function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}var R=function(e){var t=e.author,n=e.getItemIcon,r=e.isChecked,i=e.isDisabled,o=e.viewType,s=n(),a=m("uppy-ProviderBrowserItem",{"uppy-ProviderBrowserItem--selected":r},{"uppy-ProviderBrowserItem--disabled":i},{"uppy-ProviderBrowserItem--noPreview":"video"===s}),u=(0,p.h)(S,{itemIconString:s});switch(o){case"grid":return(0,p.h)(O,E({},e,{className:a,itemIconEl:u}));case"list":return(0,p.h)(x,E({},e,{className:a,itemIconEl:u}));case"unsplash":return(0,p.h)(O,E({},e,{className:a,itemIconEl:u}),(0,p.h)("a",{href:"".concat(t.url,"?utm_source=Companion&utm_medium=referral"),target:"_blank",rel:"noopener noreferrer",className:"uppy-ProviderBrowserItem-author"},t.name));default:throw new Error("There is no such type ".concat(o))}};var A=function(e){var t=e.currentSelection,n=e.folders,r=e.files,i=e.uppyFiles,o=e.viewType,s=e.headerComponent,a=e.showBreadcrumbs,u=e.isChecked,l=e.toggleCheckbox,c=e.recordShiftKeyPress,h=e.handleScroll,f=e.showTitles,d=e.i18n,v=e.validateRestrictions,g=e.showFilter,k=e.filterQuery,P=e.filterInput,Z=e.getNextFolder,S=e.cancel,O=e.done,x=e.columns,E=t.length;return(0,p.h)("div",{className:m("uppy-ProviderBrowser","uppy-ProviderBrowser-viewType--".concat(o))},(0,p.h)("div",{className:"uppy-ProviderBrowser-header"},(0,p.h)("div",{className:m("uppy-ProviderBrowser-headerBar",!a&&"uppy-ProviderBrowser-headerBar--simple")},s)),g&&(0,p.h)(w,{i18n:d,filterQuery:k,filterInput:P}),n.length||r.length?(0,p.h)("div",{className:"uppy-ProviderBrowser-body"},(0,p.h)("ul",{className:"uppy-ProviderBrowser-list",onScroll:h,role:"listbox",tabIndex:"-1"},n.map((function(e){var t;return R({columns:x,showTitles:f,viewType:o,i18n:d,id:e.id,title:e.name,getItemIcon:function(){return e.icon},isChecked:u(e),toggleCheckbox:function(t){return l(t,e)},recordShiftKeyPress:c,type:"folder",isDisabled:null==(t=u(e))?void 0:t.loading,isCheckboxDisabled:"shared-with-me"===e.id,handleFolderClick:function(){return Z(e)}})})),r.map((function(e){var n=v(b(e),[].concat((0,y.Z)(i),(0,y.Z)(t)));return R({id:e.id,title:e.name,author:e.author,getItemIcon:function(){return e.icon},isChecked:u(e),toggleCheckbox:function(t){return l(t,e)},recordShiftKeyPress:c,columns:x,showTitles:f,viewType:o,i18n:d,type:"file",isDisabled:n&&!u(e),restrictionError:n})})))):(0,p.h)("div",{className:"uppy-Provider-empty"},d("noFilesFound")),E>0&&(0,p.h)(_,{selected:E,done:O,cancel:S,i18n:d}))},U=function(e){var t=e.i18n;return(0,p.h)("div",{className:"uppy-Provider-loading"},(0,p.h)("span",null,t("loading")))},F=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,s.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentWillUnmount",value:function(){(0,this.props.onUnmount)()}},{key:"render",value:function(){var e=this.props.children;return(0,p.bR)(e)[0]}}]),n}(p.wA),T=n(53700),C=n(65279),j=n(68594),I=n(37762),N=function(){function e(t){(0,s.Z)(this,e),this.plugin=t,this.filterItems=this.filterItems.bind(this),this.toggleCheckbox=this.toggleCheckbox.bind(this),this.recordShiftKeyPress=this.recordShiftKeyPress.bind(this),this.isChecked=this.isChecked.bind(this),this.loaderWrapper=this.loaderWrapper.bind(this)}return(0,a.Z)(e,[{key:"filterItems",value:function(e){var t=this.plugin.getPluginState();return t.filterInput&&""!==t.filterInput?e.filter((function(e){return-1!==e.name.toLowerCase().indexOf(t.filterInput.toLowerCase())})):e}},{key:"recordShiftKeyPress",value:function(e){this.isShiftKeyPressed=e.shiftKey}},{key:"toggleCheckbox",value:function(e,t){e.stopPropagation(),e.preventDefault(),e.currentTarget.focus();var n=this.plugin.getPluginState(),r=n.folders,i=n.files,o=this.filterItems(r.concat(i));if(this.lastCheckbox&&this.isShiftKeyPressed){var s,a=o.indexOf(this.lastCheckbox),u=o.indexOf(t),l=a<u?o.slice(a,u+1):o.slice(u,a+1),c=[],p=(0,I.Z)(l);try{for(p.s();!(s=p.n()).done;){var h=s.value,f=this.plugin.uppy,d=f.validateRestrictions(b(h),[].concat((0,y.Z)(f.getFiles()),c));d?f.info({message:d.message},"error",f.opts.infoTimeout):c.push(h)}}catch(m){p.e(m)}finally{p.f()}this.plugin.setPluginState({currentSelection:c})}else{this.lastCheckbox=t;var v=this.plugin.getPluginState().currentSelection;this.isChecked(t)?this.plugin.setPluginState({currentSelection:v.filter((function(e){return e.id!==t.id}))}):this.plugin.setPluginState({currentSelection:v.concat([t])})}}},{key:"isChecked",value:function(e){return this.plugin.getPluginState().currentSelection.some((function(t){return t.id===e.id}))}},{key:"loaderWrapper",value:function(e,t,n){var r=this;e.then((function(e){r.plugin.setPluginState({loading:!1}),t(e)})).catch((function(e){r.plugin.setPluginState({loading:!1}),n(e)})),this.plugin.setPluginState({loading:!0})}}]),e}(),L=function(){function e(t,n){(0,s.Z)(this,e),this.plugin=t,this.provider=n.provider,this.sharedHandler=new N(t),this.isHandlingScroll=!1,this.preFirstRender=this.preFirstRender.bind(this),this.handleError=this.handleError.bind(this),this.addFile=this.addFile.bind(this),this.clearSelection=this.clearSelection.bind(this),this.cancelPicking=this.cancelPicking.bind(this)}return(0,a.Z)(e,[{key:"providerFileToId",value:function(e){return(0,j.Z)({data:e,name:e.name||e.id,type:e.mimetype})}},{key:"preFirstRender",value:function(){this.plugin.setPluginState({didFirstRender:!0}),this.plugin.onFirstRender()}},{key:"shouldHandleScroll",value:function(e){var t=e.target;return t.scrollHeight-(t.scrollTop+t.offsetHeight)<50&&!this.isHandlingScroll}},{key:"clearSelection",value:function(){this.plugin.setPluginState({currentSelection:[],filterInput:""})}},{key:"cancelPicking",value:function(){this.clearSelection();var e=this.plugin.uppy.getPlugin("Dashboard");e&&e.hideAllPanels()}},{key:"handleError",value:function(e){var t=this.plugin.uppy,n=t.i18n("companionError");t.log(e.toString()),e.isAuthError||t.info({message:n,details:e.toString()},"error",5e3)}},{key:"addFile",value:function(e){var t={id:this.providerFileToId(e),source:this.plugin.id,data:e,name:e.name||e.id,type:e.mimeType,isRemote:!0,meta:{},body:{fileId:e.id},remote:{companionUrl:this.plugin.opts.companionUrl,url:"".concat(this.provider.fileUrl(e.requestPath)),body:{fileId:e.id},providerOptions:this.provider.opts,providerName:this.provider.name}},n=(0,T.Z)(t);n&&(0,C.Z)(n)&&(t.preview=e.thumbnail),e.author&&(null!=e.author.name&&(t.meta.authorName=String(e.author.name)),e.author.url&&(t.meta.authorUrl=e.author.url)),this.plugin.uppy.log("Adding remote file");try{return this.plugin.uppy.addFile(t),!0}catch(r){return r.isRestriction||this.plugin.uppy.log(r),!1}}}]),e}();function B(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var D=0;function z(e){return"__private_"+D+++"_"+e}function q(e){return"string"===typeof e?new RegExp("^".concat(e,"$")):e instanceof RegExp?e:void 0}var M=z("updateFilesAndFolders"),H=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e,r){var i;(0,s.Z)(this,n),i=t.call(this,e,r),Object.defineProperty((0,u.Z)(i),M,{value:K});return i.opts=(0,o.Z)((0,o.Z)({},{viewType:"list",showTitles:!0,showFilter:!0,showBreadcrumbs:!0}),r),i.filterQuery=i.filterQuery.bind((0,u.Z)(i)),i.getFolder=i.getFolder.bind((0,u.Z)(i)),i.getNextFolder=i.getNextFolder.bind((0,u.Z)(i)),i.logout=i.logout.bind((0,u.Z)(i)),i.handleAuth=i.handleAuth.bind((0,u.Z)(i)),i.handleScroll=i.handleScroll.bind((0,u.Z)(i)),i.listAllFiles=i.listAllFiles.bind((0,u.Z)(i)),i.donePicking=i.donePicking.bind((0,u.Z)(i)),i.render=i.render.bind((0,u.Z)(i)),i.plugin.setPluginState({authenticated:!1,files:[],folders:[],directories:[],filterInput:"",isSearchVisible:!1,currentSelection:[]}),i}return(0,a.Z)(n,[{key:"tearDown",value:function(){}},{key:"getFolder",value:function(e,t){var n=this;return this.sharedHandler.loaderWrapper(this.provider.list(e),(function(r){var i,o=n.plugin.getPluginState(),s=o.directories.findIndex((function(t){return e===t.id}));i=-1!==s?o.directories.slice(0,s+1):o.directories.concat([{id:e,title:t}]),n.username=r.username||n.username,B(n,M)[M](r,[],[]),n.plugin.setPluginState({directories:i,filterInput:""})}),this.handleError)}},{key:"getNextFolder",value:function(e){this.getFolder(e.requestPath,e.name),this.lastCheckbox=void 0}},{key:"logout",value:function(){var e=this;this.provider.logout().then((function(t){if(t.ok){if(!t.revoked){var n=e.plugin.uppy.i18n("companionUnauthorizeHint",{provider:e.plugin.title,url:t.manual_revoke_url});e.plugin.uppy.info(n,"info",7e3)}e.plugin.setPluginState({authenticated:!1,files:[],folders:[],directories:[],filterInput:""})}})).catch(this.handleError)}},{key:"filterQuery",value:function(e){var t=this.plugin.getPluginState();this.plugin.setPluginState((0,o.Z)((0,o.Z)({},t),{},{filterInput:e?e.target.value:""}))}},{key:"addFolder",value:function(e){var t=this,n=this.providerFileToId(e),r=(0,o.Z)({},this.plugin.getPluginState().selectedFolders);if(!(n in r)||!r[n].loading)return r[n]={loading:!0,files:[]},this.plugin.setPluginState({selectedFolders:(0,o.Z)({},r)}),this.listAllFiles(e.requestPath).then((function(i){var o=0;i.forEach((function(e){var n=t.providerFileToId(e);t.plugin.uppy.checkIfFileAlreadyExists(n)||o++})),o>0&&i.forEach((function(e){return t.addFile(e)}));var s,a=i.map(t.providerFileToId);r[n]={loading:!1,files:a},t.plugin.setPluginState({selectedFolders:r,filterInput:""}),s=0===o?t.plugin.uppy.i18n("folderAlreadyAdded",{folder:e.name}):i.length?t.plugin.uppy.i18n("folderAdded",{smart_count:o,folder:e.name}):t.plugin.uppy.i18n("emptyFolderAdded"),t.plugin.uppy.info(s)})).catch((function(e){var r=(0,o.Z)({},t.plugin.getPluginState().selectedFolders);delete r[n],t.plugin.setPluginState({selectedFolders:r}),t.handleError(e)}))}},{key:"handleAuth",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,i,o,s,a,u=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.provider.ensurePreAuth();case 2:t=btoa(JSON.stringify({origin:location.origin})),i="@uppy/provider-views=".concat(n.VERSION),o=this.provider.authUrl({state:t,uppyVersions:i}),s=window.open(o,"_blank"),a=function e(t){if(t.source===s){var n,r;n=t.origin,r=u.plugin.opts.companionAllowedHosts,(Array.isArray(r)?r.map(q):[q(r)]).some((function(e){return(null==e?void 0:e.test(n))||(null==e?void 0:e.test("".concat(n,"/")))}))&&t.source===s||u.plugin.uppy.log("rejecting event from ".concat(t.origin," vs allowed pattern ").concat(u.plugin.opts.companionAllowedHosts));var i="string"===typeof t.data?JSON.parse(t.data):t.data;if(i.error){u.plugin.uppy.log("auth aborted","warning");var o=u.plugin.uppy,a=o.i18n("authAborted");o.info({message:a},"warning",5e3)}else i.token?(s.close(),window.removeEventListener("message",e),u.provider.setAuthToken(i.token),u.preFirstRender()):u.plugin.uppy.log("did not receive token from auth window","error")}else u.plugin.uppy.log("rejecting event from unknown source")},window.addEventListener("message",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleScroll",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,s,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.nextPagePath||null,!this.shouldHandleScroll(t)||!n){e.next=17;break}return this.isHandlingScroll=!0,e.prev=3,e.next=6,this.provider.list(n);case 6:i=e.sent,o=this.plugin.getPluginState(),s=o.files,a=o.folders,B(this,M)[M](i,s,a),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),this.handleError(e.t0);case 14:return e.prev=14,this.isHandlingScroll=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[3,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"listAllFiles",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,s=this;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===n&&(n=null),n=n||[],e.next=4,this.provider.list(t);case 4:if((i=e.sent).items.forEach((function(e){e.isFolder?s.addFolder(e):n.push(e)})),!(o=i.nextPagePath)){e.next=9;break}return e.abrupt("return",this.listAllFiles(o,n));case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"donePicking",value:function(){var e=this,t=this.plugin.getPluginState().currentSelection.map((function(t){return t.isFolder?e.addFolder(t):e.addFile(t)}));this.sharedHandler.loaderWrapper(Promise.all(t),(function(){e.clearSelection()}),(function(){}))}},{key:"render",value:function(e,t){var n=this;void 0===t&&(t={});var r=this.plugin.getPluginState(),i=r.authenticated;r.didFirstRender||this.preFirstRender();var s=(0,o.Z)((0,o.Z)({},this.opts),t),a=this.plugin.getPluginState(),u=a.files,l=a.folders,c=a.filterInput,h=a.loading,d=a.currentSelection,y=this.sharedHandler,m=y.isChecked,g=y.toggleCheckbox,b=y.recordShiftKeyPress,w=y.filterItems,_=""!==c,k={showBreadcrumbs:s.showBreadcrumbs,getFolder:this.getFolder,directories:this.plugin.getPluginState().directories,pluginIcon:this.plugin.icon,title:this.plugin.title,logout:this.logout,username:this.username,i18n:this.plugin.uppy.i18n},P={isChecked:m,toggleCheckbox:g,recordShiftKeyPress:b,currentSelection:d,files:_?w(u):u,folders:_?w(l):l,username:this.username,getNextFolder:this.getNextFolder,getFolder:this.getFolder,filterItems:this.sharedHandler.filterItems,filterQuery:this.filterQuery,logout:this.logout,handleScroll:this.handleScroll,listAllFiles:this.listAllFiles,done:this.donePicking,cancel:this.cancelPicking,headerComponent:v(k),title:this.plugin.title,viewType:s.viewType,showTitles:s.showTitles,showFilter:s.showFilter,showBreadcrumbs:s.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n,uppyFiles:this.plugin.uppy.getFiles(),validateRestrictions:function(){var e;return(e=n.plugin.uppy).validateRestrictions.apply(e,arguments)}};return h?(0,p.h)(F,{onUnmount:this.clearSelection},(0,p.h)(U,{i18n:this.plugin.uppy.i18n})):i?(0,p.h)(F,{onUnmount:this.clearSelection},(0,p.h)(A,P)):(0,p.h)(F,{onUnmount:this.clearSelection},(0,p.h)(f,{pluginName:this.plugin.title,pluginIcon:this.plugin.icon,handleAuth:this.handleAuth,i18n:this.plugin.uppy.i18n,i18nArray:this.plugin.uppy.i18nArray}))}}]),n}(L);function K(e,t,n){this.nextPagePath=e.nextPagePath,e.items.forEach((function(e){e.isFolder?n.push(e):t.push(e)})),this.plugin.setPluginState({folders:n,files:t})}H.VERSION="3.0.2";var V=function(e){var t,n=e.i18n,r=e.search,i=function(){t.value&&r(t.value)};return(0,p.h)("div",{className:"uppy-SearchProvider"},(0,p.h)("input",{className:"uppy-u-reset uppy-c-textInput uppy-SearchProvider-input",type:"search","aria-label":n("enterTextToSearch"),placeholder:n("enterTextToSearch"),onKeyUp:function(e){13===e.keyCode&&i()},ref:function(e){t=e},"data-uppy-super-focusable":!0}),(0,p.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-SearchProvider-searchButton",type:"button",onClick:i},n("searchImages")))},W=function(e){var t=e.searchTerm,n=e.i18n,r=e.search;return(0,p.h)("div",{class:"uppy-ProviderBrowser-search"},(0,p.h)("input",{class:"uppy-u-reset uppy-ProviderBrowser-searchInput",type:"text",placeholder:n("search"),"aria-label":n("search"),value:t,onKeyUp:function(e){13===e.keyCode&&(e.stopPropagation(),e.preventDefault(),r(e.target.value))},"data-uppy-super-focusable":!0}),(0,p.h)("svg",{"aria-hidden":"true",focusable:"false",class:"uppy-c-icon uppy-ProviderBrowser-searchIcon",width:"12",height:"12",viewBox:"0 0 12 12"},(0,p.h)("path",{d:"M8.638 7.99l3.172 3.172a.492.492 0 1 1-.697.697L7.91 8.656a4.977 4.977 0 0 1-2.983.983C2.206 9.639 0 7.481 0 4.819 0 2.158 2.206 0 4.927 0c2.721 0 4.927 2.158 4.927 4.82a4.74 4.74 0 0 1-1.216 3.17zm-3.71.685c2.176 0 3.94-1.726 3.94-3.856 0-2.129-1.764-3.855-3.94-3.855C2.75.964.984 2.69.984 4.819c0 2.13 1.765 3.856 3.942 3.856z"})))};function $(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Y=0;function G(e){return"__private_"+Y+++"_"+e}var J=G("updateFilesAndInputMode"),X=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e,r){var i;(0,s.Z)(this,n),i=t.call(this,e,r),Object.defineProperty((0,u.Z)(i),J,{value:Q});return i.opts=(0,o.Z)((0,o.Z)({},{viewType:"grid",showTitles:!1,showFilter:!1,showBreadcrumbs:!1}),r),i.search=i.search.bind((0,u.Z)(i)),i.triggerSearchInput=i.triggerSearchInput.bind((0,u.Z)(i)),i.addFile=i.addFile.bind((0,u.Z)(i)),i.handleScroll=i.handleScroll.bind((0,u.Z)(i)),i.donePicking=i.donePicking.bind((0,u.Z)(i)),i.render=i.render.bind((0,u.Z)(i)),i.plugin.setPluginState({isInputMode:!0,files:[],folders:[],directories:[],filterInput:"",currentSelection:[],searchTerm:null}),i}return(0,a.Z)(n,[{key:"tearDown",value:function(){}},{key:"clearSelection",value:function(){this.plugin.setPluginState({currentSelection:[],isInputMode:!0,files:[],searchTerm:null})}},{key:"search",value:function(e){var t=this,n=this.plugin.getPluginState().searchTerm;if(!e||e!==n)return this.sharedHandler.loaderWrapper(this.provider.search(e),(function(e){$(t,J)[J](e,[])}),this.handleError)}},{key:"triggerSearchInput",value:function(){this.plugin.setPluginState({isInputMode:!0})}},{key:"handleScroll",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,o,s,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.nextPageQuery||null,!this.shouldHandleScroll(t)||!n){e.next=17;break}return this.isHandlingScroll=!0,e.prev=3,i=this.plugin.getPluginState(),o=i.files,s=i.searchTerm,e.next=7,this.provider.search(s,n);case 7:a=e.sent,$(this,J)[J](a,o),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),this.handleError(e.t0);case 14:return e.prev=14,this.isHandlingScroll=!1,e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[3,11,14,17]])})));return function(t){return e.apply(this,arguments)}}()},{key:"donePicking",value:function(){var e=this,t=this.plugin.getPluginState().currentSelection.map((function(t){return e.addFile(t)}));this.sharedHandler.loaderWrapper(Promise.all(t),(function(){e.clearSelection()}),(function(){}))}},{key:"render",value:function(e,t){var n=this;void 0===t&&(t={});var r=this.plugin.getPluginState(),i=r.didFirstRender,s=r.isInputMode,a=r.searchTerm;i||this.preFirstRender();var u=(0,o.Z)((0,o.Z)({},this.opts),t),l=this.plugin.getPluginState(),c=l.files,h=l.folders,f=l.filterInput,d=l.loading,v=l.currentSelection,y=this.sharedHandler,m=y.isChecked,g=y.toggleCheckbox,b=y.filterItems,w=""!==f,_={isChecked:m,toggleCheckbox:g,currentSelection:v,files:w?b(c):c,folders:w?b(h):h,handleScroll:this.handleScroll,done:this.donePicking,cancel:this.cancelPicking,headerComponent:W({search:this.search,i18n:this.plugin.uppy.i18n,searchTerm:a}),title:this.plugin.title,viewType:u.viewType,showTitles:u.showTitles,showFilter:u.showFilter,showBreadcrumbs:u.showBreadcrumbs,pluginIcon:this.plugin.icon,i18n:this.plugin.uppy.i18n,uppyFiles:this.plugin.uppy.getFiles(),validateRestrictions:function(){var e;return(e=n.plugin.uppy).validateRestrictions.apply(e,arguments)}};return d?(0,p.h)(F,{onUnmount:this.clearSelection},(0,p.h)(U,{i18n:this.plugin.uppy.i18n})):s?(0,p.h)(F,{onUnmount:this.clearSelection},(0,p.h)(V,{search:this.search,i18n:this.plugin.uppy.i18n})):(0,p.h)(F,{onUnmount:this.clearSelection},(0,p.h)(A,_))}}]),n}(L);function Q(e,t){this.nextPageQuery=e.nextPageQuery,e.items.forEach((function(e){t.push(e)})),this.plugin.setPluginState({isInputMode:!1,files:t,searchTerm:e.searchedFor})}X.VERSION="3.0.2"},90031:function(e,t,n){"use strict";n.d(t,{ZP:function(){return Wi}});var r={};n.r(r),n.d(r,{Decoder:function(){return Gn},Encoder:function(){return Yn},PacketType:function(){return Wn},protocol:function(){return $n}});var i=n(93433),o=n(1413),s=n(37762),a=n(29439),u=n(4942),l=n(74165),c=n(15861),p=n(15671),h=n(43144),f=n(97326),d=n(60136),v=n(29388),y=n(27974),m=n(51853);function g(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var b=0;function w(e){return"__private_"+b+++"_"+e}function _(e){return new Error("Cancelled",{cause:e})}function k(e){var t=this;if(null!=e){var n=function(){return t.abort(e.reason)};e.addEventListener("abort",n,{once:!0});var r=function(){e.removeEventListener("abort",n)};this.then(r,r)}return this}var P=w("activeRequests"),Z=w("queuedHandlers"),S=w("paused"),O=w("pauseTimer"),x=w("downLimit"),E=w("upperLimit"),R=w("rateLimitingTimer"),A=w("call"),U=w("queueNext"),F=w("next"),T=w("queue"),C=w("dequeue"),j=w("resume"),I=w("increaseLimit"),N=function(){function e(t){var n=this;(0,p.Z)(this,e),Object.defineProperty(this,C,{value:q}),Object.defineProperty(this,T,{value:z}),Object.defineProperty(this,F,{value:D}),Object.defineProperty(this,U,{value:B}),Object.defineProperty(this,A,{value:L}),Object.defineProperty(this,P,{writable:!0,value:0}),Object.defineProperty(this,Z,{writable:!0,value:[]}),Object.defineProperty(this,S,{writable:!0,value:!1}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,x,{writable:!0,value:1}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:function(){return n.resume()}}),Object.defineProperty(this,I,{writable:!0,value:function(){if(g(n,S)[S])g(n,R)[R]=setTimeout(g(n,I)[I],0);else{g(n,x)[x]=n.limit,n.limit=Math.ceil((g(n,E)[E]+g(n,x)[x])/2);for(var e=g(n,x)[x];e<=n.limit;e++)g(n,U)[U]();g(n,E)[E]-g(n,x)[x]>3?g(n,R)[R]=setTimeout(g(n,I)[I],2e3):g(n,x)[x]=Math.floor(g(n,x)[x]/2)}}}),this.limit="number"!==typeof t||0===t?1/0:t}return(0,h.Z)(e,[{key:"run",value:function(e,t){return!g(this,S)[S]&&g(this,P)[P]<this.limit?g(this,A)[A](e):g(this,T)[T](e,t)}},{key:"wrapPromiseFunction",value:function(e,t){var n=this;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var s,a=new Promise((function(r,o){s=n.run((function(){var t,n;try{n=Promise.resolve(e.apply(void 0,i))}catch(a){n=Promise.reject(a)}return n.then((function(e){t?o(t):(s.done(),r(e))}),(function(e){t?o(t):(s.done(),o(e))})),function(e){t=_(e)}}),t)}));return a.abort=function(e){s.abort(e)},a.abortOn=k,a}}},{key:"resume",value:function(){g(this,S)[S]=!1,clearTimeout(g(this,O)[O]);for(var e=0;e<this.limit;e++)g(this,U)[U]()}},{key:"pause",value:function(e){void 0===e&&(e=null),g(this,S)[S]=!0,clearTimeout(g(this,O)[O]),null!=e&&(g(this,O)[O]=setTimeout(g(this,j)[j],e))}},{key:"rateLimit",value:function(e){clearTimeout(g(this,R)[R]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(g(this,E)[E]=this.limit-1,this.limit=g(this,x)[x],g(this,R)[R]=setTimeout(g(this,I)[I],e))}},{key:"isPaused",get:function(){return g(this,S)[S]}}]),e}();function L(e){var t=this;g(this,P)[P]+=1;var n,r=!1;try{n=e()}catch(i){throw g(this,P)[P]-=1,i}return{abort:function(e){r||(r=!0,g(t,P)[P]-=1,n(e),g(t,U)[U]())},done:function(){r||(r=!0,g(t,P)[P]-=1,g(t,U)[U]())}}}function B(){var e=this;queueMicrotask((function(){return g(e,F)[F]()}))}function D(){if(!(g(this,S)[S]||g(this,P)[P]>=this.limit)&&0!==g(this,Z)[Z].length){var e=g(this,Z)[Z].shift(),t=g(this,A)[A](e.fn);e.abort=t.abort,e.done=t.done}}function z(e,t){var n=this;void 0===t&&(t={});var r={fn:e,priority:t.priority||0,abort:function(){g(n,C)[C](r)},done:function(){throw new Error("Cannot mark a queued request as done: this indicates a bug")}},i=g(this,Z)[Z].findIndex((function(e){return r.priority>e.priority}));return-1===i?g(this,Z)[Z].push(r):g(this,Z)[Z].splice(i,0,r),r}function q(e){var t=g(this,Z)[Z].indexOf(e);-1!==t&&g(this,Z)[Z].splice(t,1)}Symbol("__queue");var M=n(63798),H="function"===typeof btoa,K="function"===typeof Buffer,V=("function"===typeof TextDecoder&&new TextDecoder,"function"===typeof TextEncoder?new TextEncoder:void 0),W=Array.prototype.slice.call("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="),$=(function(e){var t={};e.forEach((function(e,n){return t[e]=n}))}(W),String.fromCharCode.bind(String)),Y=("function"===typeof Uint8Array.from&&Uint8Array.from.bind(Uint8Array),function(e){return e.replace(/=/g,"").replace(/[+\/]/g,(function(e){return"+"==e?"-":"_"}))}),G=function(e){for(var t,n,r,i,o="",s=e.length%3,a=0;a<e.length;){if((n=e.charCodeAt(a++))>255||(r=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");o+=W[(t=n<<16|r<<8|i)>>18&63]+W[t>>12&63]+W[t>>6&63]+W[63&t]}return s?o.slice(0,s-3)+"===".substring(s):o},J=H?function(e){return btoa(e)}:K?function(e){return Buffer.from(e,"binary").toString("base64")}:G,X=K?function(e){return Buffer.from(e).toString("base64")}:function(e){for(var t=[],n=0,r=e.length;n<r;n+=4096)t.push($.apply(null,e.subarray(n,n+4096)));return J(t.join(""))},Q=function(e){if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?$(192|t>>>6)+$(128|63&t):$(224|t>>>12&15)+$(128|t>>>6&63)+$(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return $(240|t>>>18&7)+$(128|t>>>12&63)+$(128|t>>>6&63)+$(128|63&t)},ee=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,te=function(e){return e.replace(ee,Q)},ne=K?function(e){return Buffer.from(e,"utf8").toString("base64")}:V?function(e){return X(V.encode(e))}:function(e){return J(te(e))},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Y(ne(e)):ne(e)},ie=re,oe=n(65915),se=n.n(oe);function ae(e){return ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ae(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ce(e,t){if(t&&("object"===ae(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function pe(e){var t="function"===typeof Map?new Map:void 0;return pe=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return he(e,arguments,ve(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),de(r,e)},pe(e)}function he(e,t,n){return he=fe()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&de(i,n.prototype),i},he.apply(null,arguments)}function fe(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function de(e,t){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},de(e,t)}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}var ye=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&de(e,t)}(o,e);var t,n,r,i=function(e){var t=fe();return function(){var n,r=ve(e);if(t){var i=ve(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ce(this,n)}}(o);function o(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(le(this,o),(t=i.call(this,e)).originalRequest=r,t.originalResponse=s,t.causingError=n,null!=n&&(e+=", caused by ".concat(n.toString())),null!=r){var a=r.getHeader("X-Request-ID")||"n/a",u=r.getMethod(),l=r.getURL(),c=s?s.getStatus():"n/a",p=s?s.getBody()||"":"n/a";e+=", originated from request (method: ".concat(u,", url: ").concat(l,", response code: ").concat(c,", response text: ").concat(p,", request id: ").concat(a,")")}return t.message=e,t}return t=o,n&&ue(t.prototype,n),r&&ue(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(pe(Error)),me=ye,ge=!1;function be(e){ge&&console.log(e)}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);s=!0);}catch(u){a=!0,i=u}finally{try{s||null==n.return||n.return()}finally{if(a)throw i}}return o}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return _e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Oe={endpoint:null,uploadUrl:null,metadata:{},fingerprint:null,uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,_onUploadUrlAvailable:null,overridePatchMethod:!1,headers:{},addRequestId:!1,onBeforeRequest:null,onAfterResponse:null,onShouldRetry:null,chunkSize:1/0,retryDelays:[0,1e3,3e3,5e3],parallelUploads:1,parallelUploadBoundaries:null,storeFingerprintForResuming:!0,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1,urlStorage:null,fileReader:null,httpStack:null},xe=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"resume"in n&&console.log("tus: The `resume` option has been removed in tus-js-client v2. Please use the URL storage API instead."),this.options=n,this.options.chunkSize=Number(this.options.chunkSize),this._urlStorage=this.options.urlStorage,this.file=t,this.url=null,this._req=null,this._fingerprint=null,this._urlStorageKey=null,this._offset=null,this._aborted=!1,this._size=null,this._source=null,this._retryAttempt=0,this._retryTimeout=null,this._offsetBeforeRetry=0,this._parallelUploads=null,this._parallelUploadUrls=null}var t,n,r;return t=e,n=[{key:"findPreviousUploads",value:function(){var e=this;return this.options.fingerprint(this.file,this.options).then((function(t){return e._urlStorage.findUploadsByFingerprint(t)}))}},{key:"resumeFromPreviousUpload",value:function(e){this.url=e.uploadUrl||null,this._parallelUploadUrls=e.parallelUploadUrls||null,this._urlStorageKey=e.urlStorageKey}},{key:"start",value:function(){var e=this,t=this.file;if(t)if(this.options.endpoint||this.options.uploadUrl||this.url){var n=this.options.retryDelays;if(null==n||"[object Array]"===Object.prototype.toString.call(n)){if(this.options.parallelUploads>1)for(var r=0,i=["uploadUrl","uploadSize","uploadLengthDeferred"];r<i.length;r++){var o=i[r];if(this.options[o])return void this._emitError(new Error("tus: cannot use the ".concat(o," option when parallelUploads is enabled")))}if(this.options.parallelUploadBoundaries){if(this.options.parallelUploads<=1)return void this._emitError(new Error("tus: cannot use the `parallelUploadBoundaries` option when `parallelUploads` is disabled"));if(this.options.parallelUploads!==this.options.parallelUploadBoundaries.length)return void this._emitError(new Error("tus: the `parallelUploadBoundaries` must have the same length as the value of `parallelUploads`"))}this.options.fingerprint(t,this.options).then((function(n){return be(null==n?"No fingerprint was calculated meaning that the upload cannot be stored in the URL storage.":"Calculated fingerprint: ".concat(n)),e._fingerprint=n,e._source?e._source:e.options.fileReader.openFile(t,e.options.chunkSize)})).then((function(t){if(e._source=t,e.options.uploadLengthDeferred)e._size=null;else if(null!=e.options.uploadSize){if(e._size=Number(e.options.uploadSize),Number.isNaN(e._size))return void e._emitError(new Error("tus: cannot convert `uploadSize` option into a number"))}else if(e._size=e._source.size,null==e._size)return void e._emitError(new Error("tus: cannot automatically derive upload's size from input. Specify it manually using the `uploadSize` option or use the `uploadLengthDeferred` option"));e.options.parallelUploads>1||null!=e._parallelUploadUrls?e._startParallelUpload():e._startSingleUpload()})).catch((function(t){e._emitError(t)}))}else this._emitError(new Error("tus: the `retryDelays` option must either be an array or null"))}else this._emitError(new Error("tus: neither an endpoint or an upload URL is provided"));else this._emitError(new Error("tus: no file or stream to upload provided"))}},{key:"_startParallelUpload",value:function(){var t,n=this,r=this._size,i=0;this._parallelUploads=[];var o=null!=this._parallelUploadUrls?this._parallelUploadUrls.length:this.options.parallelUploads,s=null!==(t=this.options.parallelUploadBoundaries)&&void 0!==t?t:function(e,t){for(var n=Math.floor(e/t),r=[],i=0;i<t;i++)r.push({start:n*i,end:n*(i+1)});return r[t-1].end=e,r}(this._source.size,o);this._parallelUploadUrls&&s.forEach((function(e,t){e.uploadUrl=n._parallelUploadUrls[t]||null})),this._parallelUploadUrls=new Array(s.length);var a,u=s.map((function(t,o){var a=0;return n._source.slice(t.start,t.end).then((function(u){var l=u.value;return new Promise((function(u,c){var p=Pe(Pe({},n.options),{},{uploadUrl:t.uploadUrl||null,storeFingerprintForResuming:!1,removeFingerprintOnSuccess:!1,parallelUploads:1,parallelUploadBoundaries:null,metadata:{},headers:Pe(Pe({},n.options.headers),{},{"Upload-Concat":"partial"}),onSuccess:u,onError:c,onProgress:function(e){i=i-a+e,a=e,n._emitProgress(i,r)},_onUploadUrlAvailable:function(){n._parallelUploadUrls[o]=h.url,n._parallelUploadUrls.filter((function(e){return Boolean(e)})).length===s.length&&n._saveUploadInUrlStorage()}}),h=new e(l,p);h.start(),n._parallelUploads.push(h)}))}))}));Promise.all(u).then((function(){(a=n._openRequest("POST",n.options.endpoint)).setHeader("Upload-Concat","final;".concat(n._parallelUploadUrls.join(" ")));var e=Ee(n.options.metadata);return""!==e&&a.setHeader("Upload-Metadata",e),n._sendRequest(a,null)})).then((function(e){if(Re(e.getStatus(),200)){var t=e.getHeader("Location");null!=t?(n.url=Te(n.options.endpoint,t),be("Created upload at ".concat(n.url)),n._emitSuccess()):n._emitHttpError(a,e,"tus: invalid or missing Location header")}else n._emitHttpError(a,e,"tus: unexpected response while creating upload")})).catch((function(e){n._emitError(e)}))}},{key:"_startSingleUpload",value:function(){return this._aborted=!1,null!=this.url?(be("Resuming upload from previous URL: ".concat(this.url)),void this._resumeUpload()):null!=this.options.uploadUrl?(be("Resuming upload from provided URL: ".concat(this.options.uploadUrl)),this.url=this.options.uploadUrl,void this._resumeUpload()):(be("Creating a new upload"),void this._createUpload())}},{key:"abort",value:function(t){var n=this;return null!=this._parallelUploads&&this._parallelUploads.forEach((function(e){e.abort(t)})),null!==this._req&&this._req.abort(),this._aborted=!0,null!=this._retryTimeout&&(clearTimeout(this._retryTimeout),this._retryTimeout=null),t&&null!=this.url?e.terminate(this.url,this.options).then((function(){return n._removeFromUrlStorage()})):Promise.resolve()}},{key:"_emitHttpError",value:function(e,t,n,r){this._emitError(new me(n,r,e,t))}},{key:"_emitError",value:function(e){var t=this;if(!this._aborted){if(null!=this.options.retryDelays&&(null!=this._offset&&this._offset>this._offsetBeforeRetry&&(this._retryAttempt=0),Fe(e,this._retryAttempt,this.options))){var n=this.options.retryDelays[this._retryAttempt++];return this._offsetBeforeRetry=this._offset,void(this._retryTimeout=setTimeout((function(){t.start()}),n))}if("function"!==typeof this.options.onError)throw e;this.options.onError(e)}}},{key:"_emitSuccess",value:function(){this.options.removeFingerprintOnSuccess&&this._removeFromUrlStorage(),"function"===typeof this.options.onSuccess&&this.options.onSuccess()}},{key:"_emitProgress",value:function(e,t){"function"===typeof this.options.onProgress&&this.options.onProgress(e,t)}},{key:"_emitChunkComplete",value:function(e,t,n){"function"===typeof this.options.onChunkComplete&&this.options.onChunkComplete(e,t,n)}},{key:"_createUpload",value:function(){var e=this;if(this.options.endpoint){var t=this._openRequest("POST",this.options.endpoint);this.options.uploadLengthDeferred?t.setHeader("Upload-Defer-Length",1):t.setHeader("Upload-Length",this._size);var n,r=Ee(this.options.metadata);""!==r&&t.setHeader("Upload-Metadata",r),this.options.uploadDataDuringCreation&&!this.options.uploadLengthDeferred?(this._offset=0,n=this._addChunkToRequest(t)):n=this._sendRequest(t,null),n.then((function(n){if(Re(n.getStatus(),200)){var r=n.getHeader("Location");if(null!=r){if(e.url=Te(e.options.endpoint,r),be("Created upload at ".concat(e.url)),"function"===typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),0===e._size)return e._emitSuccess(),void e._source.close();e._saveUploadInUrlStorage().then((function(){e.options.uploadDataDuringCreation?e._handleUploadResponse(t,n):(e._offset=0,e._performUpload())}))}else e._emitHttpError(t,n,"tus: invalid or missing Location header")}else e._emitHttpError(t,n,"tus: unexpected response while creating upload")})).catch((function(n){e._emitHttpError(t,null,"tus: failed to create upload",n)}))}else this._emitError(new Error("tus: unable to create upload because no endpoint is provided"))}},{key:"_resumeUpload",value:function(){var e=this,t=this._openRequest("HEAD",this.url);this._sendRequest(t,null).then((function(n){var r=n.getStatus();if(!Re(r,200))return 423===r?void e._emitHttpError(t,n,"tus: upload is currently locked; retry later"):(Re(r,400)&&e._removeFromUrlStorage(),e.options.endpoint?(e.url=null,void e._createUpload()):void e._emitHttpError(t,n,"tus: unable to resume upload (new upload cannot be created without an endpoint)"));var i=parseInt(n.getHeader("Upload-Offset"),10);if(Number.isNaN(i))e._emitHttpError(t,n,"tus: invalid or missing offset value");else{var o=parseInt(n.getHeader("Upload-Length"),10);!Number.isNaN(o)||e.options.uploadLengthDeferred?("function"===typeof e.options._onUploadUrlAvailable&&e.options._onUploadUrlAvailable(),e._saveUploadInUrlStorage().then((function(){if(i===o)return e._emitProgress(o,o),void e._emitSuccess();e._offset=i,e._performUpload()}))):e._emitHttpError(t,n,"tus: invalid or missing length value")}})).catch((function(n){e._emitHttpError(t,null,"tus: failed to resume upload",n)}))}},{key:"_performUpload",value:function(){var e,t=this;this._aborted||(this.options.overridePatchMethod?(e=this._openRequest("POST",this.url)).setHeader("X-HTTP-Method-Override","PATCH"):e=this._openRequest("PATCH",this.url),e.setHeader("Upload-Offset",this._offset),this._addChunkToRequest(e).then((function(n){Re(n.getStatus(),200)?t._handleUploadResponse(e,n):t._emitHttpError(e,n,"tus: unexpected response while uploading chunk")})).catch((function(n){t._aborted||t._emitHttpError(e,null,"tus: failed to upload chunk at offset ".concat(t._offset),n)})))}},{key:"_addChunkToRequest",value:function(e){var t=this,n=this._offset,r=this._offset+this.options.chunkSize;return e.setProgressHandler((function(e){t._emitProgress(n+e,t._size)})),e.setHeader("Content-Type","application/offset+octet-stream"),(r===1/0||r>this._size)&&!this.options.uploadLengthDeferred&&(r=this._size),this._source.slice(n,r).then((function(n){var r=n.value,i=n.done;return t.options.uploadLengthDeferred&&i&&(t._size=t._offset+(r&&r.size?r.size:0),e.setHeader("Upload-Length",t._size)),null===r?t._sendRequest(e):(t._emitProgress(t._offset,t._size),t._sendRequest(e,r))}))}},{key:"_handleUploadResponse",value:function(e,t){var n=parseInt(t.getHeader("Upload-Offset"),10);if(Number.isNaN(n))this._emitHttpError(e,t,"tus: invalid or missing offset value");else{if(this._emitProgress(n,this._size),this._emitChunkComplete(n-this._offset,n,this._size),this._offset=n,n===this._size)return this._emitSuccess(),void this._source.close();this._performUpload()}}},{key:"_openRequest",value:function(e,t){var n=Ae(e,t,this.options);return this._req=n,n}},{key:"_removeFromUrlStorage",value:function(){var e=this;this._urlStorageKey&&(this._urlStorage.removeUpload(this._urlStorageKey).catch((function(t){e._emitError(t)})),this._urlStorageKey=null)}},{key:"_saveUploadInUrlStorage",value:function(){var e=this;if(!this.options.storeFingerprintForResuming||!this._fingerprint||null!==this._urlStorageKey)return Promise.resolve();var t={size:this._size,metadata:this.options.metadata,creationTime:(new Date).toString()};return this._parallelUploads?t.parallelUploadUrls=this._parallelUploadUrls:t.uploadUrl=this.url,this._urlStorage.addUpload(this._fingerprint,t).then((function(t){e._urlStorageKey=t}))}},{key:"_sendRequest",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Ue(e,t,this.options)}}],r=[{key:"terminate",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Ae("DELETE",t,n);return Ue(r,null,n).then((function(e){if(204!==e.getStatus())throw new me("tus: unexpected response while terminating upload",null,r,e)})).catch((function(i){if(i instanceof me||(i=new me("tus: failed to terminate upload",i,r,null)),!Fe(i,0,n))throw i;var o=n.retryDelays[0],s=n.retryDelays.slice(1),a=Pe(Pe({},n),{},{retryDelays:s});return new Promise((function(e){return setTimeout(e,o)})).then((function(){return e.terminate(t,a)}))}))}}],n&&Se(t.prototype,n),r&&Se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ee(e){return Object.entries(e).map((function(e){var t=we(e,2),n=t[0],r=t[1];return"".concat(n," ").concat(ie(String(r)))})).join(",")}function Re(e,t){return e>=t&&e<t+100}function Ae(e,t,n){var r=n.httpStack.createRequest(e,t);r.setHeader("Tus-Resumable","1.0.0");var i=n.headers||{};if(Object.entries(i).forEach((function(e){var t=we(e,2),n=t[0],i=t[1];r.setHeader(n,i)})),n.addRequestId){var o="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));r.setHeader("X-Request-ID",o)}return r}function Ue(e,t,n){return("function"===typeof n.onBeforeRequest?Promise.resolve(n.onBeforeRequest(e)):Promise.resolve()).then((function(){return e.send(t).then((function(t){return("function"===typeof n.onAfterResponse?Promise.resolve(n.onAfterResponse(e,t)):Promise.resolve()).then((function(){return t}))}))}))}function Fe(e,t,n){if(null==n.retryDelays||t>=n.retryDelays.length||null==e.originalRequest)return!1;if(n&&"function"===typeof n.onShouldRetry)return n.onShouldRetry(e,t,n);var r=e.originalResponse?e.originalResponse.getStatus():0;return(!Re(r,400)||409===r||423===r)&&function(){var e=!0;return"undefined"!==typeof window&&"navigator"in window&&!1===window.navigator.onLine&&(e=!1),e}()}function Te(e,t){return new(se())(t,e).toString()}xe.defaultOptions=Oe;var Ce=xe;function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ie=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"listAllUploads",value:function(){return Promise.resolve([])}},{key:"findUploadsByFingerprint",value:function(e){return Promise.resolve([])}},{key:"removeUpload",value:function(e){return Promise.resolve()}},{key:"addUpload",value:function(e,t){return Promise.resolve(null)}}])&&je(t.prototype,n),r&&je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Le=!1;try{Le="localStorage"in window;var Be="tusSupport";localStorage.setItem(Be,localStorage.getItem(Be))}catch(ao){if(ao.code!==ao.SECURITY_ERR&&ao.code!==ao.QUOTA_EXCEEDED_ERR)throw ao;Le=!1}var De=Le,ze=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,n=[{key:"findAllUploads",value:function(){var e=this._findEntries("tus::");return Promise.resolve(e)}},{key:"findUploadsByFingerprint",value:function(e){var t=this._findEntries("tus::".concat(e,"::"));return Promise.resolve(t)}},{key:"removeUpload",value:function(e){return localStorage.removeItem(e),Promise.resolve()}},{key:"addUpload",value:function(e,t){var n=Math.round(1e12*Math.random()),r="tus::".concat(e,"::").concat(n);return localStorage.setItem(r,JSON.stringify(t)),Promise.resolve(r)}},{key:"_findEntries",value:function(e){for(var t=[],n=0;n<localStorage.length;n++){var r=localStorage.key(n);if(0===r.indexOf(e))try{var i=JSON.parse(localStorage.getItem(r));i.urlStorageKey=r,t.push(i)}catch(ao){}}return t}}],n&&Ne(t.prototype,n),r&&Ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function qe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t,n){return t&&Me(e.prototype,t),n&&Me(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var Ke=function(){function e(){qe(this,e)}return He(e,[{key:"createRequest",value:function(e,t){return new Ve(e,t)}},{key:"getName",value:function(){return"XHRHttpStack"}}]),e}(),Ve=function(){function e(t,n){qe(this,e),this._xhr=new XMLHttpRequest,this._xhr.open(t,n,!0),this._method=t,this._url=n,this._headers={}}return He(e,[{key:"getMethod",value:function(){return this._method}},{key:"getURL",value:function(){return this._url}},{key:"setHeader",value:function(e,t){this._xhr.setRequestHeader(e,t),this._headers[e]=t}},{key:"getHeader",value:function(e){return this._headers[e]}},{key:"setProgressHandler",value:function(e){"upload"in this._xhr&&(this._xhr.upload.onprogress=function(t){t.lengthComputable&&e(t.loaded)})}},{key:"send",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return new Promise((function(n,r){e._xhr.onload=function(){n(new We(e._xhr))},e._xhr.onerror=function(e){r(e)},e._xhr.send(t)}))}},{key:"abort",value:function(){return this._xhr.abort(),Promise.resolve()}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),We=function(){function e(t){qe(this,e),this._xhr=t}return He(e,[{key:"getStatus",value:function(){return this._xhr.status}},{key:"getHeader",value:function(e){return this._xhr.getResponseHeader(e)}},{key:"getBody",value:function(){return this._xhr.responseText}},{key:"getUnderlyingObject",value:function(){return this._xhr}}]),e}(),$e=function(){return"undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase()};var Ye=function(){return"undefined"!==typeof window&&("undefined"!==typeof window.PhoneGap||"undefined"!==typeof window.Cordova||"undefined"!==typeof window.cordova)};function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Je=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._file=t,this.size=t.size}var t,n,r;return t=e,n=[{key:"slice",value:function(e,t){if(Ye())return n=this._file.slice(e,t),new Promise((function(e,t){var r=new FileReader;r.onload=function(){var t=new Uint8Array(r.result);e({value:t})},r.onerror=function(e){t(e)},r.readAsArrayBuffer(n)}));var n,r=this._file.slice(e,t);return Promise.resolve({value:r})}},{key:"close",value:function(){}}],n&&Ge(t.prototype,n),r&&Ge(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e){return void 0===e?0:void 0!==e.size?e.size:e.length}var et=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._buffer=void 0,this._bufferOffset=0,this._reader=t,this._done=!1}var t,n,r;return t=e,n=[{key:"slice",value:function(e,t){return e<this._bufferOffset?Promise.reject(new Error("Requested data is before the reader's current offset")):this._readUntilEnoughDataOrDone(e,t)}},{key:"_readUntilEnoughDataOrDone",value:function(e,t){var n=this,r=t<=this._bufferOffset+Qe(this._buffer);if(this._done||r){var i=this._getDataFromBuffer(e,t),o=null==i&&this._done;return Promise.resolve({value:i,done:o})}return this._reader.read().then((function(r){var i=r.value;return r.done?n._done=!0:void 0===n._buffer?n._buffer=i:n._buffer=function(e,t){if(e.concat)return e.concat(t);if(e instanceof Blob)return new Blob([e,t],{type:e.type});if(e.set){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}throw new Error("Unknown data type")}(n._buffer,i),n._readUntilEnoughDataOrDone(e,t)}))}},{key:"_getDataFromBuffer",value:function(e,t){e>this._bufferOffset&&(this._buffer=this._buffer.slice(e-this._bufferOffset),this._bufferOffset=e);var n=0===Qe(this._buffer);return this._done&&n?null:this._buffer.slice(0,t-e)}},{key:"close",value:function(){this._reader.cancel&&this._reader.cancel()}}],n&&Xe(t.prototype,n),r&&Xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var nt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"openFile",value:function(e,t){return $e()&&e&&"undefined"!==typeof e.uri?(n=e.uri,new Promise((function(e,t){var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){var t=r.response;e(t)},r.onerror=function(e){t(e)},r.open("GET",n),r.send()}))).then((function(e){return new Je(e)})).catch((function(e){throw new Error("tus: cannot fetch `file.uri` as Blob, make sure the uri is correct and accessible. ".concat(e))})):"function"===typeof e.slice&&"undefined"!==typeof e.size?Promise.resolve(new Je(e)):"function"===typeof e.read?(t=Number(t),Number.isFinite(t)?Promise.resolve(new et(e,t)):Promise.reject(new Error("cannot create source for stream without a finite value for the `chunkSize` option"))):Promise.reject(new Error("source object may only be an instance of File, Blob, or Reader in this environment"));var n}}])&&tt(t.prototype,n),r&&tt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}function at(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(ao){return!1}}();return function(){var n,r=lt(e);if(t){var i=lt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(e,t){if(t&&("object"===rt(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function lt(e){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},lt(e)}function ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ct(Object(n),!0).forEach((function(t){ht(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ft=pt(pt({},Ce.defaultOptions),{},{httpStack:new Ke,fileReader:new nt,urlStorage:De?new ze:new Ie,fingerprint:function(e,t){return $e()?Promise.resolve(function(e,t){var n=e.exif?function(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}(JSON.stringify(e.exif)):"noexif";return["tus-rn",e.name||"noname",e.size||"nosize",n,t.endpoint].join("/")}(e,t)):Promise.resolve(["tus-br",e.name,e.type,e.size,e.lastModified,t.endpoint].join("-"))}}),dt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(o,e);var t,n,r,i=at(o);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return it(this,o),t=pt(pt({},ft),t),i.call(this,e,t)}return t=o,r=[{key:"terminate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=pt(pt({},ft),t),Ce.terminate(e,t)}}],(n=null)&&ot(t.prototype,n),r&&ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(Ce),vt=window,yt=vt.XMLHttpRequest,mt=vt.Blob,gt=(yt&&mt&&mt.prototype.slice,n(97657));var bt=n(33881)((function(e,t,n){var r=t.progress,i=t.bytesUploaded,o=t.bytesTotal;r&&(e.uppy.log("Upload progress: ".concat(r)),e.uppy.emit("upload-progress",n,{uploader:e,bytesUploaded:i,bytesTotal:o}))}),300,{leading:!0,trailing:!0});function wt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var _t=0;function kt(e){return"__private_"+_t+++"_"+e}var Pt=kt("emitter"),Zt=kt("events"),St=function(){function e(t){(0,p.Z)(this,e),Object.defineProperty(this,Pt,{writable:!0,value:void 0}),Object.defineProperty(this,Zt,{writable:!0,value:[]}),wt(this,Pt)[Pt]=t}return(0,h.Z)(e,[{key:"on",value:function(e,t){return wt(this,Zt)[Zt].push([e,t]),wt(this,Pt)[Pt].on(e,t)}},{key:"remove",value:function(){var e,t=(0,s.Z)(wt(this,Zt)[Zt].splice(0));try{for(t.s();!(e=t.n()).done;){var n=(0,a.Z)(e.value,2),r=n[0],i=n[1];wt(this,Pt)[Pt].off(r,i)}}catch(o){t.e(o)}finally{t.f()}}}]),e}(),Ot=n(61359);var xt=function(e){return!!e&&(0!==e.readyState&&4!==e.readyState||0===e.status)};function Et(e){return function(t,n){if("undefined"!==typeof window&&("undefined"!==typeof window.PhoneGap||"undefined"!==typeof window.Cordova||"undefined"!==typeof window.cordova)||"undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase())return ft.fingerprint(t,n);var r=["tus",e.id,n.endpoint].join("-");return Promise.resolve(r)}}function Rt(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var At=0;function Ut(e){return"__private_"+At+++"_"+e}var Ft={endpoint:"",uploadUrl:null,metadata:{},uploadSize:null,onProgress:null,onChunkComplete:null,onSuccess:null,onError:null,overridePatchMethod:!1,headers:{},addRequestId:!1,chunkSize:1/0,retryDelays:[100,1e3,3e3,5e3],parallelUploads:1,removeFingerprintOnSuccess:!1,uploadLengthDeferred:!1,uploadDataDuringCreation:!1},Tt=Ut("retryDelayIterator"),Ct=Ut("queueRequestSocketToken"),jt=Ut("requestSocketToken"),It=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e,r){var i,s,a;(0,p.Z)(this,n),i=t.call(this,e,r),Object.defineProperty((0,f.Z)(i),Tt,{writable:!0,value:void 0}),Object.defineProperty((0,f.Z)(i),Ct,{writable:!0,value:void 0}),Object.defineProperty((0,f.Z)(i),jt,{writable:!0,value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r,s,a;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.remote.providerOptions.provider?gt.zt:gt.C$,r=new n(i.uppy,t.remote.providerOptions),s=(0,o.Z)({},i.opts),t.tus&&Object.assign(s,t.tus),e.next=6,r.post(t.remote.url,(0,o.Z)((0,o.Z)({},t.remote.body),{},{endpoint:s.endpoint,uploadUrl:s.uploadUrl,protocol:"tus",size:t.data.size,headers:s.headers,metadata:t.meta}));case 6:return a=e.sent,e.abrupt("return",a.token);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),i.type="uploader",i.id=i.opts.id||"Tus",i.title="Tus";var u={useFastRemoteRetry:!0,limit:20,retryDelays:Ft.retryDelays,withCredentials:!1};if(i.opts=(0,o.Z)((0,o.Z)({},u),r),void 0===(null==r?void 0:r.allowedMetaFields)&&"metaFields"in i.opts)throw new Error("The `metaFields` option has been renamed to `allowedMetaFields`.");if("autoRetry"in r)throw new Error("The `autoRetry` option was deprecated and has been removed.");return i.requests=null!=(s=i.opts.rateLimitedQueue)?s:new N(i.opts.limit),Rt((0,f.Z)(i),Tt)[Tt]=null==(a=i.opts.retryDelays)?void 0:a.values(),i.uploaders=Object.create(null),i.uploaderEvents=Object.create(null),i.uploaderSockets=Object.create(null),i.handleResetProgress=i.handleResetProgress.bind((0,f.Z)(i)),i.handleUpload=i.handleUpload.bind((0,f.Z)(i)),Rt((0,f.Z)(i),Ct)[Ct]=i.requests.wrapPromiseFunction(Rt((0,f.Z)(i),jt)[jt],{priority:-1}),i}return(0,h.Z)(n,[{key:"handleResetProgress",value:function(){var e=(0,o.Z)({},this.uppy.getState().files);Object.keys(e).forEach((function(t){if(e[t].tus&&e[t].tus.uploadUrl){var n=(0,o.Z)({},e[t].tus);delete n.uploadUrl,e[t]=(0,o.Z)((0,o.Z)({},e[t]),{},{tus:n})}})),this.uppy.setState({files:e})}},{key:"resetUploaderReferences",value:function(e,t){if(void 0===t&&(t={}),this.uploaders[e]){var n=this.uploaders[e];n.abort(),t.abort&&n.abort(!0),this.uploaders[e]=null}this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null),this.uploaderSockets[e]&&(this.uploaderSockets[e].close(),this.uploaderSockets[e]=null)}},{key:"upload",value:function(e){var t=this,n=this;return this.resetUploaderReferences(e.id),new Promise((function(r,i){var s,a,u;t.uppy.emit("upload-started",e);var l=(0,o.Z)((0,o.Z)({},t.opts),e.tus||{});"function"===typeof l.headers&&(l.headers=l.headers(e));var c=(0,o.Z)((0,o.Z)({},Ft),l);c.fingerprint=Et(e),c.onBeforeRequest=function(n){var r;if(n.getUnderlyingObject().withCredentials=!!l.withCredentials,"function"===typeof l.onBeforeRequest&&(r=l.onBeforeRequest(n,e)),(0,y.Z)(s,"shouldBeRequeued")){if(!s.shouldBeRequeued)return Promise.reject();var i,o=new Promise((function(e){i=e}));return s=t.requests.run((function(){return e.isPaused&&s.abort(),i(),function(){}})),Promise.all([o,r])}return r},c.onError=function(n){var r;t.uppy.log(n);var o=n.originalRequest?n.originalRequest.getUnderlyingObject():null;xt(o)&&(n=new Ot.Z(n,o)),t.resetUploaderReferences(e.id),null==(r=s)||r.abort(),t.uppy.emit("upload-error",e,n),i(n)},c.onProgress=function(n,r){t.onReceiveUploadUrl(e,u.url),t.uppy.emit("upload-progress",e,{uploader:t,bytesUploaded:n,bytesTotal:r})},c.onSuccess=function(){var n={uploadURL:u.url};t.resetUploaderReferences(e.id),s.done(),t.uppy.emit("upload-success",e,n),u.url&&t.uppy.log("Download ".concat(u.file.name," from ").concat(u.url)),r(u)};var p=function(e){var n,r=null==e||null==(n=e.originalResponse)?void 0:n.getStatus();if(429===r){if(!t.requests.isPaused){var i,o=null==(i=Rt(t,Tt)[Tt])?void 0:i.next();if(null==o||o.done)return!1;t.requests.rateLimit(o.value)}}else{if(r>400&&r<500&&409!==r)return!1;"undefined"!==typeof navigator&&!1===navigator.onLine&&(t.requests.isPaused||(t.requests.pause(),window.addEventListener("online",(function(){t.requests.resume()}),{once:!0})))}return s.abort(),s={shouldBeRequeued:!0,abort:function(){this.shouldBeRequeued=!1},done:function(){throw new Error("Cannot mark a queued request as done: this indicates a bug")},fn:function(){throw new Error("Cannot run a queued request: this indicates a bug")}},!0};null!=l.onShouldRetry?c.onShouldRetry=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return l.onShouldRetry.apply(l,t.concat([p]))}:c.onShouldRetry=p;var h=function(e,t,n){(0,y.Z)(e,t)&&!(0,y.Z)(e,n)&&(e[n]=e[t])},f={};(Array.isArray(l.allowedMetaFields)?l.allowedMetaFields:Object.keys(e.meta)).forEach((function(t){f[t]=e.meta[t]})),h(f,"type","filetype"),h(f,"name","filename"),c.metadata=f,u=new dt(e.data,c),t.uploaders[e.id]=u,t.uploaderEvents[e.id]=new St(t.uppy),a=function(){return e.isPaused||u.start(),function(){}},u.findPreviousUploads().then((function(n){var r=n[0];r&&(t.uppy.log("[Tus] Resuming upload of ".concat(e.id," started at ").concat(r.creationTime)),u.resumeFromPreviousUpload(r))})),s=t.requests.run(a),t.onFileRemove(e.id,(function(n){s.abort(),t.resetUploaderReferences(e.id,{abort:!!u.url}),r("upload ".concat(n," was removed"))})),t.onPause(e.id,(function(e){s.abort(),e?u.abort():s=t.requests.run(a)})),t.onPauseAll(e.id,(function(){s.abort(),u.abort()})),t.onCancelAll(e.id,(function(t){"user"===(void 0===t?{}:t).reason&&(s.abort(),n.resetUploaderReferences(e.id,{abort:!!u.url})),r("upload ".concat(e.id," was canceled"))})),t.onResumeAll(e.id,(function(){s.abort(),e.error&&u.abort(),s=t.requests.run(a)}))})).catch((function(n){throw t.uppy.emit("upload-error",e,n),n}))}},{key:"uploadRemote",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.resetUploaderReferences(t.id),t.progress.uploadStarted&&t.isRestored||this.uppy.emit("upload-started",t),e.prev=2,!t.serverToken){e.next=5;break}return e.abrupt("return",this.connectToServerSocket(t));case 5:return e.next=7,Rt(this,Ct)[Ct](t);case 7:if(n=e.sent,this.uppy.getState().files[t.id]){e.next=10;break}return e.abrupt("return",void 0);case 10:return this.uppy.setFileState(t.id,{serverToken:n}),e.abrupt("return",this.connectToServerSocket(this.uppy.getFile(t.id)));case 14:throw e.prev=14,e.t0=e.catch(2),this.uppy.emit("upload-error",t,e.t0),e.t0;case 18:case"end":return e.stop()}}),e,this,[[2,14]])})));return function(t){return e.apply(this,arguments)}}()},{key:"connectToServerSocket",value:function(e){var t=this,n=this;return new Promise((function(r,i){var o,s=e.serverToken,a=function(e){var t=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?(?:www\.)?([^\n]+)/i.exec(e)[1],n=/^http:\/\//i.test(e)?"ws":"wss";return"".concat(n,"://").concat(t)}(e.remote.companionUrl),u=new gt.sk({target:"".concat(a,"/api/").concat(s)});t.uploaderSockets[e.id]=u,t.uploaderEvents[e.id]=new St(t.uppy),t.onFileRemove(e.id,(function(){o.abort(),u.send("cancel",{}),t.resetUploaderReferences(e.id),r("upload ".concat(e.id," was removed"))})),t.onPause(e.id,(function(e){e?(o.abort(),u.send("pause",{})):(o.abort(),o=t.requests.run((function(){return u.send("resume",{}),function(){}})))})),t.onPauseAll(e.id,(function(){o.abort(),u.send("pause",{})})),t.onCancelAll(e.id,(function(t){"user"===(void 0===t?{}:t).reason&&(o.abort(),u.send("cancel",{}),n.resetUploaderReferences(e.id)),r("upload ".concat(e.id," was canceled"))})),t.onResumeAll(e.id,(function(){o.abort(),e.error&&u.send("pause",{}),o=t.requests.run((function(){return u.send("resume",{}),function(){}}))})),t.onRetry(e.id,(function(){u.isOpen&&(u.send("pause",{}),u.send("resume",{}))})),t.onRetryAll(e.id,(function(){u.isOpen&&(u.send("pause",{}),u.send("resume",{}))})),u.on("progress",(function(n){return bt(t,n,e)})),u.on("error",(function(n){var r=n.error.message,s=Object.assign(new Error(r),{cause:n.error});t.opts.useFastRemoteRetry?u.close():(t.resetUploaderReferences(e.id),t.uppy.setFileState(e.id,{serverToken:null})),t.uppy.emit("upload-error",e,s),o.done(),i(s)})),u.on("success",(function(n){var i={uploadURL:n.url};t.uppy.emit("upload-success",e,i),t.resetUploaderReferences(e.id),o.done(),r()})),o=t.requests.run((function(){return e.isPaused&&u.send("pause",{}),function(){}}))}))}},{key:"onReceiveUploadUrl",value:function(e,t){var n=this.uppy.getFile(e.id);n&&(n.tus&&n.tus.uploadUrl===t||(this.uppy.log("[Tus] Storing upload url"),this.uppy.setFileState(n.id,{tus:(0,o.Z)((0,o.Z)({},n.tus),{},{uploadUrl:t})})))}},{key:"onFileRemove",value:function(e,t){this.uploaderEvents[e].on("file-removed",(function(n){e===n.id&&t(n.id)}))}},{key:"onPause",value:function(e,t){this.uploaderEvents[e].on("upload-pause",(function(n,r){e===n&&t(r)}))}},{key:"onRetry",value:function(e,t){this.uploaderEvents[e].on("upload-retry",(function(n){e===n&&t()}))}},{key:"onRetryAll",value:function(e,t){var n=this;this.uploaderEvents[e].on("retry-all",(function(){n.uppy.getFile(e)&&t()}))}},{key:"onPauseAll",value:function(e,t){var n=this;this.uploaderEvents[e].on("pause-all",(function(){n.uppy.getFile(e)&&t()}))}},{key:"onCancelAll",value:function(e,t){var n=this;this.uploaderEvents[e].on("cancel-all",(function(){n.uppy.getFile(e)&&t.apply(void 0,arguments)}))}},{key:"onResumeAll",value:function(e,t){var n=this;this.uploaderEvents[e].on("resume-all",(function(){n.uppy.getFile(e)&&t()}))}},{key:"uploadFiles",value:function(e){var t=this,n=e.map((function(n,r){var i=r+1,o=e.length;return"error"in n&&n.error?Promise.reject(new Error(n.error)):n.isRemote?(n.progress.uploadStarted&&n.isRestored||t.uppy.emit("upload-started",n),t.uploadRemote(n,i,o)):(n.progress.uploadStarted&&n.isRestored||t.uppy.emit("upload-started",n),t.upload(n,i,o))}));return function(e){var t=[],n=[];function r(e){t.push(e)}function i(e){n.push(e)}return Promise.all(e.map((function(e){return e.then(r,i)}))).then((function(){return{successful:t,failed:n}}))}(n)}},{key:"handleUpload",value:function(e){var t=this;if(0===e.length)return this.uppy.log("[Tus] No files to upload"),Promise.resolve();0===this.opts.limit&&this.uppy.log("[Tus] When uploading multiple files at once, consider setting the `limit` option (to `10` for example), to limit the number of concurrent uploads, which helps prevent memory and network issues: https://uppy.io/docs/tus/#limit-0","warning"),this.uppy.log("[Tus] Uploading...");var n=e.map((function(e){return t.uppy.getFile(e)}));return this.uploadFiles(n).then((function(){return null}))}},{key:"install",value:function(){this.uppy.setState({capabilities:(0,o.Z)((0,o.Z)({},this.uppy.getState().capabilities),{},{resumableUploads:!0})}),this.uppy.addUploader(this.handleUpload),this.uppy.on("reset-progress",this.handleResetProgress)}},{key:"uninstall",value:function(){this.uppy.setState({capabilities:(0,o.Z)((0,o.Z)({},this.uppy.getState().capabilities),{},{resumableUploads:!1})}),this.uppy.removeUploader(this.handleUpload)}}]),n}(M.Z);It.VERSION="3.0.5";var Nt=n(79773),Lt=n(11752),Bt=n(61120),Dt=n(98737),zt=Object.create(null);zt.open="0",zt.close="1",zt.ping="2",zt.pong="3",zt.message="4",zt.upgrade="5",zt.noop="6";var qt=Object.create(null);Object.keys(zt).forEach((function(e){qt[zt[e]]=e}));for(var Mt={type:"error",data:"parser error"},Ht="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Kt="function"===typeof ArrayBuffer,Vt=function(e,t){var n=new FileReader;return n.onload=function(){var e=n.result.split(",")[1];t("b"+e)},n.readAsDataURL(e)},Wt=function(e,t,n){var r,i=e.type,o=e.data;return Ht&&o instanceof Blob?t?n(o):Vt(o,n):Kt&&(o instanceof ArrayBuffer||(r=o,"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer))?t?n(o):Vt(new Blob([o]),n):n(zt[i]+(o||""))},$t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Yt="undefined"===typeof Uint8Array?[]:new Uint8Array(256),Gt=0;Gt<$t.length;Gt++)Yt[$t.charCodeAt(Gt)]=Gt;var Jt="function"===typeof ArrayBuffer,Xt=function(e,t){if(Jt){var n=function(e){var t,n,r,i,o,s=.75*e.length,a=e.length,u=0;"="===e[e.length-1]&&(s--,"="===e[e.length-2]&&s--);var l=new ArrayBuffer(s),c=new Uint8Array(l);for(t=0;t<a;t+=4)n=Yt[e.charCodeAt(t)],r=Yt[e.charCodeAt(t+1)],i=Yt[e.charCodeAt(t+2)],o=Yt[e.charCodeAt(t+3)],c[u++]=n<<2|r>>4,c[u++]=(15&r)<<4|i>>2,c[u++]=(3&i)<<6|63&o;return l}(e);return Qt(n,t)}return{base64:!0,data:e}},Qt=function(e,t){return"blob"===t&&e instanceof ArrayBuffer?new Blob([e]):e},en=function(e,t){if("string"!==typeof e)return{type:"message",data:Qt(e,t)};var n=e.charAt(0);return"b"===n?{type:"message",data:Xt(e.substring(1),t)}:qt[n]?e.length>1?{type:qt[n],data:e.substring(1)}:{type:qt[n]}:Mt},tn=String.fromCharCode(30);function nn(e){if(e)return function(e){for(var t in nn.prototype)e[t]=nn.prototype[t];return e}(e)}nn.prototype.on=nn.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},nn.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this},nn.prototype.off=nn.prototype.removeListener=nn.prototype.removeAllListeners=nn.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var n,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var i=0;i<r.length;i++)if((n=r[i])===t||n.fn===t){r.splice(i,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},nn.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){r=0;for(var i=(n=n.slice(0)).length;r<i;++r)n[r].apply(this,t)}return this},nn.prototype.emitReserved=nn.prototype.emit,nn.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},nn.prototype.hasListeners=function(e){return!!this.listeners(e).length};var rn="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function on(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(t,n){return e.hasOwnProperty(n)&&(t[n]=e[n]),t}),{})}var sn=setTimeout,an=clearTimeout;function un(e,t){t.useNativeTimers?(e.setTimeoutFn=sn.bind(rn),e.clearTimeoutFn=an.bind(rn)):(e.setTimeoutFn=setTimeout.bind(rn),e.clearTimeoutFn=clearTimeout.bind(rn))}var ln,cn=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e,r,i){var o;return(0,p.Z)(this,n),(o=t.call(this,e)).description=r,o.context=i,o.type="TransportError",o}return(0,h.Z)(n)}((0,Dt.Z)(Error)),pn=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e){var r;return(0,p.Z)(this,n),(r=t.call(this)).writable=!1,un((0,f.Z)(r),e),r.opts=e,r.query=e.query,r.readyState="",r.socket=e.socket,r}return(0,h.Z)(n,[{key:"onError",value:function(e,t,r){return(0,Lt.Z)((0,Bt.Z)(n.prototype),"emitReserved",this).call(this,"error",new cn(e,t,r)),this}},{key:"open",value:function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}},{key:"close",value:function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}},{key:"send",value:function(e){"open"===this.readyState&&this.write(e)}},{key:"onOpen",value:function(){this.readyState="open",this.writable=!0,(0,Lt.Z)((0,Bt.Z)(n.prototype),"emitReserved",this).call(this,"open")}},{key:"onData",value:function(e){var t=en(e,this.socket.binaryType);this.onPacket(t)}},{key:"onPacket",value:function(e){(0,Lt.Z)((0,Bt.Z)(n.prototype),"emitReserved",this).call(this,"packet",e)}},{key:"onClose",value:function(e){this.readyState="closed",(0,Lt.Z)((0,Bt.Z)(n.prototype),"emitReserved",this).call(this,"close",e)}}]),n}(nn),hn="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),fn={},dn=0,vn=0;function yn(e){var t="";do{t=hn[e%64]+t,e=Math.floor(e/64)}while(e>0);return t}function mn(){var e=yn(+new Date);return e!==ln?(dn=0,ln=e):e+"."+yn(dn++)}for(;vn<64;vn++)fn[hn[vn]]=vn;function gn(e){var t="";for(var n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function bn(e){for(var t={},n=e.split("&"),r=0,i=n.length;r<i;r++){var o=n[r].split("=");t[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return t}var wn=!1;try{wn="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(uo){}var _n=wn;function kn(e){var t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||_n))return new XMLHttpRequest}catch(ao){}if(!t)try{return new(rn[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(ao){}}function Pn(){}var Zn=null!=new kn({xdomain:!1}).responseType,Sn=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e){var r;if((0,p.Z)(this,n),(r=t.call(this,e)).polling=!1,"undefined"!==typeof location){var i="https:"===location.protocol,o=location.port;o||(o=i?"443":"80"),r.xd="undefined"!==typeof location&&e.hostname!==location.hostname||o!==e.port,r.xs=e.secure!==i}var s=e&&e.forceBase64;return r.supportsBinary=Zn&&!s,r}return(0,h.Z)(n,[{key:"name",get:function(){return"polling"}},{key:"doOpen",value:function(){this.poll()}},{key:"pause",value:function(e){var t=this;this.readyState="pausing";var n=function(){t.readyState="paused",e()};if(this.polling||!this.writable){var r=0;this.polling&&(r++,this.once("pollComplete",(function(){--r||n()}))),this.writable||(r++,this.once("drain",(function(){--r||n()})))}else n()}},{key:"poll",value:function(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}},{key:"onData",value:function(e){var t=this;(function(e,t){for(var n=e.split(tn),r=[],i=0;i<n.length;i++){var o=en(n[i],t);if(r.push(o),"error"===o.type)break}return r})(e,this.socket.binaryType).forEach((function(e){if("opening"===t.readyState&&"open"===e.type&&t.onOpen(),"close"===e.type)return t.onClose({description:"transport closed by the server"}),!1;t.onPacket(e)})),"closed"!==this.readyState&&(this.polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this.poll())}},{key:"doClose",value:function(){var e=this,t=function(){e.write([{type:"close"}])};"open"===this.readyState?t():this.once("open",t)}},{key:"write",value:function(e){var t=this;this.writable=!1,function(e,t){var n=e.length,r=new Array(n),i=0;e.forEach((function(e,o){Wt(e,!1,(function(e){r[o]=e,++i===n&&t(r.join(tn))}))}))}(e,(function(e){t.doWrite(e,(function(){t.writable=!0,t.emitReserved("drain")}))}))}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"https":"http",n="";!1!==this.opts.timestampRequests&&(e[this.opts.timestampParam]=mn()),this.supportsBinary||e.sid||(e.b64=1),this.opts.port&&("https"===t&&443!==Number(this.opts.port)||"http"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port);var r=gn(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"request",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd,xs:this.xs},this.opts),new On(this.uri(),e)}},{key:"doWrite",value:function(e,t){var n=this,r=this.request({method:"POST",data:e});r.on("success",t),r.on("error",(function(e,t){n.onError("xhr post error",e,t)}))}},{key:"doPoll",value:function(){var e=this,t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(function(t,n){e.onError("xhr poll error",t,n)})),this.pollXhr=t}}]),n}(pn),On=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e,r){var i;return(0,p.Z)(this,n),i=t.call(this),un((0,f.Z)(i),r),i.opts=r,i.method=r.method||"GET",i.uri=e,i.async=!1!==r.async,i.data=void 0!==r.data?r.data:null,i.create(),i}return(0,h.Z)(n,[{key:"create",value:function(){var e=this,t=on(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;var r=this.xhr=new kn(t);try{r.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders)for(var i in r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0),this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}catch(ao){}if("POST"===this.method)try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(ao){}try{r.setRequestHeader("Accept","*/*")}catch(ao){}"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=function(){4===r.readyState&&(200===r.status||1223===r.status?e.onLoad():e.setTimeoutFn((function(){e.onError("number"===typeof r.status?r.status:0)}),0))},r.send(this.data)}catch(ao){return void this.setTimeoutFn((function(){e.onError(ao)}),0)}"undefined"!==typeof document&&(this.index=n.requestsCount++,n.requests[this.index]=this)}},{key:"onError",value:function(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}},{key:"cleanup",value:function(e){if("undefined"!==typeof this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=Pn,e)try{this.xhr.abort()}catch(ao){}"undefined"!==typeof document&&delete n.requests[this.index],this.xhr=null}}},{key:"onLoad",value:function(){var e=this.xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}},{key:"abort",value:function(){this.cleanup()}}]),n}(nn);if(On.requestsCount=0,On.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",xn);else if("function"===typeof addEventListener){addEventListener("onpagehide"in rn?"pagehide":"unload",xn,!1)}function xn(){for(var e in On.requests)On.requests.hasOwnProperty(e)&&On.requests[e].abort()}var En="function"===typeof Promise&&"function"===typeof Promise.resolve?function(e){return Promise.resolve().then(e)}:function(e,t){return t(e,0)},Rn=rn.WebSocket||rn.MozWebSocket,An="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase(),Un=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e){var r;return(0,p.Z)(this,n),(r=t.call(this,e)).supportsBinary=!e.forceBase64,r}return(0,h.Z)(n,[{key:"name",get:function(){return"websocket"}},{key:"doOpen",value:function(){if(this.check()){var e=this.uri(),t=this.opts.protocols,n=An?{}:on(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=An?new Rn(e,t,n):t?new Rn(e,t):new Rn(e)}catch(uo){return this.emitReserved("error",uo)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}}},{key:"addEventListeners",value:function(){var e=this;this.ws.onopen=function(){e.opts.autoUnref&&e.ws._socket.unref(),e.onOpen()},this.ws.onclose=function(t){return e.onClose({description:"websocket connection closed",context:t})},this.ws.onmessage=function(t){return e.onData(t.data)},this.ws.onerror=function(t){return e.onError("websocket error",t)}}},{key:"write",value:function(e){var t=this;this.writable=!1;for(var n=function(n){var r=e[n],i=n===e.length-1;Wt(r,t.supportsBinary,(function(e){try{t.ws.send(e)}catch(ao){}i&&En((function(){t.writable=!0,t.emitReserved("drain")}),t.setTimeoutFn)}))},r=0;r<e.length;r++)n(r)}},{key:"doClose",value:function(){"undefined"!==typeof this.ws&&(this.ws.close(),this.ws=null)}},{key:"uri",value:function(){var e=this.query||{},t=this.opts.secure?"wss":"ws",n="";this.opts.port&&("wss"===t&&443!==Number(this.opts.port)||"ws"===t&&80!==Number(this.opts.port))&&(n=":"+this.opts.port),this.opts.timestampRequests&&(e[this.opts.timestampParam]=mn()),this.supportsBinary||(e.b64=1);var r=gn(e);return t+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+n+this.opts.path+(r.length?"?"+r:"")}},{key:"check",value:function(){return!!Rn}}]),n}(pn),Fn={websocket:Un,polling:Sn},Tn=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Cn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function jn(e){var t=e,n=e.indexOf("["),r=e.indexOf("]");-1!=n&&-1!=r&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));for(var i=Tn.exec(e||""),o={},s=14;s--;)o[Cn[s]]=i[s]||"";return-1!=n&&-1!=r&&(o.source=t,o.host=o.host.substring(1,o.host.length-1).replace(/;/g,":"),o.authority=o.authority.replace("[","").replace("]","").replace(/;/g,":"),o.ipv6uri=!0),o.pathNames=function(e,t){var n=/\/{2,9}/g,r=t.replace(n,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,o.path),o.queryKey=function(e,t){var n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(e,t,r){t&&(n[t]=r)})),n}(0,o.query),o}var In=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,p.Z)(this,n),r=t.call(this),e&&"object"===typeof e&&(i=e,e=null),e?(e=jn(e),i.hostname=e.host,i.secure="https"===e.protocol||"wss"===e.protocol,i.port=e.port,e.query&&(i.query=e.query)):i.host&&(i.hostname=jn(i.host).host),un((0,f.Z)(r),i),r.secure=null!=i.secure?i.secure:"undefined"!==typeof location&&"https:"===location.protocol,i.hostname&&!i.port&&(i.port=r.secure?"443":"80"),r.hostname=i.hostname||("undefined"!==typeof location?location.hostname:"localhost"),r.port=i.port||("undefined"!==typeof location&&location.port?location.port:r.secure?"443":"80"),r.transports=i.transports||["polling","websocket"],r.readyState="",r.writeBuffer=[],r.prevBufferLen=0,r.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},i),r.opts.path=r.opts.path.replace(/\/$/,"")+"/","string"===typeof r.opts.query&&(r.opts.query=bn(r.opts.query)),r.id=null,r.upgrades=null,r.pingInterval=null,r.pingTimeout=null,r.pingTimeoutTimer=null,"function"===typeof addEventListener&&(r.opts.closeOnBeforeunload&&(r.beforeunloadEventListener=function(){r.transport&&(r.transport.removeAllListeners(),r.transport.close())},addEventListener("beforeunload",r.beforeunloadEventListener,!1)),"localhost"!==r.hostname&&(r.offlineEventListener=function(){r.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",r.offlineEventListener,!1))),r.open(),r}return(0,h.Z)(n,[{key:"createTransport",value:function(e){var t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);var n=Object.assign({},this.opts.transportOptions[e],this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new Fn[e](n)}},{key:"open",value:function(){var e,t=this;if(this.opts.rememberUpgrade&&n.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((function(){t.emitReserved("error","No transports available")}),0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(ao){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}},{key:"setTransport",value:function(e){var t=this;this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(function(e){return t.onClose("transport close",e)}))}},{key:"probe",value:function(e){var t=this,r=this.createTransport(e),i=!1;n.priorWebsocketSuccess=!1;var o=function(){i||(r.send([{type:"ping",data:"probe"}]),r.once("packet",(function(e){if(!i)if("pong"===e.type&&"probe"===e.data){if(t.upgrading=!0,t.emitReserved("upgrading",r),!r)return;n.priorWebsocketSuccess="websocket"===r.name,t.transport.pause((function(){i||"closed"!==t.readyState&&(p(),t.setTransport(r),r.send([{type:"upgrade"}]),t.emitReserved("upgrade",r),r=null,t.upgrading=!1,t.flush())}))}else{var o=new Error("probe error");o.transport=r.name,t.emitReserved("upgradeError",o)}})))};function s(){i||(i=!0,p(),r.close(),r=null)}var a=function(e){var n=new Error("probe error: "+e);n.transport=r.name,s(),t.emitReserved("upgradeError",n)};function u(){a("transport closed")}function l(){a("socket closed")}function c(e){r&&e.name!==r.name&&s()}var p=function(){r.removeListener("open",o),r.removeListener("error",a),r.removeListener("close",u),t.off("close",l),t.off("upgrading",c)};r.once("open",o),r.once("error",a),r.once("close",u),this.once("close",l),this.once("upgrading",c),r.open()}},{key:"onOpen",value:function(){if(this.readyState="open",n.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause)for(var e=0,t=this.upgrades.length;e<t;e++)this.probe(this.upgrades[e])}},{key:"onPacket",value:function(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":var t=new Error("server error");t.code=e.data,this.onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}},{key:"onHandshake",value:function(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}},{key:"resetPingTimeout",value:function(){var e=this;this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((function(){e.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}},{key:"onDrain",value:function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}},{key:"flush",value:function(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){var e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}},{key:"getWritablePackets",value:function(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;for(var e,t=1,n=0;n<this.writeBuffer.length;n++){var r=this.writeBuffer[n].data;if(r&&(t+="string"===typeof(e=r)?function(e){for(var t=0,n=0,r=0,i=e.length;r<i;r++)(t=e.charCodeAt(r))<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}(e):Math.ceil(1.33*(e.byteLength||e.size))),n>0&&t>this.maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}},{key:"write",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"send",value:function(e,t,n){return this.sendPacket("message",e,t,n),this}},{key:"sendPacket",value:function(e,t,n,r){if("function"===typeof t&&(r=t,t=void 0),"function"===typeof n&&(r=n,n=null),"closing"!==this.readyState&&"closed"!==this.readyState){(n=n||{}).compress=!1!==n.compress;var i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),r&&this.once("flush",r),this.flush()}}},{key:"close",value:function(){var e=this,t=function(){e.onClose("forced close"),e.transport.close()},n=function n(){e.off("upgrade",n),e.off("upgradeError",n),t()},r=function(){e.once("upgrade",n),e.once("upgradeError",n)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(function(){e.upgrading?r():t()})):this.upgrading?r():t()),this}},{key:"onError",value:function(e){n.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}},{key:"onClose",value:function(e,t){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"===typeof removeEventListener&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this.prevBufferLen=0)}},{key:"filterUpgrades",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}]),n}(nn);In.protocol=4;In.protocol;var Nn="function"===typeof ArrayBuffer,Ln=Object.prototype.toString,Bn="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Ln.call(Blob),Dn="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Ln.call(File);function zn(e){return Nn&&(e instanceof ArrayBuffer||function(e){return"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer}(e))||Bn&&e instanceof Blob||Dn&&e instanceof File}function qn(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(var n=0,r=e.length;n<r;n++)if(qn(e[n]))return!0;return!1}if(zn(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return qn(e.toJSON(),!0);for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&qn(e[i]))return!0;return!1}function Mn(e){var t=[],n=e.data,r=e;return r.data=Hn(n,t),r.attachments=t.length,{packet:r,buffers:t}}function Hn(e,t){if(!e)return e;if(zn(e)){var n={_placeholder:!0,num:t.length};return t.push(e),n}if(Array.isArray(e)){for(var r=new Array(e.length),i=0;i<e.length;i++)r[i]=Hn(e[i],t);return r}if("object"===typeof e&&!(e instanceof Date)){var o={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(o[s]=Hn(e[s],t));return o}return e}function Kn(e,t){return e.data=Vn(e.data,t),e.attachments=void 0,e}function Vn(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(var n=0;n<e.length;n++)e[n]=Vn(e[n],t);else if("object"===typeof e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Vn(e[r],t));return e}var Wn,$n=5;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Wn||(Wn={}));var Yn=function(){function e(t){(0,p.Z)(this,e),this.replacer=t}return(0,h.Z)(e,[{key:"encode",value:function(e){return e.type!==Wn.EVENT&&e.type!==Wn.ACK||!qn(e)?[this.encodeAsString(e)]:(e.type=e.type===Wn.EVENT?Wn.BINARY_EVENT:Wn.BINARY_ACK,this.encodeAsBinary(e))}},{key:"encodeAsString",value:function(e){var t=""+e.type;return e.type!==Wn.BINARY_EVENT&&e.type!==Wn.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}},{key:"encodeAsBinary",value:function(e){var t=Mn(e),n=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(n),r}}]),e}(),Gn=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e){var r;return(0,p.Z)(this,n),(r=t.call(this)).reviver=e,r}return(0,h.Z)(n,[{key:"add",value:function(e){var t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");(t=this.decodeString(e)).type===Wn.BINARY_EVENT||t.type===Wn.BINARY_ACK?(this.reconstructor=new Jn(t),0===t.attachments&&(0,Lt.Z)((0,Bt.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t)):(0,Lt.Z)((0,Bt.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t)}else{if(!zn(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");(t=this.reconstructor.takeBinaryData(e))&&(this.reconstructor=null,(0,Lt.Z)((0,Bt.Z)(n.prototype),"emitReserved",this).call(this,"decoded",t))}}},{key:"decodeString",value:function(e){var t=0,r={type:Number(e.charAt(0))};if(void 0===Wn[r.type])throw new Error("unknown packet type "+r.type);if(r.type===Wn.BINARY_EVENT||r.type===Wn.BINARY_ACK){for(var i=t+1;"-"!==e.charAt(++t)&&t!=e.length;);var o=e.substring(i,t);if(o!=Number(o)||"-"!==e.charAt(t))throw new Error("Illegal attachments");r.attachments=Number(o)}if("/"===e.charAt(t+1)){for(var s=t+1;++t;){if(","===e.charAt(t))break;if(t===e.length)break}r.nsp=e.substring(s,t)}else r.nsp="/";var a=e.charAt(t+1);if(""!==a&&Number(a)==a){for(var u=t+1;++t;){var l=e.charAt(t);if(null==l||Number(l)!=l){--t;break}if(t===e.length)break}r.id=Number(e.substring(u,t+1))}if(e.charAt(++t)){var c=this.tryParse(e.substr(t));if(!n.isPayloadValid(r.type,c))throw new Error("invalid payload");r.data=c}return r}},{key:"tryParse",value:function(e){try{return JSON.parse(e,this.reviver)}catch(ao){return!1}}},{key:"destroy",value:function(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}],[{key:"isPayloadValid",value:function(e,t){switch(e){case Wn.CONNECT:return"object"===typeof t;case Wn.DISCONNECT:return void 0===t;case Wn.CONNECT_ERROR:return"string"===typeof t||"object"===typeof t;case Wn.EVENT:case Wn.BINARY_EVENT:return Array.isArray(t)&&t.length>0;case Wn.ACK:case Wn.BINARY_ACK:return Array.isArray(t)}}}]),n}(nn),Jn=function(){function e(t){(0,p.Z)(this,e),this.packet=t,this.buffers=[],this.reconPack=t}return(0,h.Z)(e,[{key:"takeBinaryData",value:function(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){var t=Kn(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}},{key:"finishedReconstruction",value:function(){this.reconPack=null,this.buffers=[]}}]),e}();function Xn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}var Qn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1}),er=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e,r,i){var o;return(0,p.Z)(this,n),(o=t.call(this)).connected=!1,o.receiveBuffer=[],o.sendBuffer=[],o.ids=0,o.acks={},o.flags={},o.io=e,o.nsp=r,i&&i.auth&&(o.auth=i.auth),o.io._autoConnect&&o.open(),o}return(0,h.Z)(n,[{key:"disconnected",get:function(){return!this.connected}},{key:"subEvents",value:function(){if(!this.subs){var e=this.io;this.subs=[Xn(e,"open",this.onopen.bind(this)),Xn(e,"packet",this.onpacket.bind(this)),Xn(e,"error",this.onerror.bind(this)),Xn(e,"close",this.onclose.bind(this))]}}},{key:"active",get:function(){return!!this.subs}},{key:"connect",value:function(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}},{key:"open",value:function(){return this.connect()}},{key:"send",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.unshift("message"),this.emit.apply(this,t),this}},{key:"emit",value:function(e){if(Qn.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];n.unshift(e);var i={type:Wn.EVENT,data:n,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"===typeof n[n.length-1]){var o=this.ids++,s=n.pop();this._registerAckCallback(o,s),i.id=o}var a=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable,u=this.flags.volatile&&(!a||!this.connected);return u||(this.connected?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}},{key:"_registerAckCallback",value:function(e,t){var n=this,r=this.flags.timeout;if(void 0!==r){var i=this.io.setTimeoutFn((function(){delete n.acks[e];for(var r=0;r<n.sendBuffer.length;r++)n.sendBuffer[r].id===e&&n.sendBuffer.splice(r,1);t.call(n,new Error("operation has timed out"))}),r);this.acks[e]=function(){n.io.clearTimeoutFn(i);for(var e=arguments.length,r=new Array(e),o=0;o<e;o++)r[o]=arguments[o];t.apply(n,[null].concat(r))}}else this.acks[e]=t}},{key:"packet",value:function(e){e.nsp=this.nsp,this.io._packet(e)}},{key:"onopen",value:function(){var e=this;"function"==typeof this.auth?this.auth((function(t){e.packet({type:Wn.CONNECT,data:t})})):this.packet({type:Wn.CONNECT,data:this.auth})}},{key:"onerror",value:function(e){this.connected||this.emitReserved("connect_error",e)}},{key:"onclose",value:function(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t)}},{key:"onpacket",value:function(e){if(e.nsp===this.nsp)switch(e.type){case Wn.CONNECT:if(e.data&&e.data.sid){var t=e.data.sid;this.onconnect(t)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Wn.EVENT:case Wn.BINARY_EVENT:this.onevent(e);break;case Wn.ACK:case Wn.BINARY_ACK:this.onack(e);break;case Wn.DISCONNECT:this.ondisconnect();break;case Wn.CONNECT_ERROR:this.destroy();var n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n)}}},{key:"onevent",value:function(e){var t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}},{key:"emitEvent",value:function(e){if(this._anyListeners&&this._anyListeners.length){var t,r=this._anyListeners.slice(),i=(0,s.Z)(r);try{for(i.s();!(t=i.n()).done;){t.value.apply(this,e)}}catch(uo){i.e(uo)}finally{i.f()}}(0,Lt.Z)((0,Bt.Z)(n.prototype),"emit",this).apply(this,e)}},{key:"ack",value:function(e){var t=this,n=!1;return function(){if(!n){n=!0;for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];t.packet({type:Wn.ACK,id:e,data:i})}}}},{key:"onack",value:function(e){var t=this.acks[e.id];"function"===typeof t&&(t.apply(this,e.data),delete this.acks[e.id])}},{key:"onconnect",value:function(e){this.id=e,this.connected=!0,this.emitBuffered(),this.emitReserved("connect")}},{key:"emitBuffered",value:function(){var e=this;this.receiveBuffer.forEach((function(t){return e.emitEvent(t)})),this.receiveBuffer=[],this.sendBuffer.forEach((function(t){e.notifyOutgoingListeners(t),e.packet(t)})),this.sendBuffer=[]}},{key:"ondisconnect",value:function(){this.destroy(),this.onclose("io server disconnect")}},{key:"destroy",value:function(){this.subs&&(this.subs.forEach((function(e){return e()})),this.subs=void 0),this.io._destroy(this)}},{key:"disconnect",value:function(){return this.connected&&this.packet({type:Wn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}},{key:"close",value:function(){return this.disconnect()}},{key:"compress",value:function(e){return this.flags.compress=e,this}},{key:"volatile",get:function(){return this.flags.volatile=!0,this}},{key:"timeout",value:function(e){return this.flags.timeout=e,this}},{key:"onAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}},{key:"prependAny",value:function(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}},{key:"offAny",value:function(e){if(!this._anyListeners)return this;if(e){for(var t=this._anyListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}},{key:"listenersAny",value:function(){return this._anyListeners||[]}},{key:"onAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}},{key:"prependAnyOutgoing",value:function(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}},{key:"offAnyOutgoing",value:function(e){if(!this._anyOutgoingListeners)return this;if(e){for(var t=this._anyOutgoingListeners,n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}},{key:"listenersAnyOutgoing",value:function(){return this._anyOutgoingListeners||[]}},{key:"notifyOutgoingListeners",value:function(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){var t,n=this._anyOutgoingListeners.slice(),r=(0,s.Z)(n);try{for(r.s();!(t=r.n()).done;){t.value.apply(this,e.data)}}catch(uo){r.e(uo)}finally{r.f()}}}}]),n}(nn);function tr(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}tr.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-n:e+n}return 0|Math.min(e,this.max)},tr.prototype.reset=function(){this.attempts=0},tr.prototype.setMin=function(e){this.ms=e},tr.prototype.setMax=function(e){this.max=e},tr.prototype.setJitter=function(e){this.jitter=e};var nr=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e,i){var o,s;(0,p.Z)(this,n),(o=t.call(this)).nsps={},o.subs=[],e&&"object"===typeof e&&(i=e,e=void 0),(i=i||{}).path=i.path||"/socket.io",o.opts=i,un((0,f.Z)(o),i),o.reconnection(!1!==i.reconnection),o.reconnectionAttempts(i.reconnectionAttempts||1/0),o.reconnectionDelay(i.reconnectionDelay||1e3),o.reconnectionDelayMax(i.reconnectionDelayMax||5e3),o.randomizationFactor(null!==(s=i.randomizationFactor)&&void 0!==s?s:.5),o.backoff=new tr({min:o.reconnectionDelay(),max:o.reconnectionDelayMax(),jitter:o.randomizationFactor()}),o.timeout(null==i.timeout?2e4:i.timeout),o._readyState="closed",o.uri=e;var a=i.parser||r;return o.encoder=new a.Encoder,o.decoder=new a.Decoder,o._autoConnect=!1!==i.autoConnect,o._autoConnect&&o.open(),o}return(0,h.Z)(n,[{key:"reconnection",value:function(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}},{key:"reconnectionAttempts",value:function(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}},{key:"reconnectionDelay",value:function(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}},{key:"randomizationFactor",value:function(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}},{key:"reconnectionDelayMax",value:function(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}},{key:"timeout",value:function(e){return arguments.length?(this._timeout=e,this):this._timeout}},{key:"maybeReconnectOnOpen",value:function(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}},{key:"open",value:function(e){var t=this;if(~this._readyState.indexOf("open"))return this;this.engine=new In(this.uri,this.opts);var n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;var i=Xn(n,"open",(function(){r.onopen(),e&&e()})),o=Xn(n,"error",(function(n){r.cleanup(),r._readyState="closed",t.emitReserved("error",n),e?e(n):r.maybeReconnectOnOpen()}));if(!1!==this._timeout){var s=this._timeout;0===s&&i();var a=this.setTimeoutFn((function(){i(),n.close(),n.emit("error",new Error("timeout"))}),s);this.opts.autoUnref&&a.unref(),this.subs.push((function(){clearTimeout(a)}))}return this.subs.push(i),this.subs.push(o),this}},{key:"connect",value:function(e){return this.open(e)}},{key:"onopen",value:function(){this.cleanup(),this._readyState="open",this.emitReserved("open");var e=this.engine;this.subs.push(Xn(e,"ping",this.onping.bind(this)),Xn(e,"data",this.ondata.bind(this)),Xn(e,"error",this.onerror.bind(this)),Xn(e,"close",this.onclose.bind(this)),Xn(this.decoder,"decoded",this.ondecoded.bind(this)))}},{key:"onping",value:function(){this.emitReserved("ping")}},{key:"ondata",value:function(e){try{this.decoder.add(e)}catch(ao){this.onclose("parse error",ao)}}},{key:"ondecoded",value:function(e){var t=this;En((function(){t.emitReserved("packet",e)}),this.setTimeoutFn)}},{key:"onerror",value:function(e){this.emitReserved("error",e)}},{key:"socket",value:function(e,t){var n=this.nsps[e];return n||(n=new er(this,e,t),this.nsps[e]=n),n}},{key:"_destroy",value:function(e){for(var t=0,n=Object.keys(this.nsps);t<n.length;t++){var r=n[t];if(this.nsps[r].active)return}this._close()}},{key:"_packet",value:function(e){for(var t=this.encoder.encode(e),n=0;n<t.length;n++)this.engine.write(t[n],e.options)}},{key:"cleanup",value:function(){this.subs.forEach((function(e){return e()})),this.subs.length=0,this.decoder.destroy()}},{key:"_close",value:function(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}},{key:"disconnect",value:function(){return this._close()}},{key:"onclose",value:function(e,t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}},{key:"reconnect",value:function(){var e=this;if(this._reconnecting||this.skipReconnect)return this;var t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{var n=this.backoff.duration();this._reconnecting=!0;var r=this.setTimeoutFn((function(){t.skipReconnect||(e.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((function(n){n?(t._reconnecting=!1,t.reconnect(),e.emitReserved("reconnect_error",n)):t.onreconnect()})))}),n);this.opts.autoUnref&&r.unref(),this.subs.push((function(){clearTimeout(r)}))}}},{key:"onreconnect",value:function(){var e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}]),n}(nn),rr={};function ir(e,t){"object"===typeof e&&(t=e,e=void 0);var n,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=e;n=n||"undefined"!==typeof location&&location,null==e&&(e=n.protocol+"//"+n.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?n.protocol+e:n.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof n?n.protocol+"//"+e:"https://"+e),r=jn(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";var i=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+i+":"+r.port+t,r.href=r.protocol+"://"+i+(n&&n.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),i=r.source,o=r.id,s=r.path,a=rr[o]&&s in rr[o].nsps;return t.forceNew||t["force new connection"]||!1===t.multiplex||a?n=new nr(i,t):(rr[o]||(rr[o]=new nr(i,t)),n=rr[o]),r.query&&!t.query&&(t.query=r.queryKey),n.socket(r.path,t)}Object.assign(ir,{Manager:nr,Socket:er,io:ir,connect:ir});var or=n(73411);function sr(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ar=0;function ur(e){return"__private_"+ar+++"_"+e}var lr="ASSEMBLY_EXECUTING",cr="ASSEMBLY_COMPLETED",pr=["ASSEMBLY_UPLOADING",lr,cr];function hr(e,t){return pr.indexOf(e)>=pr.indexOf(t)}var fr=ur("rateLimitedQueue"),dr=ur("fetchWithNetworkError"),vr=ur("previousFetchStatusStillPending"),yr=ur("onFinished"),mr=ur("connectSocket"),gr=ur("onError"),br=ur("beginPolling"),wr=ur("fetchStatus"),_r=ur("diffStatus");function kr(){this.emit("finished"),this.close()}function Pr(){var e=this,t=function(e){var t=/^\w+:\/\//.exec(e),n=0;t&&(n=t[0].length+1);var r=e.indexOf("/",n);return-1===r?{origin:e,pathname:"/"}:{origin:e.slice(0,r),pathname:e.slice(r)}}(this.status.websocket_url),n=ir(t.origin,{transports:["websocket"],path:t.pathname});n.on("connect",(function(){n.emit("assembly_connect",{id:e.status.assembly_id}),e.emit("connect")})),n.on("connect_error",(function(){n.disconnect(),e.socket=null})),n.on("assembly_finished",(function(){sr(e,yr)[yr]()})),n.on("assembly_upload_finished",(function(t){e.emit("upload",t),e.status.uploads.push(t)})),n.on("assembly_uploading_finished",(function(){e.emit("executing")})),n.on("assembly_upload_meta_data_extracted",(function(){e.emit("metadata"),sr(e,wr)[wr]({diff:!1})})),n.on("assembly_result_finished",(function(t,n){e.emit("result",t,n),e.status.results[t]||(e.status.results[t]=[]),e.status.results[t].push(n)})),n.on("assembly_error",(function(t){sr(e,gr)[gr](t),sr(e,wr)[wr]({diff:!1})})),this.socket=n}function Zr(e){this.emit("error",Object.assign(new Error(e.message),e)),this.close()}function Sr(){var e=this;this.pollInterval=setInterval((function(){e.socket&&e.socket.connected||sr(e,wr)[wr]()}),2e3)}function Or(e){return xr.apply(this,arguments)}function xr(){return(xr=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r,i,o;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(void 0===t?{}:t).diff,r=void 0===n||n,!(this.closed||sr(this,fr)[fr].isPaused||sr(this,vr)[vr])){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,sr(this,vr)[vr]=!0,e.next=7,sr(this,dr)[dr](this.status.assembly_ssl_url);case 7:if(i=e.sent,sr(this,vr)[vr]=!1,!this.closed){e.next=11;break}return e.abrupt("return");case 11:if(429!==i.status){e.next=14;break}return sr(this,fr)[fr].rateLimit(2e3),e.abrupt("return");case 14:if(i.ok){e.next=17;break}return sr(this,gr)[gr](new Ot.Z(i.statusText)),e.abrupt("return");case 17:return e.next=19,i.json();case 19:if(o=e.sent,!this.closed){e.next=22;break}return e.abrupt("return");case 22:this.emit("status",o),r?this.updateStatus(o):this.status=o,e.next=29;break;case 26:e.prev=26,e.t0=e.catch(3),sr(this,gr)[gr](e.t0);case 29:case"end":return e.stop()}}),e,this,[[3,26]])})))).apply(this,arguments)}function Er(e,t){var n=this,r=e.ok,i=t.ok;if(t.error&&!e.error)return sr(this,gr)[gr](t);var o=hr(i,lr)&&!hr(r,lr);o&&this.emit("executing"),Object.keys(t.uploads).filter((function(t){return!(0,y.Z)(e.uploads,t)})).forEach((function(e){n.emit("upload",t.uploads[e])})),o&&this.emit("metadata"),Object.keys(t.results).forEach((function(r){var i=t.results[r],o=e.results[r];i.filter((function(e){return!o||!o.some((function(t){return t.id===e.id}))})).forEach((function(e){n.emit("result",r,e)}))})),hr(i,cr)&&!hr(r,cr)&&this.emit("finished")}var Rr=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e,r){var i;return(0,p.Z)(this,n),i=t.call(this),Object.defineProperty((0,f.Z)(i),_r,{value:Er}),Object.defineProperty((0,f.Z)(i),wr,{value:Or}),Object.defineProperty((0,f.Z)(i),br,{value:Sr}),Object.defineProperty((0,f.Z)(i),gr,{value:Zr}),Object.defineProperty((0,f.Z)(i),mr,{value:Pr}),Object.defineProperty((0,f.Z)(i),yr,{value:kr}),Object.defineProperty((0,f.Z)(i),fr,{writable:!0,value:void 0}),Object.defineProperty((0,f.Z)(i),dr,{writable:!0,value:void 0}),Object.defineProperty((0,f.Z)(i),vr,{writable:!0,value:!1}),i.status=e,i.socket=null,i.pollInterval=null,i.closed=!1,sr((0,f.Z)(i),fr)[fr]=r,sr((0,f.Z)(i),dr)[dr]=r.wrapPromiseFunction(or.Z),i}return(0,h.Z)(n,[{key:"connect",value:function(){sr(this,mr)[mr](),sr(this,br)[br]()}},{key:"update",value:function(){return sr(this,wr)[wr]({diff:!0})}},{key:"updateStatus",value:function(e){sr(this,_r)[_r](this.status,e),this.status=e}},{key:"close",value:function(){this.closed=!0,this.socket&&(this.socket.disconnect(),this.socket=null),clearInterval(this.pollInterval),this.pollInterval=null}}]),n}(Nt);function Ar(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Ur=0;function Fr(e){return"__private_"+Ur+++"_"+e}var Tr="/assemblies",Cr=Fr("headers"),jr=Fr("fetchWithNetworkError"),Ir=Fr("fetchJSON"),Nr=Fr("reportError"),Lr=function(){function e(t){var n=this;(0,p.Z)(this,e),void 0===t&&(t={}),Object.defineProperty(this,Ir,{value:Br}),Object.defineProperty(this,Cr,{writable:!0,value:{}}),Object.defineProperty(this,jr,{writable:!0,value:void 0}),Object.defineProperty(this,Nr,{writable:!0,value:function(e,t){if(!1===n.opts.errorReporting)throw e;var r={type:t.type};throw t.assembly&&(r.assembly=t.assembly.assembly_id,r.instance=t.assembly.instance),t.url&&(r.endpoint=t.url),n.submitError(e,r).catch((function(){})),e}}),this.opts=t,null!=this.opts.client&&(Ar(this,Cr)[Cr]["Transloadit-Client"]=this.opts.client),Ar(this,jr)[jr]=this.opts.rateLimitedQueue.wrapPromiseFunction(or.Z)}return(0,h.Z)(e,[{key:"createAssembly",value:function(e){var t=this,n=e.params,r=e.fields,i=e.signature,o=e.expectedFiles,s=new FormData;s.append("params","string"===typeof n?n:JSON.stringify(n)),i&&s.append("signature",i),Object.keys(r).forEach((function(e){s.append(e,r[e])})),s.append("num_expected_upload_files",o);var a=new URL(Tr,"".concat(this.opts.service)).href;return Ar(this,Ir)[Ir](a,{method:"post",headers:Ar(this,Cr)[Cr],body:s}).catch((function(e){return Ar(t,Nr)[Nr](e,{url:a,type:"API_ERROR"})}))}},{key:"reserveFile",value:function(e,t){var n=this,r=encodeURIComponent(t.size),i="".concat(e.assembly_ssl_url,"/reserve_file?size=").concat(r);return Ar(this,Ir)[Ir](i,{method:"post",headers:Ar(this,Cr)[Cr]}).catch((function(r){return Ar(n,Nr)[Nr](r,{assembly:e,file:t,url:i,type:"API_ERROR"})}))}},{key:"addFile",value:function(e,t){var n=this;if(!t.uploadURL)return Promise.reject(new Error("File does not have an `uploadURL`."));var r=encodeURIComponent(t.size),i=encodeURIComponent(t.uploadURL),o=encodeURIComponent(t.name),s="size=".concat(r,"&filename=").concat(o,"&fieldname=").concat("file","&s3Url=").concat(i),a="".concat(e.assembly_ssl_url,"/add_file?").concat(s);return Ar(this,Ir)[Ir](a,{method:"post",headers:Ar(this,Cr)[Cr]}).catch((function(r){return Ar(n,Nr)[Nr](r,{assembly:e,file:t,url:a,type:"API_ERROR"})}))}},{key:"updateNumberOfFilesInAssembly",value:function(e,t){var n=this,r=new URL(e.assembly_ssl_url);r.pathname="/update_assemblies";var i=JSON.stringify({assembly_updates:[{assembly_id:e.assembly_id,num_expected_upload_files:t}]});return Ar(this,Ir)[Ir](r,{method:"post",headers:Ar(this,Cr)[Cr],body:i}).catch((function(e){return Ar(n,Nr)[Nr](e,{url:r,type:"API_ERROR"})}))}},{key:"cancelAssembly",value:function(e){var t=this,n=e.assembly_ssl_url;return Ar(this,Ir)[Ir](n,{method:"delete",headers:Ar(this,Cr)[Cr]}).catch((function(e){return Ar(t,Nr)[Nr](e,{url:n,type:"API_ERROR"})}))}},{key:"getAssemblyStatus",value:function(e){var t=this;return Ar(this,Ir)[Ir](e,{headers:Ar(this,Cr)[Cr]}).catch((function(n){return Ar(t,Nr)[Nr](n,{url:e,type:"STATUS_ERROR"})}))}},{key:"submitError",value:function(e,t){var n=void 0===t?{}:t,r=n.endpoint,i=n.instance,o=n.assembly,s=e.details?"".concat(e.message," (").concat(e.details,")"):e.message;return Ar(this,Ir)[Ir]("https://transloaditstatus.com/client_error",{method:"post",body:JSON.stringify({endpoint:r,instance:i,assembly_id:o,agent:"undefined"!==typeof navigator?navigator.userAgent:"",client:this.opts.client,error:s})})}}]),e}();function Br(){for(var e,t=this,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=Ar(this,jr))[jr].apply(e,r).then((function(e){var n;if(429===e.status)return t.opts.rateLimitedQueue.rateLimit(2e3),(n=Ar(t,Ir))[Ir].apply(n,r);if(!e.ok){var i=new Error(e.statusText);return i.statusCode=e.status,"".concat(r[0]).endsWith(Tr)?e.json().then((function(e){if(!e.error)throw i;var t=new Error(e.error);throw t.details=e.message,t.assembly=e,e.assembly_id&&(t.details+=" Assembly ID: ".concat(e.assembly_id)),t}),(function(e){throw e.cause=i,e})):Promise.reject(i)}return e.json()}))}function Dr(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var zr=0;function qr(e){return"__private_"+zr+++"_"+e}function Mr(e){if(null==e)throw new Error("Transloadit: The `params` option is required.");if("string"===typeof e)try{e=JSON.parse(e)}catch(uo){throw new m.Z("Transloadit: The `params` option is a malformed JSON string.",{cause:uo})}if(!e.auth||!e.auth.key)throw new Error("Transloadit: The `params.auth.key` option is required. You can find your Transloadit API key at https://transloadit.com/c/template-credentials")}function Hr(e){var t,n=Object.create(null),r=(0,s.Z)(e.filter(Boolean));try{for(r.s();!(t=r.n()).done;){var i=t.value,o=i.fileIDs,a=i.options,u=JSON.stringify(a);u in n?n[u].fileIDArrays.push(o):n[u]={options:a,fileIDArrays:[o]}}}catch(uo){r.e(uo)}finally{r.f()}return Object.values(n).map((function(e){return{options:e.options,fileIDs:e.fileIDArrays.flat(1)}}))}var Kr=qr("getAssemblyOptions"),Vr=function(){function e(t,n){(0,p.Z)(this,e),Object.defineProperty(this,Kr,{value:Wr}),this.files=t,this.opts=n}return(0,h.Z)(e,[{key:"build",value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(){var t,n,r=this;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.opts,!(this.files.length>0)){e.next=3;break}return e.abrupt("return",Promise.all(this.files.map((function(e){return Dr(r,Kr)[Kr](e)}))).then(Hr));case 3:if(!t.alwaysRunAssembly){e.next=9;break}return e.next=6,t.getAssemblyOptions(null,t);case 6:return Mr((n=e.sent).params),e.abrupt("return",[{fileIDs:this.files.map((function(e){return e.id})),options:n}]);case 9:return e.abrupt("return",[]);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Wr(e){return $r.apply(this,arguments)}function $r(){return($r=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",void 0);case 2:return n=this.opts,e.next=5,n.getAssemblyOptions(t,n);case 5:if(r=e.sent,null!=t){e.next=8;break}return e.abrupt("return",void 0);case 8:return Array.isArray(r.fields)?r.fields=Object.fromEntries(r.fields.map((function(e){return[e,t.meta[e]]}))):null==r.fields&&(r.fields={}),Mr(r.params),e.abrupt("return",{fileIDs:[t.id],options:r});case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var Yr=Vr;function Gr(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var Jr=0;function Xr(e){return"__private_"+Jr+++"_"+e}var Qr=Xr("assemblyIDs"),ei=Xr("reject"),ti=Xr("remaining"),ni=Xr("resolve"),ri=Xr("uppy"),ii=Xr("watching"),oi=Xr("onAssemblyComplete"),si=Xr("onAssemblyCancel"),ai=Xr("onAssemblyError"),ui=Xr("onImportError"),li=Xr("checkAllComplete"),ci=Xr("removeListeners"),pi=Xr("addListeners"),hi=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e,r){var i;return(0,p.Z)(this,n),i=t.call(this),Object.defineProperty((0,f.Z)(i),pi,{value:yi}),Object.defineProperty((0,f.Z)(i),ci,{value:vi}),Object.defineProperty((0,f.Z)(i),li,{value:di}),Object.defineProperty((0,f.Z)(i),ii,{value:fi}),Object.defineProperty((0,f.Z)(i),Qr,{writable:!0,value:void 0}),Object.defineProperty((0,f.Z)(i),ei,{writable:!0,value:void 0}),Object.defineProperty((0,f.Z)(i),ti,{writable:!0,value:void 0}),Object.defineProperty((0,f.Z)(i),ni,{writable:!0,value:void 0}),Object.defineProperty((0,f.Z)(i),ri,{writable:!0,value:void 0}),Object.defineProperty((0,f.Z)(i),oi,{writable:!0,value:function(e){Gr((0,f.Z)(i),ii)[ii](e.assembly_id)&&(Gr((0,f.Z)(i),ri)[ri].log("[Transloadit] AssemblyWatcher: Got Assembly finish ".concat(e.assembly_id)),i.emit("assembly-complete",e.assembly_id),Gr((0,f.Z)(i),li)[li]())}}),Object.defineProperty((0,f.Z)(i),si,{writable:!0,value:function(e){Gr((0,f.Z)(i),ii)[ii](e.assembly_id)&&Gr((0,f.Z)(i),li)[li]()}}),Object.defineProperty((0,f.Z)(i),ai,{writable:!0,value:function(e,t){Gr((0,f.Z)(i),ii)[ii](e.assembly_id)&&(Gr((0,f.Z)(i),ri)[ri].log("[Transloadit] AssemblyWatcher: Got Assembly error ".concat(e.assembly_id)),Gr((0,f.Z)(i),ri)[ri].log(t),i.emit("assembly-error",e.assembly_id,t),Gr((0,f.Z)(i),li)[li]())}}),Object.defineProperty((0,f.Z)(i),ui,{writable:!0,value:function(e,t,n){Gr((0,f.Z)(i),ii)[ii](e.assembly_id)&&Gr((0,f.Z)(i),ai)[ai](e,n)}}),Gr((0,f.Z)(i),ri)[ri]=e,Gr((0,f.Z)(i),Qr)[Qr]=r,Gr((0,f.Z)(i),ti)[ti]=r.length,i.promise=new Promise((function(e,t){Gr((0,f.Z)(i),ni)[ni]=e,Gr((0,f.Z)(i),ei)[ei]=t})),Gr((0,f.Z)(i),pi)[pi](),i}return(0,h.Z)(n)}(Nt);function fi(e){return-1!==Gr(this,Qr)[Qr].indexOf(e)}function di(){Gr(this,ti)[ti]-=1,0===Gr(this,ti)[ti]&&(Gr(this,ci)[ci](),Gr(this,ni)[ni]())}function vi(){Gr(this,ri)[ri].off("transloadit:complete",Gr(this,oi)[oi]),Gr(this,ri)[ri].off("transloadit:assembly-cancel",Gr(this,si)[si]),Gr(this,ri)[ri].off("transloadit:assembly-error",Gr(this,ai)[ai]),Gr(this,ri)[ri].off("transloadit:import-error",Gr(this,ui)[ui])}function yi(){Gr(this,ri)[ri].on("transloadit:complete",Gr(this,oi)[oi]),Gr(this,ri)[ri].on("transloadit:assembly-cancel",Gr(this,si)[si]),Gr(this,ri)[ri].on("transloadit:assembly-error",Gr(this,ai)[ai]),Gr(this,ri)[ri].on("transloadit:import-error",Gr(this,ui)[ui])}var mi=hi,gi={strings:{creatingAssembly:"Preparing upload...",creatingAssemblyFailed:"Transloadit: Could not create Assembly",encoding:"Encoding..."}};function bi(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var wi=0;function _i(e){return"__private_"+wi+++"_"+e}function ki(e,t){return{params:t.params,signature:t.signature,fields:t.fields}}var Pi=function(e){return function(t){var n=new m.Z("Failed to send error to the client",{cause:t});console.error(n,e)}},Zi=/https?:\/\/api2(?:-\w+)?\.transloadit\.com\/companion/,Si=_i("rateLimitedQueue"),Oi=_i("getClientVersion"),xi=_i("attachAssemblyMetadata"),Ei=_i("createAssembly"),Ri=_i("createAssemblyWatcher"),Ai=_i("shouldWaitAfterUpload"),Ui=_i("reserveFiles"),Fi=_i("onFileUploadURLAvailable"),Ti=_i("findFile"),Ci=_i("onFileUploadComplete"),ji=_i("onResult"),Ii=_i("onAssemblyFinished"),Ni=_i("cancelAssembly"),Li=_i("onCancelAll"),Bi=_i("getPersistentData"),Di=_i("onRestored"),zi=_i("connectAssembly"),qi=_i("prepareUpload"),Mi=_i("afterUpload"),Hi=_i("closeAssemblyIfExists"),Ki=_i("onError"),Vi=_i("onTusError"),Wi=function(e){(0,d.Z)(n,e);var t=(0,v.Z)(n);function n(e,r){var i,h;(0,p.Z)(this,n),i=t.call(this,e,r),h=(0,f.Z)(i),Object.defineProperty((0,f.Z)(i),zi,{value:so}),Object.defineProperty((0,f.Z)(i),Ni,{value:io}),Object.defineProperty((0,f.Z)(i),Ii,{value:ro}),Object.defineProperty((0,f.Z)(i),ji,{value:no}),Object.defineProperty((0,f.Z)(i),Ci,{value:to}),Object.defineProperty((0,f.Z)(i),Ti,{value:eo}),Object.defineProperty((0,f.Z)(i),Ui,{value:Qi}),Object.defineProperty((0,f.Z)(i),Ai,{value:Xi}),Object.defineProperty((0,f.Z)(i),Ri,{value:Ji}),Object.defineProperty((0,f.Z)(i),Ei,{value:Gi}),Object.defineProperty((0,f.Z)(i),xi,{value:Yi}),Object.defineProperty((0,f.Z)(i),Oi,{value:$i}),Object.defineProperty((0,f.Z)(i),Si,{writable:!0,value:void 0}),Object.defineProperty((0,f.Z)(i),Fi,{writable:!0,value:function(e){var t,n=i.uppy.getFile(e.id);if(null!=n&&null!=(t=n.transloadit)&&t.assembly){var r=i.getPluginState().assemblies[n.transloadit.assembly];i.client.addFile(r,n).catch((function(e){i.uppy.log(e),i.uppy.emit("transloadit:import-error",r,n.id,e)}))}}}),Object.defineProperty((0,f.Z)(i),Li,{writable:!0,value:function(){var e=(0,c.Z)((0,l.Z)().mark((function e(t){var n,r,i,o,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(void 0===t?{}:t).reason,e.prev=1,"user"===n){e.next=4;break}return e.abrupt("return");case 4:return r=h.getPluginState(),i=r.uploadsAssemblies,o=Object.values(i).flat(1),s=o.map((function(e){return h.getAssembly(e)})),e.next=9,Promise.all(s.map((function(e){return bi(h,Ni)[Ni](e)})));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),h.uppy.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}()}),Object.defineProperty((0,f.Z)(i),Bi,{writable:!0,value:function(e){var t=i.getPluginState(),n=t.assemblies,r=t.uploadsAssemblies;e((0,u.Z)({},i.id,{assemblies:n,uploadsAssemblies:r}))}}),Object.defineProperty((0,f.Z)(i),Di,{writable:!0,value:function(e){var t=e&&e[i.id]?e[i.id]:{},n=t.assemblies||{},r=t.uploadsAssemblies||{};if(0!==Object.keys(r).length){i.restored=Promise.resolve().then((function(){return function(e){for(var t={},n=[],o=function(){var e=(0,a.Z)(l[u],2),r=e[0],o=e[1];o.uploads.forEach((function(e){var n=bi((0,f.Z)(i),Ti)[Ti](e);t[e.id]={id:n.id,assembly:r,uploadedFile:e}}));var c=i.getPluginState();Object.keys(o.results).forEach((function(e){var t,i=(0,s.Z)(o.results[e]);try{for(i.s();!(t=i.n()).done;){var a=t.value,u=c.files[a.original_id];a.localId=u?u.id:null,n.push({id:a.id,result:a,stepName:e,assembly:r})}}catch(uo){i.e(uo)}finally{i.f()}}))},u=0,l=Object.entries(e);u<l.length;u++)o();i.setPluginState({assemblies:e,files:t,results:n,uploadsAssemblies:r})}(n),function(){var e=i.getPluginState(),t=e.assemblies,n=e.uploadsAssemblies;Object.keys(n).forEach((function(e){var t=n[e];bi((0,f.Z)(i),Ri)[Ri](t,e)})),Object.keys(t).forEach((function(e){var n=new Rr(t[e],bi((0,f.Z)(i),Si)[Si]);bi((0,f.Z)(i),zi)[zi](n)}))}(),function(){var e=i.getPluginState().assemblies;return Promise.all(Object.keys(e).map((function(e){return i.activeAssemblies[e].update()})))}()})),i.restored.then((function(){i.restored=null}))}}}),Object.defineProperty((0,f.Z)(i),qi,{writable:!0,value:function(e,t){var n=e.map((function(e){return i.uppy.getFile(e)})),r=n.filter((function(e){return!e.error&&(i.uppy.emit("preprocess-progress",e,{mode:"indeterminate",message:i.i18n("creatingAssembly")}),!0)})),s=function(){var e=(0,c.Z)((0,l.Z)().mark((function e(n){var r,o,s;return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.fileIDs,o=n.options,e.prev=1,e.next=4,bi((0,f.Z)(i),Ei)[Ei](r,t,o);case 4:if(s=e.sent,!i.opts.importFromUploadURLs){e.next=8;break}return e.next=8,bi((0,f.Z)(i),Ui)[Ui](s,r);case 8:return r.forEach((function(e){var t=i.uppy.getFile(e);i.uppy.emit("preprocess-complete",t)})),e.abrupt("return",s);case 12:throw e.prev=12,e.t0=e.catch(1),r.forEach((function(t){var n=i.uppy.getFile(t);i.uppy.emit("preprocess-complete",n),i.uppy.emit("upload-error",n,e.t0)})),e.t0;case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}(),a=i.getPluginState().uploadsAssemblies;return i.setPluginState({uploadsAssemblies:(0,o.Z)((0,o.Z)({},a),{},(0,u.Z)({},t,[]))}),new Yr(r,i.opts).build().then((function(e){return Promise.all(e.map(s))})).then((function(e){var n=e.filter(Boolean),r=n.map((function(e){return e.status.assembly_id}));return bi((0,f.Z)(i),Ri)[Ri](r,t),Promise.all(n.map((function(e){return bi((0,f.Z)(i),zi)[zi](e)})))})).catch((function(e){throw r.forEach((function(t){i.uppy.emit("preprocess-complete",t),i.uppy.emit("upload-error",t,e)})),e}))}}),Object.defineProperty((0,f.Z)(i),Mi,{writable:!0,value:function(e,t){var n=e.map((function(e){return i.uppy.getFile(e)})),r=n.filter((function(e){return!e.error})).map((function(e){return e.id})),s=i.getPluginState();if(i.restored)return i.restored.then((function(){return bi((0,f.Z)(i),Mi)[Mi](r,t)}));var a=s.uploadsAssemblies[t],u=function(){a.forEach((function(e){i.activeAssemblies[e].close(),delete i.activeAssemblies[e]}))};if(!bi((0,f.Z)(i),Ai)[Ai]()){u();var l=a.map((function(e){return i.getAssembly(e)}));return i.uppy.addResultData(t,{transloadit:l}),Promise.resolve()}return 0===a.length?(i.uppy.addResultData(t,{transloadit:[]}),Promise.resolve()):(n.filter((function(e){return!(0,y.Z)(i.completedFiles,e.id)})).forEach((function(e){i.uppy.emit("postprocess-progress",e,{mode:"indeterminate",message:i.i18n("encoding")})})),i.assemblyWatchers[t].promise.then((function(){u();var e=a.map((function(e){return i.getAssembly(e)})),n=(0,o.Z)({},i.getPluginState().uploadsAssemblies);delete n[t],i.setPluginState({uploadsAssemblies:n}),i.uppy.addResultData(t,{transloadit:e})})))}}),Object.defineProperty((0,f.Z)(i),Hi,{writable:!0,value:function(e){var t;null==(t=i.activeAssemblies[e])||t.close()}}),Object.defineProperty((0,f.Z)(i),Ki,{writable:!0,value:function(e,t){void 0===e&&(e=null);var n=h.getPluginState().uploadsAssemblies[t];null==n||n.forEach(bi(h,Hi)[Hi]),h.client.submitError(e).catch(Pi(e))}}),Object.defineProperty((0,f.Z)(i),Vi,{writable:!0,value:function(e,t){var n,r;if(bi((0,f.Z)(i),Hi)[Hi](null==e||null==(n=e.transloadit)?void 0:n.assembly),null!=t&&null!=(r=t.message)&&r.startsWith("tus: ")){var o,s,a=null==(o=t.originalRequest)||null==(s=o.getUnderlyingObject())?void 0:s.responseURL;i.client.submitError(t,{endpoint:a,type:"TUS_ERROR"}).catch(Pi(t))}}}),i.type="uploader",i.id=i.opts.id||"Transloadit",i.title="Transloadit",i.defaultLocale=gi;var d={service:"https://api2.transloadit.com",errorReporting:!0,waitForEncoding:!1,waitForMetadata:!1,alwaysRunAssembly:!1,importFromUploadURLs:!1,signature:null,params:null,fields:{},getAssemblyOptions:ki,limit:20,retryDelays:[7e3,1e4,15e3,2e4]};i.opts=(0,o.Z)((0,o.Z)({},d),r),bi((0,f.Z)(i),Si)[Si]=new N(i.opts.limit),i.i18nInit();var v=i.opts.getAssemblyOptions!==d.getAssemblyOptions;return i.opts.params?Mr(i.opts.params):v||Mr(null),i.client=new Lr({service:i.opts.service,client:bi((0,f.Z)(i),Oi)[Oi](),errorReporting:i.opts.errorReporting,rateLimitedQueue:bi((0,f.Z)(i),Si)[Si]}),i.activeAssemblies={},i.assemblyWatchers={},i.completedFiles=Object.create(null),i}return(0,h.Z)(n,[{key:"install",value:function(){this.uppy.addPreProcessor(bi(this,qi)[qi]),this.uppy.addPostProcessor(bi(this,Mi)[Mi]),this.uppy.on("error",bi(this,Ki)[Ki]),this.uppy.on("cancel-all",bi(this,Li)[Li]),this.uppy.on("upload-error",bi(this,Vi)[Vi]),this.opts.importFromUploadURLs?this.uppy.on("upload-success",bi(this,Fi)[Fi]):this.uppy.use(It,{storeFingerprintForResuming:!1,useFastRemoteRetry:!1,allowedMetaFields:["assembly_url","filename","fieldname"],limit:this.opts.limit,rateLimitedQueue:bi(this,Si)[Si],retryDelays:this.opts.retryDelays}),this.uppy.on("restore:get-data",bi(this,Bi)[Bi]),this.uppy.on("restored",bi(this,Di)[Di]),this.setPluginState({assemblies:{},uploadsAssemblies:{},files:{},results:[]});var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:(0,o.Z)((0,o.Z)({},e),{},{individualCancellation:!1})})}},{key:"uninstall",value:function(){this.uppy.removePreProcessor(bi(this,qi)[qi]),this.uppy.removePostProcessor(bi(this,Mi)[Mi]),this.uppy.off("error",bi(this,Ki)[Ki]),this.opts.importFromUploadURLs&&this.uppy.off("upload-success",bi(this,Fi)[Fi]);var e=this.uppy.getState().capabilities;this.uppy.setState({capabilities:(0,o.Z)((0,o.Z)({},e),{},{individualCancellation:!0})})}},{key:"getAssembly",value:function(e){return this.getPluginState().assemblies[e]}},{key:"getAssemblyFiles",value:function(e){return this.uppy.getFiles().filter((function(t){var n;return(null==t||null==(n=t.transloadit)?void 0:n.assembly)===e}))}}]),n}(M.Z);function $i(){var e=this,t=["uppy-core:".concat(this.uppy.constructor.VERSION),"uppy-transloadit:".concat(this.constructor.VERSION),"uppy-tus:".concat(It.VERSION)],n=function(n,r){var i=e.uppy.getPlugin(n);i&&t.push("".concat(r,":").concat(i.constructor.VERSION))};return this.opts.importFromUploadURLs&&(n("XHRUpload","uppy-xhr-upload"),n("AwsS3","uppy-aws-s3"),n("AwsS3Multipart","uppy-aws-s3-multipart")),n("Dropbox","uppy-dropbox"),n("Box","uppy-box"),n("Facebook","uppy-facebook"),n("GoogleDrive","uppy-google-drive"),n("Instagram","uppy-instagram"),n("OneDrive","uppy-onedrive"),n("Zoom","uppy-zoom"),n("Url","uppy-url"),t.join(",")}function Yi(e,t){var n=(0,o.Z)((0,o.Z)({},e.meta),{},{assembly_url:t.assembly_url,filename:e.name,fieldname:"file"}),r=(0,o.Z)((0,o.Z)({},e.tus),{},{endpoint:t.tus_url,addRequestId:!0}),i=e.remote;if(e.remote&&Zi.test(e.remote.companionUrl)){var s=t.companion_url.replace(/\/$/,""),a=e.remote.url.replace(e.remote.companionUrl,"").replace(/^\//,"");i=(0,o.Z)((0,o.Z)({},e.remote),{},{companionUrl:s,url:"".concat(s,"/").concat(a)})}var u=(0,o.Z)((0,o.Z)({},e),{},{transloadit:{assembly:t.assembly_id}});return this.opts.importFromUploadURLs||Object.assign(u,{meta:n,tus:r,remote:i}),u}function Gi(e,t,n){var r=this;return this.uppy.log("[Transloadit] Create Assembly"),this.client.createAssembly({params:n.params,fields:n.fields,expectedFiles:e.length,signature:n.signature}).then(function(){var n=(0,c.Z)((0,l.Z)().mark((function n(s){var a,c,p,h,f,d,v,y,m;return(0,l.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=r.uppy.getFiles().filter((function(t){var n=t.id;return e.includes(n)})),a.length===e.length){n.next=8;break}if(0!==a.length){n.next=6;break}return n.next=5,r.client.cancelAssembly(s);case 5:return n.abrupt("return",null);case 6:return n.next=8,r.client.updateNumberOfFilesInAssembly(s,a.length);case 8:return c=new Rr(s,bi(r,Si)[Si]),p=c.status,h=p.assembly_id,f=r.getPluginState(),d=f.assemblies,v=f.uploadsAssemblies,r.setPluginState({assemblies:(0,o.Z)((0,o.Z)({},d),{},(0,u.Z)({},h,p)),uploadsAssemblies:(0,o.Z)((0,o.Z)({},v),{},(0,u.Z)({},t,[].concat((0,i.Z)(v[t]),[h])))}),y={},a.forEach((function(e){y[e.id]=bi(r,xi)[xi](e,p)})),r.uppy.setState({files:(0,o.Z)((0,o.Z)({},r.uppy.getState().files),y)}),m=function e(t,n){if("cancel-all"===n)c.close(),r.uppy.off(e);else if(t.id in y){delete y[t.id];var i=Object.keys(y).length;0===i?(c.close(),bi(r,Ni)[Ni](s).catch((function(){})),r.uppy.off(e)):r.client.updateNumberOfFilesInAssembly(s,i).catch((function(){}))}},r.uppy.on("file-removed",m),r.uppy.emit("transloadit:assembly-created",p,e),r.uppy.log("[Transloadit] Created Assembly ".concat(h)),n.abrupt("return",c);case 21:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){var t=new m.Z("".concat(r.i18n("creatingAssemblyFailed"),": ").concat(e.message),{cause:e});throw"details"in e&&(t.details=e.details),"assembly"in e&&(t.assembly=e.assembly),t}))}function Ji(e,t){var n=this,r=new mi(this.uppy,e);r.on("assembly-complete",(function(e){n.getAssemblyFiles(e).forEach((function(e){n.completedFiles[e.id]=!0,n.uppy.emit("postprocess-complete",e)}))})),r.on("assembly-error",(function(e,t){n.getAssemblyFiles(e).forEach((function(e){n.uppy.emit("upload-error",e,t),n.uppy.emit("postprocess-complete",e)}))})),this.assemblyWatchers[t]=r}function Xi(){return this.opts.waitForEncoding||this.opts.waitForMetadata}function Qi(e,t){var n=this;return Promise.all(t.map((function(t){var r=n.uppy.getFile(t);return n.client.reserveFile(e.status,r)})))}function eo(e){for(var t=this.uppy.getFiles(),n=0;n<t.length;n++){var r=t[n];if(r.uploadURL===e.tus_upload_url)return r;if(r.tus&&r.tus.uploadUrl===e.tus_upload_url)return r;if(!e.is_tus_file&&r.name===e.name&&r.size===e.size)return r}}function to(e,t){var n=this.getPluginState(),r=bi(this,Ti)[Ti](t);r?(this.setPluginState({files:(0,o.Z)((0,o.Z)({},n.files),{},(0,u.Z)({},t.id,{assembly:e,id:r.id,uploadedFile:t}))}),this.uppy.emit("transloadit:upload",t,this.getAssembly(e))):this.uppy.log("[Transloadit] Couldn\u2019t file the file, it was likely removed in the process")}function no(e,t,n){var r=this.getPluginState(),o=r.files[n.original_id];n.localId=o?o.id:null;var s={result:n,stepName:t,id:n.id,assembly:e};this.setPluginState({results:[].concat((0,i.Z)(r.results),[s])}),this.uppy.emit("transloadit:result",t,n,this.getAssembly(e))}function ro(e){var t=this,n=e.assembly_ssl_url;this.client.getAssemblyStatus(n).then((function(e){var n=e.assembly_id,r=t.getPluginState();t.setPluginState({assemblies:(0,o.Z)((0,o.Z)({},r.assemblies),{},(0,u.Z)({},n,e))}),t.uppy.emit("transloadit:complete",e)}))}function io(e){return oo.apply(this,arguments)}function oo(){return(oo=(0,c.Z)((0,l.Z)().mark((function e(t){return(0,l.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.client.cancelAssembly(t);case 2:this.uppy.emit("transloadit:assembly-cancelled",t);case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function so(e){var t=this,n=e.status.assembly_id;return this.activeAssemblies[n]=e,e.on("status",(function(e){var r=t.getPluginState().assemblies;t.setPluginState({assemblies:(0,o.Z)((0,o.Z)({},r),{},(0,u.Z)({},n,e))})})),e.on("upload",(function(e){bi(t,Ci)[Ci](n,e)})),e.on("error",(function(n){n.assembly=e.status,t.uppy.emit("transloadit:assembly-error",e.status,n)})),e.on("executing",(function(){t.uppy.emit("transloadit:assembly-executing",e.status)})),this.opts.waitForEncoding&&e.on("result",(function(e,r){bi(t,ji)[ji](n,e,r)})),this.opts.waitForEncoding?e.on("finished",(function(){bi(t,Ii)[Ii](e.status)})):this.opts.waitForMetadata&&e.on("metadata",(function(){bi(t,Ii)[Ii](e.status)})),"ASSEMBLY_COMPLETE"===e.ok||e.connect(),e}Wi.VERSION="3.0.2",Wi.COMPANION="https://api2.transloadit.com/companion",Wi.COMPANION_PATTERN=/\.transloadit\.com$/},53841:function(e,t,n){"use strict";n.d(t,{Z:function(){return E}});var r=n(74165),i=n(15861),o=n(1413),s=n(15671),a=n(43144),u=n(97326),l=n(60136),c=n(29388),p=n(58620),h=n(50732),f=n(97657),d=n(66483);function v(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var y=0;function m(e){return"__private_"+y+++"_"+e}var g=m("handleKeyPress"),b=m("handleSubmit"),w=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,s.Z)(this,n),e=t.apply(this,arguments),Object.defineProperty((0,u.Z)(e),g,{writable:!0,value:function(t){13===t.keyCode&&v((0,u.Z)(e),b)[b]()}}),Object.defineProperty((0,u.Z)(e),b,{writable:!0,value:function(){(0,e.props.addFile)(e.input.value.trim())}}),e}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.input.value=""}},{key:"render",value:function(){var e=this,t=this.props.i18n;return(0,p.h)("div",{className:"uppy-Url"},(0,p.h)("input",{className:"uppy-u-reset uppy-c-textInput uppy-Url-input",type:"text","aria-label":t("enterUrlToImport"),placeholder:t("enterUrlToImport"),onKeyUp:v(this,g)[g],ref:function(t){e.input=t},"data-uppy-super-focusable":!0}),(0,p.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Url-importButton",type:"button",onClick:v(this,b)[b]},t("import")))}}]),n}(p.wA),_=w;function k(e,t,n){var r,i=(0,d.Z)(e.items);switch(t){case"paste":if(i.some((function(e){return"file"===e.kind})))return;r=i.filter((function(e){return"string"===e.kind&&"text/plain"===e.type}));break;case"drop":r=i.filter((function(e){return"string"===e.kind&&"text/uri-list"===e.type}));break;default:throw new Error("isDropOrPaste must be either 'drop' or 'paste', but it's ".concat(t))}r.forEach((function(e){e.getAsString((function(e){return n(e)}))}))}var P={strings:{import:"Import",enterUrlToImport:"Enter URL to import a file",failedToFetch:"Companion failed to fetch this URL, please make sure it\u2019s correct",enterCorrectUrl:"Incorrect URL: Please make sure you are entering a direct link to a file"}};function Z(){return(0,p.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,p.h)("g",{fill:"none",fillRule:"evenodd"},(0,p.h)("rect",{className:"uppy-ProviderIconBg",fill:"#FF753E",width:"32",height:"32",rx:"16"}),(0,p.h)("path",{d:"M22.788 15.389l-2.199 2.19a3.184 3.184 0 0 1-.513.437c-.806.584-1.686.876-2.638.876a4.378 4.378 0 0 1-3.519-1.752c-.22-.292-.146-.802.147-1.021.293-.22.806-.146 1.026.146.953 1.313 2.785 1.532 4.105.583a.571.571 0 0 0 .293-.292l2.199-2.189c1.1-1.167 1.1-2.992-.073-4.086a2.976 2.976 0 0 0-4.105 0l-1.246 1.24a.71.71 0 0 1-1.026 0 .703.703 0 0 1 0-1.022l1.246-1.24a4.305 4.305 0 0 1 6.083 0c1.833 1.605 1.906 4.451.22 6.13zm-7.183 5.035l-1.246 1.24a2.976 2.976 0 0 1-4.105 0c-1.172-1.094-1.172-2.991-.073-4.086l2.2-2.19.292-.291c.66-.438 1.393-.657 2.2-.584.805.146 1.465.51 1.905 1.168.22.292.733.365 1.026.146.293-.22.367-.73.147-1.022-.733-.949-1.76-1.532-2.859-1.678-1.1-.22-2.272.073-3.225.802l-.44.438-2.199 2.19c-1.686 1.75-1.612 4.524.074 6.202.88.803 1.979 1.241 3.078 1.241 1.1 0 2.199-.438 3.079-1.24l1.246-1.241a.703.703 0 0 0 0-1.022c-.294-.292-.807-.365-1.1-.073z",fill:"#FFF",fillRule:"nonzero"})))}function S(e){return/^[a-z0-9]+:\/\//.test(e)?e:"http://"+e}function O(e){if(!e)return!1;var t=e.match(/^([a-z0-9]+):\/\//)[1];return"http"===t||"https"===t}function x(e){var t=new URL(e).pathname;return t.substring(t.lastIndexOf("/")+1)}var E=function(e){(0,l.Z)(n,e);var t=(0,c.Z)(n);function n(e,r){var i;(0,s.Z)(this,n),(i=t.call(this,e,r)).id=i.opts.id||"Url",i.title=i.opts.title||"Link",i.type="acquirer",i.icon=function(){return(0,p.h)(Z,null)},i.defaultLocale=P;if(i.opts=(0,o.Z)((0,o.Z)({},{}),r),i.i18nInit(),i.hostname=i.opts.companionUrl,!i.hostname)throw new Error("Companion hostname is required, please consult https://uppy.io/docs/companion");return i.getMeta=i.getMeta.bind((0,u.Z)(i)),i.addFile=i.addFile.bind((0,u.Z)(i)),i.handleRootDrop=i.handleRootDrop.bind((0,u.Z)(i)),i.handleRootPaste=i.handleRootPaste.bind((0,u.Z)(i)),i.client=new f.C$(e,{companionUrl:i.opts.companionUrl,companionHeaders:i.opts.companionHeaders,companionCookiesRule:i.opts.companionCookiesRule}),i}return(0,a.Z)(n,[{key:"getMeta",value:function(e){var t=this;return this.client.post("url/meta",{url:e}).then((function(e){if(e.error)throw t.uppy.log("[URL] Error:"),t.uppy.log(e.error),new Error("Failed to fetch the file");return e}))}},{key:"addFile",value:function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t,n){var i,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===n&&(n=void 0),O(i=S(t))){e.next=6;break}return this.uppy.log("[URL] Incorrect URL entered: ".concat(i)),this.uppy.info(this.i18n("enterCorrectUrl"),"error",4e3),e.abrupt("return",void 0);case 6:return e.prev=6,e.next=9,this.getMeta(i);case 9:return o=e.sent,s={meta:n,source:this.id,name:x(i),type:o.type,data:{size:o.size},isRemote:!0,body:{url:i},remote:{companionUrl:this.opts.companionUrl,url:"".concat(this.hostname,"/url/get"),body:{fileId:i,url:i},providerOptions:this.client.opts}},this.uppy.log("[Url] Adding remote file"),e.prev=12,e.abrupt("return",this.uppy.addFile(s));case 16:return e.prev=16,e.t0=e.catch(12),e.t0.isRestriction||this.uppy.log(e.t0),e.abrupt("return",e.t0);case 20:e.next=27;break;case 22:return e.prev=22,e.t1=e.catch(6),this.uppy.log(e.t1),this.uppy.info({message:this.i18n("failedToFetch"),details:e.t1},"error",4e3),e.abrupt("return",e.t1);case 27:case"end":return e.stop()}}),e,this,[[6,22],[12,16]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"handleRootDrop",value:function(e){var t=this;k(e.dataTransfer,"drop",(function(e){t.uppy.log("[URL] Adding file from dropped url: ".concat(e)),t.addFile(e)}))}},{key:"handleRootPaste",value:function(e){var t=this;k(e.clipboardData,"paste",(function(e){t.uppy.log("[URL] Adding file from pasted url: ".concat(e)),t.addFile(e)}))}},{key:"render",value:function(){return(0,p.h)(_,{i18n:this.i18n,addFile:this.addFile})}},{key:"install",value:function(){var e=this.opts.target;e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.unmount()}}]),n}(h.di);E.VERSION="3.1.0",E.prototype.canHandleRootDrop=function(e){return(0,d.Z)(e.dataTransfer.items).filter((function(e){return"string"===e.kind&&"text/uri-list"===e.type})).length>0}},51853:function(e,t,n){"use strict";var r=n(43144),i=n(15671),o=n(60136),s=n(29388),a=n(98737),u=n(27974),l=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,r){var o;return(0,i.Z)(this,n),void 0===r&&(r={}),(o=t.call(this,e)).cause=r.cause,o.cause&&(0,u.Z)(o.cause,"isNetworkError")&&(o.isNetworkError=o.cause.isNetworkError),o}return(0,r.Z)(n)}((0,a.Z)(Error));t.Z=l},61359:function(e,t,n){"use strict";var r=n(43144),i=n(15671),o=n(60136),s=n(29388),a=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,r){var o;return(0,i.Z)(this,n),void 0===r&&(r=null),(o=t.call(this,"This looks like a network error, the endpoint might be blocked by an internet provider or a firewall.")).cause=e,o.isNetworkError=!0,o.request=r,o}return(0,r.Z)(n)}((0,n(98737).Z)(Error));t.Z=a},11885:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var r=n(1413),i=n(15671),o=n(43144),s=n(27974);function a(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var u=0;function l(e){return"__private_"+u+++"_"+e}function c(e,t,n){var r=[];return e.forEach((function(e){return"string"!==typeof e?r.push(e):t[Symbol.split](e).forEach((function(e,t,i){""!==e&&r.push(e),t<i.length-1&&r.push(n)}))})),r}function p(e,t){var n=/\$/g,r=[e];if(null==t)return r;for(var i=0,o=Object.keys(t);i<o.length;i++){var s=o[i];if("_"!==s){var a=t[s];"string"===typeof a&&(a=n[Symbol.replace](a,"$$$$")),r=c(r,new RegExp("%\\{".concat(s,"\\}"),"g"),a)}}return r}var h=l("apply"),f=function(){function e(t){(0,i.Z)(this,e),Object.defineProperty(this,h,{value:d}),this.locale={strings:{},pluralize:function(e){return 1===e?0:1}},Array.isArray(t)?t.forEach(a(this,h)[h],this):a(this,h)[h](t)}return(0,o.Z)(e,[{key:"translate",value:function(e,t){return this.translateArray(e,t).join("")}},{key:"translateArray",value:function(e,t){if(!(0,s.Z)(this.locale.strings,e))throw new Error("missing string: ".concat(e));var n=this.locale.strings[e];if("object"===typeof n){if(t&&"undefined"!==typeof t.smart_count)return p(n[this.locale.pluralize(t.smart_count)],t);throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}return p(n,t)}}]),e}();function d(e){if(null!=e&&e.strings){var t=this.locale;this.locale=(0,r.Z)((0,r.Z)({},t),{},{strings:(0,r.Z)((0,r.Z)({},t.strings),e.strings)}),this.locale.pluralize=e.pluralize||t.pluralize}}},73411:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(61359);function i(){return fetch.apply(void 0,arguments).catch((function(e){throw"AbortError"===e.name?e:new r.Z(e)}))}},68594:function(e,t,n){"use strict";function r(e){var t="";return e.replace(/[^A-Z0-9]/gi,(function(e){return t+="-".concat(function(e){return e.charCodeAt(0).toString(32)}(e)),"/"}))+t}function i(e){var t="uppy";return"string"===typeof e.name&&(t+="-".concat(r(e.name.toLowerCase()))),void 0!==e.type&&(t+="-".concat(e.type)),e.meta&&"string"===typeof e.meta.relativePath&&(t+="-".concat(r(e.meta.relativePath.toLowerCase()))),void 0!==e.data.size&&(t+="-".concat(e.data.size)),void 0!==e.data.lastModified&&(t+="-".concat(e.data.lastModified)),t}n.d(t,{Z:function(){return i}})},13377:function(e,t,n){"use strict";function r(e){var t=e.lastIndexOf(".");return-1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}}n.d(t,{Z:function(){return r}})},53700:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(13377),i=n(75611);function o(e){var t;if(e.type)return e.type;var n=e.name?null==(t=(0,r.Z)(e.name).extension)?void 0:t.toLowerCase():null;return n&&n in i.Z?i.Z[n]:"application/octet-stream"}},4692:function(e,t){"use strict";t.Z=function(e){for(var t;e&&!e.dir;)e=e.parentNode;return null==(t=e)?void 0:t.dir}},27974:function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.d(t,{Z:function(){return r}})},8165:function(e,t,n){"use strict";function r(e){return(null==e?void 0:e.nodeType)===Node.ELEMENT_NODE}n.d(t,{Z:function(){return r}})},65279:function(e,t,n){"use strict";function r(e){return!!e&&/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(e)}n.d(t,{Z:function(){return r}})},75611:function(e,t){"use strict";t.Z={md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"}},66483:function(e,t){"use strict";t.Z=Array.from}}]);
//# sourceMappingURL=5298.5d7410bc.chunk.js.map