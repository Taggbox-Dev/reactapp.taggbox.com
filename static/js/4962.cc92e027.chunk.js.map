{"version":3,"file":"static/js/4962.cc92e027.chunk.js","mappings":"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","sources":["Layouts/Main/MyAssets/EditMediaModal/EditMediaModal.js"],"sourcesContent":["import React, { Component } from 'react';\nimport AWS from 'aws-sdk'\nimport { connect } from \"react-redux\";\nimport { v4 as uuidv4 } from 'uuid';\nimport { Modal } from 'react-bootstrap';\nimport FilerobotImageEditor, { TABS, TOOLS, } from 'react-filerobot-image-editor';\nimport { postPostUpdateAction } from '../../../../Services/Actions/assetsActions'\nimport { uppyKey, uppyBucket, uppyAwsKey, uppyAwsSecret, REGION } from '../../../../Services/Utils/config'\nimport { dataURItoBlob } from '../../../../Services/Utils/utils';\nconst S3_BUCKET = uppyBucket;\n\n\nAWS.config.update({\n    accessKeyId: uppyAwsKey,\n    secretAccessKey: uppyAwsSecret\n})\n\nconst myBucket = new AWS.S3({\n    robot: \"/wasabi/store\",\n    params: { Bucket: S3_BUCKET },\n    region: REGION,\n    endpoint: 'https://s3.us-west-1.wasabisys.com',\n})\nclass EditMediaModal extends Component {\n    state = { newImage: null }\n    handleClose = () => {\n        this.props.editMediaCallback(false)\n    };\n\n    onSaveData = (editedImageObject, designState) => {\n        var self = this;\n        if (editedImageObject.imageBase64 && Object.keys(editedImageObject).length > 0) {\n            var myFile = dataURItoBlob(editedImageObject.imageBase64);\n            var newFileName = `onsiteupload/images/${uuidv4()}.${editedImageObject.extension}`\n            const params = {\n                ACL: 'public-read',\n                Body: myFile,\n                Bucket: S3_BUCKET,\n                ContentType: 'image/png',\n                ContentEncoding: 'base64',\n                Key: newFileName\n            };\n            myBucket.upload(params)\n                .on('httpUploadProgress', (evt) => {\n                    if (Math.round((evt.loaded / evt.total) * 100) == 100) {\n                        self.setState({ newImage: `https://cloud.tagbox.com/${newFileName}` }, () => self.onClickToPostEditIMage())\n                    }\n\n                })\n                .send((err) => {\n\n                })\n        }\n\n    }\n    onClickToPostEditIMage = () => {\n        const { modalAssetData } = this.props;\n        const { newImage } = this.state;\n        const data = {\n            \"action\": \"4\",\n            \"source\": modalAssetData.collection,\n            \"destination\": String(modalAssetData.collection),\n            \"postId\": String(modalAssetData.id),\n            \"postFile\": newImage ? newImage : modalAssetData.postFile,\n            \"tags\": modalAssetData.tags,\n            \"content\": modalAssetData.content\n        }\n        this.props.postPostUpdateAction(data, () => {\n            this.props.editMediaCallback(false)\n        })\n\n    }\n    render() {\n        const { editMediaModal, modalAssetData, editMediaCallback } = this.props\n\n        return <Modal size={'full'} show={editMediaModal} className=\"editMedia_modal border-0 p-0\" backdrop={false} onHide={editMediaCallback(false)}>\n            <Modal.Header className=\"border-0 p-0 w-100 border-bottom\" closeButton>\n                <div className=\"d-flex justify-content-between align-items-center px-lg-3 px-2 bg-white w-100\">\n                    <div className=\"d-flex align-items-center flex-wrap\">\n                        <h1 className=\"text-dark font-weight-bold mr-4 fs-6 mb-0\">Edit Image</h1>\n                    </div>\n                </div>\n            </Modal.Header>\n            <Modal.Body className=\"p-0 align-items-stretch justify-content-center\">\n                <FilerobotImageEditor\n                    className=\"edit_asset_\"\n                    source={modalAssetData.postFile}\n                    theme={{\n                        palette: {\n                            //'bg-secondary': '#ffffff',\n                            'bg-primary': '#F4F5FA',\n                            // 'bg-primary-active': '#e5e6eb',\n                            'accent-primary': '#313A53',\n                            'accent-primary-hover': '#000',\n                            'accent-primary-active': '#313A53',\n                            'icons-primary': '#313A53',\n                            'icons-primary-hover': '#313A53',\n                            // 'icons-secondary': 'red',\n                            'borders-secondary': 'red',\n                            'borders-primary': 'red',\n                            'borders-strong': 'red',\n                            // 'light-shadow': 'red',\n                            // 'warning': 'red',\n                        },\n                        typography: {\n                            fontFamily: 'Inter, sans-serif',\n                        },\n                    }}\n                    onSave={this.onSaveData}\n                    //onClose={closeImgEditor}\n                    annotationsCommon={{\n                        fill: '#000000',\n                        stroke: '#000000',\n                        strokeWidth: 0,\n                        shadowOffsetX: 0,\n                        shadowOffsetY: 0,\n                        shadowBlur: 0,\n                        shadowColor: '#000000',\n                        shadowOpacity: 1,\n                        text: 'Lorem ipsum dolor sit amet, consectetur adipiscing elit.',\n                        fontSize: 14,\n                        letterSpacing: 0,\n                        align: 'left',\n                        fontStyle: 'normal',\n                    }}\n                    Text={{ text: 'Image Editor...' }}\n                    Rotate={{ angle: 90, componentType: 'slider' }}\n                    Crop={String({\n                        autoResize: true,\n                        presetsItems: [\n                            {\n                                titleKey: 'classicTv',\n                                descriptionKey: '4:3',\n                                ratio: 4 / 3,\n                                icon: <div>ss</div>,\n                            },\n                            {\n                                titleKey: 'cinemascope',\n                                descriptionKey: '21:9',\n                                ratio: 21 / 9,\n                                icon: <div>29</div>, // optional\n                            },\n                        ],\n                        presetsFolders: [\n                            {\n                                titleKey: 'socialMedia', // will be translated into Social Media as backend contains this translation key\n                                icon: <>test</>, // React Function component, string or HTML Element\n                                groups: [\n                                    {\n                                        titleKey: 'facebook',\n                                        items: [\n                                            {\n                                                titleKey: 'profile',\n                                                width: 180,\n                                                height: 180,\n                                                descriptionKey: 'fbProfilePhotoSize',\n                                            },\n                                            {\n                                                titleKey: 'coverPhoto',\n                                                width: 820,\n                                                height: 312,\n                                                descriptionKey: 'fbCoverPhotoSize',\n                                            },\n                                        ],\n                                    },\n                                ],\n                            },\n                        ],\n                    })}\n                    tabsIds={[TABS.FILTERS, TABS.ADJUST, TABS.RESIZE, TABS.ANNOTATE, TABS.FINETUNE, TOOLS.TEXT]} // or {['Adjust', 'Annotate', 'Watermark']}\n                    defaultTabId={TABS.FILTERS} // or 'Annotate'\n                    defaultToolId={TOOLS.TEXT} // or 'Text'\n                    defaultResizeId={TOOLS.RESIZE}\n                />\n            </Modal.Body>\n        </Modal>\n    }\n}\n\n\nconst mapStateToProps = (state) => {\n    return {\n\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        postPostUpdateAction: (data, calback) => dispatch(postPostUpdateAction(data, calback)),\n    }\n}\nexport default connect(mapStateToProps, mapDispatchToProps)(EditMediaModal);\n\n"],"names":["S3_BUCKET","uppyBucket","AWS","accessKeyId","uppyAwsKey","secretAccessKey","uppyAwsSecret","myBucket","robot","params","Bucket","region","REGION","endpoint","EditMediaModal","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","_len","arguments","length","args","Array","_key","call","apply","concat","state","newImage","handleClose","props","editMediaCallback","onSaveData","editedImageObject","designState","self","_assertThisInitialized","imageBase64","Object","keys","myFile","dataURItoBlob","newFileName","uuidv4","extension","ACL","Body","ContentType","ContentEncoding","Key","upload","on","evt","Math","round","loaded","total","setState","onClickToPostEditIMage","send","err","modalAssetData","data","collection","String","id","postFile","tags","content","postPostUpdateAction","_createClass","key","value","_this$props","this","editMediaModal","_jsxs","Modal","size","show","className","backdrop","onHide","children","_jsx","closeButton","FilerobotImageEditor","source","theme","palette","typography","fontFamily","onSave","annotationsCommon","fill","stroke","strokeWidth","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","shadowOpacity","text","fontSize","letterSpacing","align","fontStyle","Text","Rotate","angle","componentType","Crop","autoResize","presetsItems","titleKey","descriptionKey","ratio","icon","presetsFolders","_Fragment","groups","items","width","height","tabsIds","TABS","TOOLS","defaultTabId","defaultToolId","defaultResizeId","Component","connect","dispatch","calback"],"sourceRoot":""}