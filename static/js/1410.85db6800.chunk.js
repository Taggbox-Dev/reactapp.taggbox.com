"use strict";(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[1410],{91410:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var n=a(15671),s=a(43144),o=a(97326),c=a(60136),i=a(29388),r=a(72791),l=a(21830),d=a.n(l),u=a(8663),m=a(56600),h=a(80238),p=a(29439),f=a(84866),g=(a(84682),a(32480)),k=a(80184),w=function(e){var t=(0,r.useState)(""),a=(0,p.Z)(t,2),n=a[0],s=a[1],o=(0,r.useState)(),c=(0,p.Z)(o,2),i=c[0],l=c[1],d=(0,r.useCallback)((function(){alert("login start")}),[]);(0,r.useCallback)((function(){l(null),s(""),alert("logout success")}),[]),(0,r.useCallback)((function(){}),[]);return console.log("provider",n,i),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(f.LO,{client_id:"95564504779-0hejo69vc4apo6p0avpafasvbcfhlvom.apps.googleusercontent.com",onLoginStart:d,redirect_uri:"https://ugc.taggbox.com/login",scope:"openid profile email",discoveryDocs:"claims_supported",access_type:"offline",onResolve:function(t){var a=t.provider,n=t.data;return e.onUpdateData(a,n)},onReject:function(e){console.log(e)},children:(0,k.jsxs)("div",{className:"d-flex align-items-center rounded-1 mb-2 p-3 btn btn-outline-secondary w-100",children:[(0,k.jsxs)("div",{className:"d-flex align-items-center flex-grow-1 w-75",children:[(0,k.jsx)("div",{className:"symbol symbol-40 bg-light rounded-circle flex-shrink-0 me-2 overflow-hidden"}),(0,k.jsx)("div",{className:"w-75 overflow-hidden",children:(0,k.jsx)("span",{className:"text-start fs-7 d-block fw-bolder text-ellipsis",children:"Add Account"})})]}),(0,k.jsx)("div",{className:"d-flex",children:(0,k.jsx)("span",{className:"h-20px w-20px",children:(0,k.jsx)("img",{className:"object-center-cover",src:(0,m.F)("media/icons/social-icons/".concat((0,g.O5)(7),".svg")),alt:"network",style:{filter:"grayscale(1)",opacity:".5"}})})})]})})})},v=a(7566),x=a(23544),b=a(25554),j=a(32002),N=new BroadcastChannel("connect"),y=function(e){(0,c.Z)(a,e);var t=(0,i.Z)(a);function a(){var e;(0,n.Z)(this,a);for(var s=arguments.length,c=new Array(s),i=0;i<s;i++)c[i]=arguments[i];return(e=t.call.apply(t,[this].concat(c))).state={connected:null,showConfirm:!1},e.readAuthenticationCode=function(t){var a=JSON.parse(t.data),n=a.data,s=a.networkId,c=a.type,i=(0,o.Z)(e);if("get-rights"==c){var r=JSON.parse(t.data),l=e.props.modalAssetData;2==l.networkId||18==l.networkId?18==l.networkId?(0,b.XN)(n,s,(function(t){(0,j.gd)({access_token:t.token}).then((function(a){var n=a.data.accounts;console.log("response.data",a.data,n);var s=[];n&&n.length>0&&n.map((function(e){s.push({id:e.id,name:e.username,picture:(0,m.F)("media/icons/social-icons/".concat((0,g.O5)(l.networkId),".svg"))})})),i.setState({access_token:t.token,socialData:a.data,accountsData:s},(function(){return e.props.onUpdateData("instagram",s)}))}))})):2==l.networkId&&(0,b.YK)(n,s,(function(t){(0,j.gd)({access_token:t.token}).then((function(a){var n=a.data.accounts;console.log("response.data",a.data,n);var s=[];n&&n.length>0&&n.map((function(e){s.push({id:e.id,name:e.username,picture:(0,m.F)("media/icons/social-icons/".concat((0,g.O5)(l.networkId),".svg"))})})),i.setState({access_token:t.token,socialData:a.data,accountsData:s},(function(){return e.props.onUpdateData("instagram",s)}))}))})):3==l.networkId?(0,b.XN)(n,s,(function(t){(0,j.pV)({access_token:t.token}).then((function(a){var n=a.data.pages;console.log("response.data",a.data,n);var s=[];n&&n.length>0&&n.map((function(e){s.push({id:e.id,name:e.name,access_token:e.access_token,picture:(0,m.F)("media/icons/social-icons/".concat((0,g.O5)(l.networkId),".svg"))})})),i.setState({access_token:t.token,socialData:a.data,accountsData:s},(function(){return e.props.onUpdateData("facebook",s)}))}))})):1==l.networkId&&(0,j.gd)({access_token:n.token}).then((function(t){var a=t.data.accounts;console.log("response.data",t.data,a[0].id);var n=[];a&&a.length>0&&a.map((function(e){n.push({id:e.id,name:e.username,picture:(0,m.F)("media/icons/social-icons/".concat((0,g.O5)(l.networkId),".svg"))})})),i.setState({access_token:r.data.access_token,socialData:t.data,accountsData:n},(function(){return e.props.onUpdateData("twitter",n)}))}))}},e.handleYes=function(t){e.setState({showConfirm:!0})},e.handleNo=function(t){e.setState({showConfirm:!0})},e.onClickSocialConnect=function(e){return function(t){e&&Object.keys(e).length>0&&d().fire({imageUrl:(0,m.F)("media/icons/social-icons-square/".concat((0,g.O5)(e.networkId),".svg")),title:"<strong>".concat((0,g.O5)(e.networkId),"</strong>"),html:"Connect to ".concat((0,g.O5)(e.networkId)," and start collecting assets."),showCloseButton:!0,showCancelButton:!1,focusConfirm:!0,confirmButtonText:"Continue with ".concat((0,g.O5)(e.networkId)),confirmButtonAriaLabel:"Continue with ".concat((0,g.O5)(e.networkId)),cancelButtonText:'<i className="fa fa-thumbs-down"></i>',cancelButtonAriaLabel:"Thumbs down"}).then((function(t){switch(localStorage.setItem("networkId",e.networkId),localStorage.setItem("connectionType","get-rights"),e.networkId){case 1:(0,x.oi)();break;case 6:(0,v.nY)(6);break;case 21:(0,v.pz)("yammer",null,!0);break;case 11:(0,v.GC)(11);break;case 8:(0,v.UB)(!0);break;case 3:(0,x.vr)(3);break;case 2:var a="https://api.instagram.com/oauth/authorize?client_id=".concat(u.yz,"&redirect_uri=").concat(u.XP,"/instagram/feeds/authCallback/&scope=user_profile,user_media&response_type=code");window.open(a,"_blank","width=786,height=786");break;case 18:(0,x.vr)(18)}}))}},e}return(0,s.Z)(a,[{key:"componentDidMount",value:function(){N.addEventListener("message",this.readAuthenticationCode)}},{key:"componentWillUnmount",value:function(){N.removeEventListener("message",this.readAuthenticationCode)}},{key:"render",value:function(){this.state.showConfirm;var e=this.props,t=e.modalAssetData,a=e.connectedAccount;return console.log("modalAssetData social account",this.props),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("div",{className:"p-lg-6 p-3",children:(0,k.jsx)("div",{className:"m-auto",children:a&&a.data.length>0?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h3",{className:"mb-2 pb-2 fs-7 pt-1",children:(0,k.jsx)("span",{className:"fw-medium",children:"Connect Account"})}),(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsxs)("button",{type:"button",className:"d-flex align-items-center rounded-1 mb-2 p-3 border border-dark bg-white w-100",children:[(0,k.jsxs)("div",{className:"d-flex align-items-center flex-grow-1 w-75",children:[(0,k.jsx)("div",{className:"symbol symbol-40 rounded-circle flex-shrink-0 me-2 overflow-hidden",children:(0,k.jsx)("img",{className:"object-center-cover",src:a.data[0].picture,height:40,width:40,alt:"instagram"})}),(0,k.jsx)("div",{className:"w-75 overflow-hidden",children:(0,k.jsxs)("span",{className:"text-start fs-7 d-block fw-bolder text-dark text-ellipsis",children:["@",a.data[0].name]})})]}),(0,k.jsx)("div",{className:"d-flex",children:(0,k.jsx)("span",{className:"h-20px w-20px",children:(0,k.jsx)("img",{className:"object-center-cover",src:(0,m.F)("media/icons/social-icons/".concat(a.provider,".svg")),alt:""})})})]}),(0,k.jsx)("span",{className:"fw-medium",children:"You are logged in with this account"})]})]}):(0,k.jsx)(k.Fragment,{children:3==t.networkId?(0,k.jsx)(h.Z,{onUpdateData:this.props.onUpdateData}):7==t.networkId?(0,k.jsx)(w,{onUpdateData:this.props.onUpdateData}):(0,k.jsxs)("button",{type:"button",className:"d-flex align-items-center rounded-1 mb-2 p-3 btn btn-outline-secondary w-100",onClick:this.onClickSocialConnect(t),children:[(0,k.jsxs)("div",{className:"d-flex align-items-center flex-grow-1 w-75",children:[(0,k.jsx)("div",{className:"symbol symbol-40 bg-light rounded-circle flex-shrink-0 me-2 overflow-hidden"}),(0,k.jsx)("div",{className:"w-75 overflow-hidden",children:(0,k.jsx)("span",{className:"text-start fs-7 d-block fw-bolder text-ellipsis",children:"Add Account"})})]}),t.networkId?(0,k.jsx)("div",{className:"d-flex",children:(0,k.jsx)("span",{className:"h-20px w-20px",children:(0,k.jsx)("img",{className:"object-center-cover",src:(0,m.F)("media/icons/social-icons/".concat((0,g.O5)(t.networkId),".svg")),alt:"network",style:{filter:"grayscale(1)",opacity:".5"}})})}):null]})})})})})}}]),a}(r.Component),C=y}}]);
//# sourceMappingURL=1410.85db6800.chunk.js.map