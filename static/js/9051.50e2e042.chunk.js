(self.webpackChunkugc_suite_build=self.webpackChunkugc_suite_build||[]).push([[9051],{35604:function(e){e.exports=function(e){if("number"!==typeof e||isNaN(e))throw new TypeError("Expected a number, got "+typeof e);var t=e<0,n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"];if(t&&(e=-e),e<1)return(t?"-":"")+e+" B";var i=Math.min(Math.floor(Math.log(e)/Math.log(1024)),n.length-1);e=Number(e/Math.pow(1024,i));var r=n[i];return e>=10||e%1===0?(t?"-":"")+e.toFixed(0)+" "+r:(t?"-":"")+e.toFixed(1)+" "+r}},32789:function(e){"use strict";e.exports=r,e.exports.isMobile=r,e.exports.default=r;var t=/(android|bb\d+|meego).+mobile|armv7l|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|samsungbrowser|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,n=/CrOS/,i=/android|ipad|playbook|silk/i;function r(e){e||(e={});var r=e.ua;if(r||"undefined"===typeof navigator||(r=navigator.userAgent),r&&r.headers&&"string"===typeof r.headers["user-agent"]&&(r=r.headers["user-agent"]),"string"!==typeof r)return!1;var a=t.test(r)&&!n.test(r)||!!e.tablet&&i.test(r);return!a&&e.tablet&&e.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==r.indexOf("Macintosh")&&-1!==r.indexOf("Safari")&&(a=!0),a}},97202:function(e){e.exports=function(e,t){if(e===t)return!0;for(var n in e)if(!(n in t))return!1;for(var n in t)if(e[n]!==t[n])return!1;return!0}},95095:function(e,t,n){var i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,o=/^0o[0-7]+$/i,s=parseInt,l="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,u="object"==typeof self&&self&&self.Object===Object&&self,p=l||u||Function("return this")(),c=Object.prototype.toString,d=Math.max,h=Math.min,f=function(){return p.Date.now()};function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function m(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==c.call(e)}(e))return NaN;if(v(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=v(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(i,"");var n=a.test(e);return n||o.test(e)?s(e.slice(2),n?2:8):r.test(e)?NaN:+e}e.exports=function(e,t,n){var i,r,a,o,s,l,u=0,p=!1,c=!1,y=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=i,a=r;return i=r=void 0,u=t,o=e.apply(a,n)}function b(e){return u=e,s=setTimeout(k,t),p?g(e):o}function w(e){var n=e-l;return void 0===l||n>=t||n<0||c&&e-u>=a}function k(){var e=f();if(w(e))return C(e);s=setTimeout(k,function(e){var n=t-(e-l);return c?h(n,a-(e-u)):n}(e))}function C(e){return s=void 0,y&&i?g(e):(i=r=void 0,o)}function F(){var e=f(),n=w(e);if(i=arguments,r=this,l=e,n){if(void 0===s)return b(l);if(c)return s=setTimeout(k,t),g(l)}return void 0===s&&(s=setTimeout(k,t)),o}return t=m(t)||0,v(n)&&(p=!!n.leading,a=(c="maxWait"in n)?d(m(n.maxWait)||0,t):a,y="trailing"in n?!!n.trailing:y),F.cancel=function(){void 0!==s&&clearTimeout(s),u=0,i=l=r=s=void 0},F.flush=function(){return void 0===s?o:C(f())},F}},22109:function(e,t,n){"use strict";n.d(t,{A:function(){return Gi},v0:function(){return $i},S2:function(){return ar}});var i=n(1413),r=n(15671),a=n(43144),o=n(60136),s=n(29388),l=n(72791),u=n(74165),p=n(15861),c=n(4942),d=n(97326),h=n(58620),f=n(50732);var v=n(4692),m="error",y="waiting",g="preprocessing",b="uploading",w="postprocessing",k="complete",C=n(81694);function F(e){for(var t,n,i=[],r=0,a=Object.values(e);r<a.length;r++){var o=a[r].progress,s=o.preprocess,l=o.postprocess;if(null==n&&(s||l)){var u=s||l;t=u.mode,n=u.message}"determinate"===(null==s?void 0:s.mode)&&i.push(s.value),"determinate"===(null==l?void 0:l.mode)&&i.push(l.value)}return{mode:t,message:n,value:i.reduce((function(e,t){return e+t/i.length}),0)}}var P=n(33881),S=n(39968);function D(e){var t,n=(t=e,{hours:Math.floor(t/3600)%24,minutes:Math.floor(t/60)%60,seconds:Math.floor(t%60)}),i=0===n.hours?"":"".concat(n.hours,"h"),r=0===n.minutes?"":"".concat(0===n.hours?n.minutes:" ".concat(n.minutes.toString(10).padStart(2,"0")),"m"),a=0!==n.hours?"":"".concat(0===n.minutes?n.seconds:" ".concat(n.seconds.toString(10).padStart(2,"0")),"s");return"".concat(i).concat(r).concat(a)}var Z=function(){return" ".concat("\xb7"," ")};function x(e){var t=e.newFiles,n=e.isUploadStarted,i=e.recoveredState,r=e.i18n,a=e.uploadState,o=e.isSomeGhost,s=e.startUpload,l=C("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":a===y},{"uppy-StatusBar-actionBtn--disabled":o}),u=r(t&&n&&!i?"uploadXNewFiles":"uploadXFiles",{smart_count:t});return(0,h.h)("button",{type:"button",className:l,"aria-label":r("uploadXFiles",{smart_count:t}),onClick:s,disabled:o,"data-uppy-super-focusable":!0},u)}function T(e){var t=e.i18n,n=e.uppy;return(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":t("retryUpload"),onClick:function(){return n.retryAll()},"data-uppy-super-focusable":!0},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},(0,h.h)("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),t("retry"))}function B(e){var t=e.i18n,n=e.uppy;return(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:t("cancel"),"aria-label":t("cancel"),onClick:function(){return n.cancelAll()},"data-cy":"cancel","data-uppy-super-focusable":!0},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},(0,h.h)("g",{fill:"none",fillRule:"evenodd"},(0,h.h)("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),(0,h.h)("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function O(e){var t=e.isAllPaused,n=e.i18n,i=e.isAllComplete,r=e.resumableUploads,a=e.uppy,o=n(t?"resume":"pause");return(0,h.h)("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:function(){return i?null:r?t?a.resumeAll():a.pauseAll():a.cancelAll()},"data-uppy-super-focusable":!0},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},(0,h.h)("g",{fill:"none",fillRule:"evenodd"},(0,h.h)("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),(0,h.h)("path",{fill:"#FFF",d:t?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function A(e){var t=e.i18n,n=e.doneButtonHandler;return(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:n,"data-uppy-super-focusable":!0},t("done"))}function R(){return(0,h.h)("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},(0,h.h)("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function M(e){var t=e.progress,n=t.value,i=t.mode,r=t.message,a=Math.round(100*n);return(0,h.h)("div",{className:"uppy-StatusBar-content"},(0,h.h)(R,null),"determinate"===i?"".concat(a,"% ").concat("\xb7"," "):"",r)}function U(e){var t=e.i18n,n=e.complete,i=e.numUploads;return(0,h.h)("div",{className:"uppy-StatusBar-statusSecondary"},t("filesUploadedOfTotal",{complete:n,smart_count:i}))}function I(e){var t=e.i18n,n=e.newFiles,i=e.startUpload,r=C("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return(0,h.h)("div",{className:"uppy-StatusBar-statusSecondary"},(0,h.h)("div",{className:"uppy-StatusBar-statusSecondaryHint"},t("xMoreFilesAdded",{smart_count:n})),(0,h.h)("button",{type:"button",className:r,"aria-label":t("uploadXFiles",{smart_count:n}),onClick:i},t("upload")))}var N=P((function(e){var t=e.numUploads,n=e.complete,i=e.totalUploadedSize,r=e.totalSize,a=e.totalETA,o=e.i18n,s=t>1;return(0,h.h)("div",{className:"uppy-StatusBar-statusSecondary"},s&&o("filesUploadedOfTotal",{complete:n,smart_count:t}),(0,h.h)("span",{className:"uppy-StatusBar-additionalInfo"},s&&Z(),o("dataUploadedOfTotal",{complete:S(i),total:S(r)}),Z(),o("xTimeLeft",{time:D(a)})))}),500,{leading:!0,trailing:!0});function E(e){var t=e.i18n,n=e.supportsUploadProgress,i=e.totalProgress,r=e.showProgressDetails,a=e.isUploadStarted,o=e.isAllComplete,s=e.isAllPaused,l=e.newFiles,u=e.numUploads,p=e.complete,c=e.totalUploadedSize,d=e.totalSize,f=e.totalETA,v=e.startUpload,m=l&&a;if(!a||o)return null;var y=t(s?"paused":"uploading");return(0,h.h)("div",{className:"uppy-StatusBar-content","aria-label":y,title:y},s?null:(0,h.h)(R,null),(0,h.h)("div",{className:"uppy-StatusBar-status"},(0,h.h)("div",{className:"uppy-StatusBar-statusPrimary"},n?"".concat(y,": ").concat(i,"%"):y),s||m||!r?null:n?(0,h.h)(N,{numUploads:u,complete:p,totalUploadedSize:c,totalSize:d,totalETA:f,i18n:t}):(0,h.h)(U,{i18n:t,complete:p,numUploads:u}),m?(0,h.h)(I,{i18n:t,newFiles:l,startUpload:v}):null))}function L(e){var t=e.i18n;return(0,h.h)("div",{className:"uppy-StatusBar-content",role:"status",title:t("complete")},(0,h.h)("div",{className:"uppy-StatusBar-status"},(0,h.h)("div",{className:"uppy-StatusBar-statusPrimary"},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},(0,h.h)("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),t("complete"))))}function z(e){var t=e.error,n=e.i18n,i=e.complete,r=e.numUploads;return(0,h.h)("div",{className:"uppy-StatusBar-content",title:n("uploadFailed")},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},(0,h.h)("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),(0,h.h)("div",{className:"uppy-StatusBar-status"},(0,h.h)("div",{className:"uppy-StatusBar-statusPrimary"},n("uploadFailed"),(0,h.h)("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":n("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:function(){var e="".concat(n("uploadFailed")," \n\n ").concat(t);alert(e)},type:"button"},"?")),(0,h.h)(U,{i18n:n,complete:i,numUploads:r})))}var V=m,W=y,j=g,H=b,q=w,_=k;var G={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function K(e){var t=0;return e.forEach((function(e){t+=function(e){if(!e.bytesUploaded)return 0;var t=Date.now()-e.uploadStarted;return e.bytesUploaded/(t/1e3)}(e.progress)})),t}function X(e,t,n,i){if(e&&!t)return m;if(t)return k;if(n)return y;for(var r=y,a=Object.keys(i),o=0;o<a.length;o++){var s=i[a[o]].progress;if(s.uploadStarted&&!s.uploadComplete)return b;s.preprocess&&r!==b&&(r=g),s.postprocess&&r!==b&&r!==g&&(r=w)}return r}var Y=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,a){var o;(0,r.Z)(this,n),(o=t.call(this,e,a)).startUpload=function(){if(!o.uppy.getState().recoveredState)return o.uppy.upload().catch((function(){}));o.uppy.emit("restore-confirmed")},o.id=o.opts.id||"StatusBar",o.title="StatusBar",o.type="progressindicator",o.defaultLocale=G;return o.opts=(0,i.Z)((0,i.Z)({},{target:"body",hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null}),a),o.i18nInit(),o.render=o.render.bind((0,d.Z)(o)),o.install=o.install.bind((0,d.Z)(o)),o}return(0,a.Z)(n,[{key:"render",value:function(e){var t=e.capabilities,n=e.files,i=e.allowNewUpload,r=e.totalProgress,a=e.error,o=e.recoveredState,s=this.uppy.getObjectOfFilesPerState(),l=s.newFiles,u=s.startedFiles,p=s.completeFiles,c=s.inProgressNotPausedFiles,d=s.isUploadStarted,f=s.isAllComplete,v=s.isAllErrored,m=s.isAllPaused,y=s.isUploadInProgress,g=s.isSomeGhost,b=o?Object.values(n):l,w=function(e){var t=K(e);if(0===t)return 0;var n=e.reduce((function(e,t){return e+((n=t.progress).bytesTotal-n.bytesUploaded);var n}),0);return Math.round(n/t*10)/10}(c),k=!!t.resumableUploads,P=!1!==t.uploadProgress,S=0,D=0;return u.forEach((function(e){S+=e.progress.bytesTotal||0,D+=e.progress.bytesUploaded||0})),function(e){var t=e.newFiles,n=e.allowNewUpload,i=e.isUploadInProgress,r=e.isAllPaused,a=e.resumableUploads,o=e.error,s=e.hideUploadButton,l=e.hidePauseResumeButton,u=e.hideCancelButton,p=e.hideRetryButton,c=e.recoveredState,d=e.uploadState,f=e.totalProgress,v=e.files,m=e.supportsUploadProgress,y=e.hideAfterFinish,g=e.isSomeGhost,b=e.doneButtonHandler,w=e.isUploadStarted,k=e.i18n,P=e.startUpload,S=e.uppy,D=e.isAllComplete,Z=e.showProgressDetails,R=e.numUploads,U=e.complete,I=e.totalSize,N=e.totalETA,G=e.totalUploadedSize,K=function(){switch(d){case q:case j:var e=F(v);return"determinate"===e.mode?100*e.value:f;case V:return null;case H:return m?f:null;default:return f}}(),X=function(){if(c)return!1;switch(d){case W:return s||0===t;case _:return y;default:return!1}}(),Y=null!=K?K:100,Q=!o&&t&&!i&&!r&&n&&!s,$=!u&&d!==W&&d!==_,J=a&&!l&&d===H,ee=o&&!D&&!p,te=b&&d===_,ne=C("uppy-StatusBar-progress",{"is-indeterminate":function(){switch(d){case q:case j:return"indeterminate"===F(v).mode;case H:return!m;default:return!1}}()}),ie=C("uppy-StatusBar","is-".concat(d),{"has-ghosts":g});return(0,h.h)("div",{className:ie,"aria-hidden":X},(0,h.h)("div",{className:ne,style:{width:"".concat(Y,"%")},role:"progressbar","aria-label":"".concat(Y,"%"),"aria-valuetext":"".concat(Y,"%"),"aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":K}),function(){switch(d){case j:case q:return(0,h.h)(M,{progress:F(v)});case _:return(0,h.h)(L,{i18n:k});case V:return(0,h.h)(z,{error:o,i18n:k,numUploads:R,complete:U});case H:return(0,h.h)(E,{i18n:k,supportsUploadProgress:m,totalProgress:f,showProgressDetails:Z,isUploadStarted:w,isAllComplete:D,isAllPaused:r,newFiles:t,numUploads:R,complete:U,totalUploadedSize:G,totalSize:I,totalETA:N,startUpload:P});default:return null}}(),(0,h.h)("div",{className:"uppy-StatusBar-actions"},c||Q?(0,h.h)(x,{newFiles:t,isUploadStarted:w,recoveredState:c,i18n:k,isSomeGhost:g,startUpload:P,uploadState:d}):null,ee?(0,h.h)(T,{i18n:k,uppy:S}):null,J?(0,h.h)(O,{isAllPaused:r,i18n:k,isAllComplete:D,resumableUploads:a,uppy:S}):null,$?(0,h.h)(B,{i18n:k,uppy:S}):null,te?(0,h.h)(A,{i18n:k,doneButtonHandler:b}):null))}({error:a,uploadState:X(a,f,o,e.files||{}),allowNewUpload:i,totalProgress:r,totalSize:S,totalUploadedSize:D,isAllComplete:!1,isAllPaused:m,isAllErrored:v,isUploadStarted:d,isUploadInProgress:y,isSomeGhost:g,recoveredState:o,complete:p.length,newFiles:b.length,numUploads:u.length,totalETA:w,files:n,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:k,supportsUploadProgress:P,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish,isTargetDOMEl:this.isTargetDOMEl})}},{key:"onMount",value:function(){var e=this.el;(0,v.Z)(e)||(e.dir="ltr")}},{key:"install",value:function(){var e=this.opts.target;e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.unmount()}}]),n}(f.di);Y.VERSION="3.0.1";var Q=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;return(0,r.Z)(this,n),(e=t.apply(this,arguments)).ref=(0,h.Vf)(),e}return(0,a.Z)(n,[{key:"componentWillEnter",value:function(e){this.ref.current.style.opacity="1",this.ref.current.style.transform="none",setTimeout(e,300)}},{key:"componentWillLeave",value:function(e){this.ref.current.style.opacity="0",this.ref.current.style.transform="translateY(350%)",setTimeout(e,300)}},{key:"render",value:function(){var e=this.props.children;return(0,h.h)("div",{className:"uppy-Informer-animated",ref:this.ref},e)}}]),n}(h.wA),$=n(29439),J=n(45987),ee=["childFactory","transitionLeave","transitionName","transitionAppear","transitionEnter","transitionLeaveTimeout","transitionEnterTimeout","transitionAppearTimeout","component"];function te(e,t){var n;return null!=(n=null==e?void 0:e.key)?n:t}function ne(e){for(var t={},n=0;n<e.length;n++){if(null!=e[n])t[te(e[n],n.toString(36))]=e[n]}return t}function ie(e,t){e=e||{},t=t||{};var n=function(n){return t.hasOwnProperty(n)?t[n]:e[n]},i={},r=[];for(var a in e)t.hasOwnProperty(a)?r.length&&(i[a]=r,r=[]):r.push(a);var o={};for(var s in t){if(i.hasOwnProperty(s))for(var l=0;l<i[s].length;l++){var u=i[s][l];o[i[s][l]]=n(u)}o[s]=n(s)}for(var p=0;p<r.length;p++)o[r[p]]=n(r[p]);return o}var re=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var a;return(0,r.Z)(this,n),(a=t.call(this,e,i)).refs={},a.state={children:ne((0,h.bR)((0,h.bR)(a.props.children))||[])},a.performAppear=a.performAppear.bind((0,d.Z)(a)),a.performEnter=a.performEnter.bind((0,d.Z)(a)),a.performLeave=a.performLeave.bind((0,d.Z)(a)),a}return(0,a.Z)(n,[{key:"componentWillMount",value:function(){this.currentlyTransitioningKeys={},this.keysToAbortLeave=[],this.keysToEnter=[],this.keysToLeave=[]}},{key:"componentDidMount",value:function(){var e=this.state.children;for(var t in e)e[t]&&this.performAppear(t)}},{key:"componentWillReceiveProps",value:function(e){var t,n=ne((0,h.bR)(e.children)||[]),i=this.state.children;for(t in this.setState((function(e){return{children:ie(e.children,n)}})),n)if(n.hasOwnProperty(t)){var r=i&&i.hasOwnProperty(t);n[t]&&r&&this.currentlyTransitioningKeys[t]?(this.keysToEnter.push(t),this.keysToAbortLeave.push(t)):!n[t]||r||this.currentlyTransitioningKeys[t]||this.keysToEnter.push(t)}for(t in i)if(i.hasOwnProperty(t)){var a=n&&n.hasOwnProperty(t);!i[t]||a||this.currentlyTransitioningKeys[t]||this.keysToLeave.push(t)}}},{key:"componentDidUpdate",value:function(){var e=this.keysToEnter;this.keysToEnter=[],e.forEach(this.performEnter);var t=this.keysToLeave;this.keysToLeave=[],t.forEach(this.performLeave)}},{key:"_finishAbort",value:function(e){var t=this.keysToAbortLeave.indexOf(e);-1!==t&&this.keysToAbortLeave.splice(t,1)}},{key:"performAppear",value:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillAppear?t.componentWillAppear(this._handleDoneAppearing.bind(this,e)):this._handleDoneAppearing(e)}},{key:"_handleDoneAppearing",value:function(e){var t=this.refs[e];t.componentDidAppear&&t.componentDidAppear(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);var n=ne((0,h.bR)(this.props.children)||[]);n&&n.hasOwnProperty(e)||this.performLeave(e)}},{key:"performEnter",value:function(e){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillEnter?t.componentWillEnter(this._handleDoneEntering.bind(this,e)):this._handleDoneEntering(e)}},{key:"_handleDoneEntering",value:function(e){var t=this.refs[e];t.componentDidEnter&&t.componentDidEnter(),delete this.currentlyTransitioningKeys[e],this._finishAbort(e);var n=ne((0,h.bR)(this.props.children)||[]);n&&n.hasOwnProperty(e)||this.performLeave(e)}},{key:"performLeave",value:function(e){if(-1===this.keysToAbortLeave.indexOf(e)){this.currentlyTransitioningKeys[e]=!0;var t=this.refs[e];t.componentWillLeave?t.componentWillLeave(this._handleDoneLeaving.bind(this,e)):this._handleDoneLeaving(e)}}},{key:"_handleDoneLeaving",value:function(e){if(-1===this.keysToAbortLeave.indexOf(e)){var t=this.refs[e];t.componentDidLeave&&t.componentDidLeave(),delete this.currentlyTransitioningKeys[e];var n,i,r=ne((0,h.bR)(this.props.children)||[]);if(r&&r.hasOwnProperty(e))this.performEnter(e);else{var a=(n={},i=this.state.children,Object.assign(n,i));delete a[e],this.setState({children:a})}}}},{key:"render",value:function(e,t){var n=this,i=e.childFactory,r=(e.transitionLeave,e.transitionName,e.transitionAppear,e.transitionEnter,e.transitionLeaveTimeout,e.transitionEnterTimeout,e.transitionAppearTimeout,e.component),a=(0,J.Z)(e,ee),o=t.children,s=Object.entries(o).map((function(e){var t=(0,$.Z)(e,2),r=t[0],a=t[1];if(a){var o=function(e,t){var n=e._ptgLinkedRefs||(e._ptgLinkedRefs={});return n[t]||(n[t]=function(n){e.refs[t]=n})}(n,r);return(0,h.Tm)(i(a),{ref:o,key:r})}})).filter(Boolean);return(0,h.h)(r,a,s)}}]),n}(h.wA);re.defaultProps={component:"span",childFactory:function(e){return e}};var ae=re,oe=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,a){var o;(0,r.Z)(this,n),(o=t.call(this,e,a)).render=function(e){return(0,h.h)("div",{className:"uppy uppy-Informer"},(0,h.h)(ae,null,e.info.map((function(e){return(0,h.h)(Q,{key:e.message},(0,h.h)("p",{role:"alert"},e.message," ",e.details&&(0,h.h)("span",{"aria-label":e.details,"data-microtip-position":"top-left","data-microtip-size":"medium",role:"tooltip",onClick:function(){return alert("".concat(e.message," \n\n ").concat(e.details))}},"?")))}))))},o.type="progressindicator",o.id=o.opts.id||"Informer",o.title="Informer";return o.opts=(0,i.Z)((0,i.Z)({},{}),a),o}return(0,a.Z)(n,[{key:"install",value:function(){var e=this.opts.target;e&&this.mount(e,this)}}]),n}(f.di);oe.VERSION="3.0.1";var se=/^data:([^/]+\/[^,;]+(?:[^,]*?))(;base64)?,([\s\S]*)$/;function le(e){return e.startsWith("blob:")}var ue=n(65279),pe=n(82963),ce=n(93433),de=n(37762),he=n(11752),fe=n(61120),ve=n(98737);function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ye="undefined"!=typeof self?self:global,ge=(Mt="undefined"!=typeof navigator)&&"undefined"==typeof HTMLImageElement,be=!("undefined"==typeof global||"undefined"==typeof process||!process.versions||!process.versions.node),we=ye.Buffer,ke=!!we,Ce=function(e){return void 0!==e};function Fe(e){return void 0===e||(e instanceof Map?0===e.size:0===Object.values(e).filter(Ce).length)}function Pe(e){var t=new Error(e);throw delete t.stack,t}function Se(e){var t=function(e){var t=0;return e.ifd0.enabled&&(t+=1024),e.exif.enabled&&(t+=2048),e.makerNote&&(t+=2048),e.userComment&&(t+=1024),e.gps.enabled&&(t+=512),e.interop.enabled&&(t+=100),e.ifd1.enabled&&(t+=1024),t+2048}(e);return e.jfif.enabled&&(t+=50),e.xmp.enabled&&(t+=2e4),e.iptc.enabled&&(t+=14e3),e.icc.enabled&&(t+=6e3),t}var De=function(e){return String.fromCharCode.apply(null,e)},Ze="undefined"!=typeof TextDecoder?new TextDecoder("utf-8"):void 0,xe=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;if((0,r.Z)(this,e),"boolean"==typeof a&&(this.le=a),Array.isArray(t)&&(t=new Uint8Array(t)),0===t)this.byteOffset=0,this.byteLength=0;else if(t instanceof ArrayBuffer){void 0===i&&(i=t.byteLength-n);var o=new DataView(t,n,i);this._swapDataView(o)}else if(t instanceof Uint8Array||t instanceof DataView||t instanceof e){void 0===i&&(i=t.byteLength-n),(n+=t.byteOffset)+i>t.byteOffset+t.byteLength&&Pe("Creating view outside of available memory in ArrayBuffer");var s=new DataView(t.buffer,n,i);this._swapDataView(s)}else if("number"==typeof t){var l=new DataView(new ArrayBuffer(t));this._swapDataView(l)}else Pe("Invalid input argument for BufferView: "+t)}return(0,a.Z)(e,[{key:"_swapArrayBuffer",value:function(e){this._swapDataView(new DataView(e))}},{key:"_swapBuffer",value:function(e){this._swapDataView(new DataView(e.buffer,e.byteOffset,e.byteLength))}},{key:"_swapDataView",value:function(e){this.dataView=e,this.buffer=e.buffer,this.byteOffset=e.byteOffset,this.byteLength=e.byteLength}},{key:"_lengthToEnd",value:function(e){return this.byteLength-e}},{key:"set",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return t instanceof DataView||t instanceof e?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer&&(t=new Uint8Array(t)),t instanceof Uint8Array||Pe("BufferView.set(): Invalid data argument."),this.toUint8().set(t,n),new i(this,n,t.byteLength)}},{key:"subarray",value:function(t,n){return new e(this,t,n=n||this._lengthToEnd(t))}},{key:"toUint8",value:function(){return new Uint8Array(this.buffer,this.byteOffset,this.byteLength)}},{key:"getUint8Array",value:function(e,t){return new Uint8Array(this.buffer,this.byteOffset+e,t)}},{key:"getString",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,i=this.getUint8Array(t,n);return e=i,Ze?Ze.decode(e):ke?Buffer.from(e).toString("utf8"):decodeURIComponent(escape(De(e)))}},{key:"getLatin1String",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=this.getUint8Array(e,t);return De(n)}},{key:"getUnicodeString",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.byteLength,n=[],i=0;i<t&&e+i<this.byteLength;i+=2)n.push(this.getUint16(e+i));return De(n)}},{key:"getInt8",value:function(e){return this.dataView.getInt8(e)}},{key:"getUint8",value:function(e){return this.dataView.getUint8(e)}},{key:"getInt16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt16(e,t)}},{key:"getInt32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getInt32(e,t)}},{key:"getUint16",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint16(e,t)}},{key:"getUint32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getUint32(e,t)}},{key:"getFloat32",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getFloat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat32(e,t)}},{key:"getDouble",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.le;return this.dataView.getFloat64(e,t)}},{key:"getUintBytes",value:function(e,t,n){switch(t){case 1:return this.getUint8(e,n);case 2:return this.getUint16(e,n);case 4:return this.getUint32(e,n);case 8:return this.getUint64&&this.getUint64(e,n)}}},{key:"getUint",value:function(e,t,n){switch(t){case 8:return this.getUint8(e,n);case 16:return this.getUint16(e,n);case 32:return this.getUint32(e,n);case 64:return this.getUint64&&this.getUint64(e,n)}}},{key:"toString",value:function(e){return this.dataView.toString(e,this.constructor.name)}},{key:"ensureChunk",value:function(){}}],[{key:"from",value:function(t,n){return t instanceof this&&t.le===n?t:new e(t,void 0,void 0,n)}}]),e}();function Te(e,t){Pe("".concat(e," '").concat(t,"' was not loaded, try using full build of exifr."))}var Be=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this)).kind=e,i}return(0,a.Z)(n,[{key:"get",value:function(e,t){return this.has(e)||Te(this.kind,e),t&&(e in t||function(e,t){Pe("Unknown ".concat(e," '").concat(t,"'."))}(this.kind,e),t[e].enabled||Te(this.kind,e)),(0,he.Z)((0,fe.Z)(n.prototype),"get",this).call(this,e)}},{key:"keyList",value:function(){return Array.from(this.keys())}}]),n}((0,ve.Z)(Map)),Oe=new Be("file parser"),Ae=new Be("segment parser"),Re=new Be("file reader"),Me=ye.fetch;function Ue(e,t){return(n=e).startsWith("data:")||n.length>1e4?Ee(e,t,"base64"):be&&e.includes("://")?Ie(e,t,"url",ze):be?Ee(e,t,"fs"):Mt?Ie(e,t,"url",ze):void Pe("Invalid input argument");var n}function Ie(e,t,n,i){return Ne.apply(this,arguments)}function Ne(){return Ne=(0,p.Z)((0,u.Z)().mark((function e(t,n,i,r){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Re.has(i)?Ee(t,n,i):r?function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,n){var i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return i=e.sent,e.abrupt("return",new xe(i));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,r):void Pe("Parser ".concat(i," is not loaded")));case 1:case"end":return e.stop()}}),e)}))),Ne.apply(this,arguments)}function Ee(e,t,n){return Le.apply(this,arguments)}function Le(){return Le=(0,p.Z)((0,u.Z)().mark((function e(t,n,i){var r;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new(Re.get(i))(t,n),e.next=3,r.read();case 3:return e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),Le.apply(this,arguments)}var ze=function(e){return Me(e).then((function(e){return e.arrayBuffer()}))},Ve=function(e){return new Promise((function(t,n){var i=new FileReader;i.onloadend=function(){return t(i.result||new ArrayBuffer)},i.onerror=n,i.readAsArrayBuffer(e)}))},We=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"tagKeys",get:function(){return this.allKeys||(this.allKeys=Array.from(this.keys())),this.allKeys}},{key:"tagValues",get:function(){return this.allValues||(this.allValues=Array.from(this.values())),this.allValues}}]),n}((0,ve.Z)(Map));function je(e,t,n){var i,r=new We,a=(0,de.Z)(n);try{for(a.s();!(i=a.n()).done;){var o=(0,$.Z)(i.value,2),s=o[0],l=o[1];r.set(s,l)}}catch(d){a.e(d)}finally{a.f()}if(Array.isArray(t)){var u,p=(0,de.Z)(t);try{for(p.s();!(u=p.n()).done;){var c=u.value;e.set(c,r)}}catch(d){p.e(d)}finally{p.f()}}else e.set(t,r);return r}function He(e,t,n){var i,r,a=e.get(t),o=(0,de.Z)(n);try{for(o.s();!(r=o.n()).done;)i=r.value,a.set(i[0],i[1])}catch(s){o.e(s)}finally{o.f()}}var qe=new Map,_e=new Map,Ge=new Map,Ke=["chunked","firstChunkSize","firstChunkSizeNode","firstChunkSizeBrowser","chunkSize","chunkLimit"],Xe=["jfif","xmp","icc","iptc","ihdr"],Ye=["tiff"].concat(Xe),Qe=["ifd0","ifd1","exif","gps","interop"],$e=[].concat((0,ce.Z)(Ye),Qe),Je=["makerNote","userComment"],et=["translateKeys","translateValues","reviveValues","multiSegment"],tt=[].concat(et,["sanitize","mergeOutput","silentErrors"]),nt=function(){function e(){(0,r.Z)(this,e)}return(0,a.Z)(e,[{key:"translate",get:function(){return this.translateKeys||this.translateValues||this.reviveValues}}]),e}(),it=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,i,a,o){var s;if((0,r.Z)(this,n),s=t.call(this),me((0,d.Z)(s),"enabled",!1),me((0,d.Z)(s),"skip",new Set),me((0,d.Z)(s),"pick",new Set),me((0,d.Z)(s),"deps",new Set),me((0,d.Z)(s),"translateKeys",!1),me((0,d.Z)(s),"translateValues",!1),me((0,d.Z)(s),"reviveValues",!1),s.key=e,s.enabled=i,s.parse=s.enabled,s.applyInheritables(o),s.canBeFiltered=Qe.includes(e),s.canBeFiltered&&(s.dict=qe.get(e)),void 0!==a)if(Array.isArray(a))s.parse=s.enabled=!0,s.canBeFiltered&&a.length>0&&s.translateTagSet(a,s.pick);else if("object"==typeof a){if(s.enabled=!0,s.parse=!1!==a.parse,s.canBeFiltered){var l=a.pick,u=a.skip;l&&l.length>0&&s.translateTagSet(l,s.pick),u&&u.length>0&&s.translateTagSet(u,s.skip)}s.applyInheritables(a)}else!0===a||!1===a?s.parse=s.enabled=a:Pe("Invalid options argument: ".concat(a));return(0,pe.Z)(s)}return(0,a.Z)(n,[{key:"needed",get:function(){return this.enabled||this.deps.size>0}},{key:"applyInheritables",value:function(e){var t,n,i,r=(0,de.Z)(et);try{for(r.s();!(i=r.n()).done;)void 0!==(n=e[t=i.value])&&(this[t]=n)}catch(a){r.e(a)}finally{r.f()}}},{key:"translateTagSet",value:function(e,t){if(this.dict){var n,i,r,a=this.dict,o=a.tagKeys,s=a.tagValues,l=(0,de.Z)(e);try{for(l.s();!(r=l.n()).done;)"string"==typeof(n=r.value)?(-1===(i=s.indexOf(n))&&(i=o.indexOf(Number(n))),-1!==i&&t.add(Number(o[i]))):t.add(n)}catch(d){l.e(d)}finally{l.f()}}else{var u,p=(0,de.Z)(e);try{for(p.s();!(u=p.n()).done;){var c=u.value;t.add(c)}}catch(d){p.e(d)}finally{p.f()}}}},{key:"finalizeFilters",value:function(){!this.enabled&&this.deps.size>0?(this.enabled=!0,ut(this.pick,this.deps)):this.enabled&&this.pick.size>0&&ut(this.pick,this.deps)}}]),n}(nt),rt={jfif:!1,tiff:!0,xmp:!1,icc:!1,iptc:!1,ifd0:!0,ifd1:!1,exif:!0,gps:!0,interop:!1,ihdr:void 0,makerNote:!1,userComment:!1,multiSegment:!1,skip:[],pick:[],translateKeys:!0,translateValues:!0,reviveValues:!0,sanitize:!0,mergeOutput:!0,silentErrors:!0,chunked:!0,firstChunkSize:void 0,firstChunkSizeNode:512,firstChunkSizeBrowser:65536,chunkSize:65536,chunkLimit:5},at=new Map,ot=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),i=t.call(this),!0===e?i.setupFromTrue():void 0===e?i.setupFromUndefined():Array.isArray(e)?i.setupFromArray(e):"object"==typeof e?i.setupFromObject(e):Pe("Invalid options argument ".concat(e)),void 0===i.firstChunkSize&&(i.firstChunkSize=Mt?i.firstChunkSizeBrowser:i.firstChunkSizeNode),i.mergeOutput&&(i.ifd1.enabled=!1),i.filterNestedSegmentTags(),i.traverseTiffDependencyTree(),i.checkLoadedPlugins(),i}return(0,a.Z)(n,[{key:"setupFromUndefined",value:function(){var e,t,n=(0,de.Z)(Ke);try{for(n.s();!(t=n.n()).done;)this[e=t.value]=rt[e]}catch(u){n.e(u)}finally{n.f()}var i,r=(0,de.Z)(tt);try{for(r.s();!(i=r.n()).done;)this[e=i.value]=rt[e]}catch(u){r.e(u)}finally{r.f()}var a,o=(0,de.Z)(Je);try{for(o.s();!(a=o.n()).done;)this[e=a.value]=rt[e]}catch(u){o.e(u)}finally{o.f()}var s,l=(0,de.Z)($e);try{for(l.s();!(s=l.n()).done;)this[e=s.value]=new it(e,rt[e],void 0,this)}catch(u){l.e(u)}finally{l.f()}}},{key:"setupFromTrue",value:function(){var e,t,n=(0,de.Z)(Ke);try{for(n.s();!(t=n.n()).done;)this[e=t.value]=rt[e]}catch(u){n.e(u)}finally{n.f()}var i,r=(0,de.Z)(tt);try{for(r.s();!(i=r.n()).done;)this[e=i.value]=rt[e]}catch(u){r.e(u)}finally{r.f()}var a,o=(0,de.Z)(Je);try{for(o.s();!(a=o.n()).done;)this[e=a.value]=!0}catch(u){o.e(u)}finally{o.f()}var s,l=(0,de.Z)($e);try{for(l.s();!(s=l.n()).done;)this[e=s.value]=new it(e,!0,void 0,this)}catch(u){l.e(u)}finally{l.f()}}},{key:"setupFromArray",value:function(e){var t,n,i=(0,de.Z)(Ke);try{for(i.s();!(n=i.n()).done;)this[t=n.value]=rt[t]}catch(p){i.e(p)}finally{i.f()}var r,a=(0,de.Z)(tt);try{for(a.s();!(r=a.n()).done;)this[t=r.value]=rt[t]}catch(p){a.e(p)}finally{a.f()}var o,s=(0,de.Z)(Je);try{for(s.s();!(o=s.n()).done;)this[t=o.value]=rt[t]}catch(p){s.e(p)}finally{s.f()}var l,u=(0,de.Z)($e);try{for(u.s();!(l=u.n()).done;)this[t=l.value]=new it(t,!1,void 0,this)}catch(p){u.e(p)}finally{u.f()}this.setupGlobalFilters(e,void 0,Qe)}},{key:"setupFromObject",value:function(e){var t,n,i=(0,de.Z)((Qe.ifd0=Qe.ifd0||Qe.image,Qe.ifd1=Qe.ifd1||Qe.thumbnail,Object.assign(this,e),Ke));try{for(i.s();!(n=i.n()).done;)this[t=n.value]=lt(e[t],rt[t])}catch(d){i.e(d)}finally{i.f()}var r,a=(0,de.Z)(tt);try{for(a.s();!(r=a.n()).done;)this[t=r.value]=lt(e[t],rt[t])}catch(d){a.e(d)}finally{a.f()}var o,s=(0,de.Z)(Je);try{for(s.s();!(o=s.n()).done;)this[t=o.value]=lt(e[t],rt[t])}catch(d){s.e(d)}finally{s.f()}var l,u=(0,de.Z)(Ye);try{for(u.s();!(l=u.n()).done;)this[t=l.value]=new it(t,rt[t],e[t],this)}catch(d){u.e(d)}finally{u.f()}var p,c=(0,de.Z)(Qe);try{for(c.s();!(p=c.n()).done;)this[t=p.value]=new it(t,rt[t],e[t],this.tiff)}catch(d){c.e(d)}finally{c.f()}this.setupGlobalFilters(e.pick,e.skip,Qe,$e),!0===e.tiff?this.batchEnableWithBool(Qe,!0):!1===e.tiff?this.batchEnableWithUserValue(Qe,e):Array.isArray(e.tiff)?this.setupGlobalFilters(e.tiff,void 0,Qe):"object"==typeof e.tiff&&this.setupGlobalFilters(e.tiff.pick,e.tiff.skip,Qe)}},{key:"batchEnableWithBool",value:function(e,t){var n,i=(0,de.Z)(e);try{for(i.s();!(n=i.n()).done;){this[n.value].enabled=t}}catch(r){i.e(r)}finally{i.f()}}},{key:"batchEnableWithUserValue",value:function(e,t){var n,i=(0,de.Z)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=t[r];this[r].enabled=!1!==a&&void 0!==a}}catch(o){i.e(o)}finally{i.f()}}},{key:"setupGlobalFilters",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;if(e&&e.length){var r,a=(0,de.Z)(i);try{for(a.s();!(r=a.n()).done;){var o=r.value;this[o].enabled=!1}}catch(b){a.e(b)}finally{a.f()}var s,l=st(e,n),u=(0,de.Z)(l);try{for(u.s();!(s=u.n()).done;){var p=(0,$.Z)(s.value,2),c=p[0],d=p[1];ut(this[c].pick,d),this[c].enabled=!0}}catch(b){u.e(b)}finally{u.f()}}else if(t&&t.length){var h,f=st(t,n),v=(0,de.Z)(f);try{for(v.s();!(h=v.n()).done;){var m=(0,$.Z)(h.value,2),y=m[0],g=m[1];ut(this[y].skip,g)}}catch(b){v.e(b)}finally{v.f()}}}},{key:"filterNestedSegmentTags",value:function(){var e=this.ifd0,t=this.exif,n=this.xmp,i=this.iptc,r=this.icc;this.makerNote?t.deps.add(37500):t.skip.add(37500),this.userComment?t.deps.add(37510):t.skip.add(37510),n.enabled||e.skip.add(700),i.enabled||e.skip.add(33723),r.enabled||e.skip.add(34675)}},{key:"traverseTiffDependencyTree",value:function(){var e=this,t=this.ifd0,n=this.exif,i=this.gps;this.interop.needed&&(n.deps.add(40965),t.deps.add(40965)),n.needed&&t.deps.add(34665),i.needed&&t.deps.add(34853),this.tiff.enabled=Qe.some((function(t){return!0===e[t].enabled}))||this.makerNote||this.userComment;var r,a=(0,de.Z)(Qe);try{for(a.s();!(r=a.n()).done;){this[r.value].finalizeFilters()}}catch(o){a.e(o)}finally{a.f()}}},{key:"onlyTiff",get:function(){var e=this;return!Xe.map((function(t){return e[t].enabled})).some((function(e){return!0===e}))&&this.tiff.enabled}},{key:"checkLoadedPlugins",value:function(){var e,t=(0,de.Z)(Ye);try{for(t.s();!(e=t.n()).done;){var n=e.value;this[n].enabled&&!Ae.has(n)&&Te("segment parser",n)}}catch(i){t.e(i)}finally{t.f()}}}],[{key:"useCached",value:function(e){var t=at.get(e);return void 0!==t||(t=new this(e),at.set(e,t)),t}}]),n}(nt);function st(e,t){var n,i,r,a,o,s=[],l=(0,de.Z)(t);try{for(l.s();!(o=l.n()).done;){r=o.value;var u,p=(0,de.Z)((n=qe.get(r),i=[],n));try{for(p.s();!(u=p.n()).done;)a=u.value,(e.includes(a[0])||e.includes(a[1]))&&i.push(a[0])}catch(c){p.e(c)}finally{p.f()}i.length&&s.push([r,i])}}catch(c){l.e(c)}finally{l.f()}return s}function lt(e,t){return void 0!==e?e:void 0!==t?t:void 0}function ut(e,t){var n,i=(0,de.Z)(t);try{for(i.s();!(n=i.n()).done;){var r=n.value;e.add(r)}}catch(a){i.e(a)}finally{i.f()}}me(ot,"default",rt);var pt=function(){function e(t){var n=this;(0,r.Z)(this,e),me(this,"parsers",{}),me(this,"output",{}),me(this,"errors",[]),me(this,"pushToErrors",(function(e){return n.errors.push(e)})),this.options=ot.useCached(t)}return(0,a.Z)(e,[{key:"read",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t){return"string"==typeof e?Ue(e,t):Mt&&!ge&&e instanceof HTMLImageElement?Ue(e.src,t):e instanceof Uint8Array||e instanceof ArrayBuffer||e instanceof DataView?new xe(e):Mt&&e instanceof Blob?Ie(e,t,"blob",Ve):void Pe("Invalid input argument")}(t,this.options);case 2:this.file=e.sent;case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setup",value:function(){if(!this.fileParser){var e,t=this.file,n=t.getUint16(0),i=(0,de.Z)(Oe);try{for(i.s();!(e=i.n()).done;){var r=(0,$.Z)(e.value,2),a=r[0],o=r[1];if(o.canHandle(t,n))return this.fileParser=new o(this.options,this.file,this.parsers),t[a]=!0}}catch(s){i.e(s)}finally{i.f()}this.file.close&&this.file.close(),Pe("Unknown file format")}}},{key:"parse",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t,n,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.output,n=this.errors,this.setup(),!this.options.silentErrors){e.next=8;break}return e.next=5,this.executeParsers().catch(this.pushToErrors);case 5:n.push.apply(n,(0,ce.Z)(this.fileParser.errors)),e.next=10;break;case 8:return e.next=10,this.executeParsers();case 10:return this.file.close&&this.file.close(),this.options.silentErrors&&n.length>0&&(t.errors=n),e.abrupt("return",Fe(i=t)?void 0:i);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"executeParsers",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t,n,i=this;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.output,e.next=3,this.fileParser.parse();case 3:return n=Object.values(this.parsers).map(function(){var e=(0,p.Z)((0,u.Z)().mark((function e(n){var i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.parse();case 2:i=e.sent,n.assignToOutput(t,i);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.options.silentErrors&&(n=n.map((function(e){return e.catch(i.pushToErrors)}))),e.next=7,Promise.all(n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"extractThumbnail",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t,n,i,r,a,o,s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setup(),t=this.options,n=this.file,i=Ae.get("tiff",t),!n.tiff){e.next=6;break}r={start:0,type:"tiff"},e.next=11;break;case 6:if(e.t0=n.jpeg,!e.t0){e.next=11;break}return e.next=10,this.fileParser.getOrFindSegment("tiff");case 10:r=e.sent;case 11:if(void 0!==r){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,this.fileParser.ensureSegmentChunk(r);case 15:return a=e.sent,o=this.parsers.tiff=new i(a,t,n),e.next=19,o.extractThumbnail();case 19:return s=e.sent,e.abrupt("return",(n.close&&n.close(),s));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ct(e,t){return dt.apply(this,arguments)}function dt(){return dt=(0,p.Z)((0,u.Z)().mark((function e(t,n){var i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new pt(n),e.next=3,i.read(t);case 3:return e.abrupt("return",i.parse());case 4:case"end":return e.stop()}}),e)}))),dt.apply(this,arguments)}var ht=Object.freeze({__proto__:null,parse:ct,Exifr:pt,fileParsers:Oe,segmentParsers:Ae,fileReaders:Re,tagKeys:qe,tagValues:_e,tagRevivers:Ge,createDictionary:je,extendDictionary:He,fetchUrlAsArrayBuffer:ze,readBlobAsArrayBuffer:Ve,chunkedProps:Ke,otherSegments:Xe,segments:Ye,tiffBlocks:Qe,segmentsAndBlocks:$e,tiffExtractables:Je,inheritables:et,allFormatters:tt,Options:ot}),ft=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;(0,r.Z)(this,e),me(this,"errors",[]),me(this,"raw",new Map),me(this,"handleError",(function(e){if(!n.options.silentErrors)throw e;n.errors.push(e.message)})),this.chunk=this.normalizeInput(t),this.file=a,this.type=this.constructor.type,this.globalOptions=this.options=i,this.localOptions=i[this.type],this.canTranslate=this.localOptions&&this.localOptions.translate}return(0,a.Z)(e,[{key:"normalizeInput",value:function(e){return e instanceof xe?e:new xe(e)}},{key:"translate",value:function(){this.canTranslate&&(this.translated=this.translateBlock(this.raw,this.type))}},{key:"output",get:function(){return this.translated?this.translated:this.raw?Object.fromEntries(this.raw):void 0}},{key:"translateBlock",value:function(e,t){var n,i=Ge.get(t),r=_e.get(t),a=qe.get(t),o=this.options[t],s=o.reviveValues&&!!i,l=o.translateValues&&!!r,u=o.translateKeys&&!!a,p={},c=(0,de.Z)(e);try{for(c.s();!(n=c.n()).done;){var d=(0,$.Z)(n.value,2),h=d[0],f=d[1];s&&i.has(h)?f=i.get(h)(f):l&&r.has(h)&&(f=this.translateValue(f,r.get(h))),u&&a.has(h)&&(h=a.get(h)||h),p[h]=f}}catch(v){c.e(v)}finally{c.f()}return p}},{key:"translateValue",value:function(e,t){return t[e]||t.DEFAULT||e}},{key:"assignToOutput",value:function(e,t){this.assignObjectToOutput(e,this.constructor.type,t)}},{key:"assignObjectToOutput",value:function(e,t,n){if(this.globalOptions.mergeOutput)return Object.assign(e,n);e[t]?Object.assign(e[t],n):e[t]=n}}],[{key:"findPosition",value:function(e,t){var n=e.getUint16(t+2)+2,i="function"==typeof this.headerLength?this.headerLength(e,t,n):this.headerLength,r=t+i,a=n-i;return{offset:t,length:n,headerLength:i,start:r,size:a,end:r+a}}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new this(e,new ot((0,c.Z)({},this.type,t)),e).parse()}}]),e}();function vt(e){return 192===e||194===e||196===e||219===e||221===e||218===e||254===e}function mt(e){return e>=224&&e<=239}function yt(e,t,n){var i,r=(0,de.Z)(Ae);try{for(r.s();!(i=r.n()).done;){var a=(0,$.Z)(i.value,2),o=a[0];if(a[1].canHandle(e,t,n))return o}}catch(s){r.e(s)}finally{r.f()}}me(ft,"headerLength",4),me(ft,"type",void 0),me(ft,"multiSegment",!1),me(ft,"canHandle",(function(){return!1}));var gt=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),me((0,d.Z)(e),"appSegments",[]),me((0,d.Z)(e),"jpegSegments",[]),me((0,d.Z)(e),"unknownSegments",[]),e}return(0,a.Z)(n,[{key:"parse",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.findAppSegments();case 2:return e.next=4,this.readSegments(this.appSegments);case 4:this.mergeMultiSegments(),this.createParsers(this.mergedAppSegments||this.appSegments);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setupSegmentFinderArgs",value:function(e){var t=this;!0===e?(this.findAll=!0,this.wanted=new Set(Ae.keyList())):(e=void 0===e?Ae.keyList().filter((function(e){return t.options[e].enabled})):e.filter((function(e){return t.options[e].enabled&&Ae.has(e)})),this.findAll=!1,this.remaining=new Set(e),this.wanted=new Set(e)),this.unfinishedMultiSegment=!1}},{key:"findAppSegments",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t,n,i,r,a,o,s,l,p,c=this,d=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:0,n=d.length>1?d[1]:void 0,this.setupSegmentFinderArgs(n),i=this.file,r=this.findAll,a=this.wanted,o=this.remaining,e.t0=!r&&this.file.chunked,!e.t0){e.next=11;break}if(r=Array.from(a).some((function(e){var t=Ae.get(e),n=c.options[e];return t.multiSegment&&n.multiSegment})),e.t1=r,!e.t1){e.next=11;break}return e.next=11,this.file.readWhole();case 11:if(t=this.findAppSegmentsInRange(t,i.byteLength),this.options.onlyTiff||!i.chunked){e.next=30;break}s=!1;case 14:if(!(o.size>0)||s||!i.canReadNextChunk&&!this.unfinishedMultiSegment){e.next=30;break}if(l=i.nextChunkOffset,p=this.appSegments.some((function(e){return!c.file.available(e.offset||e.start,e.length||e.size)})),!(t>l)||p){e.next=22;break}return e.next=19,i.readNextChunk(t);case 19:e.t2=!e.sent,e.next=25;break;case 22:return e.next=24,i.readNextChunk(l);case 24:e.t2=!e.sent;case 25:if(s=e.t2,void 0!==(t=this.findAppSegmentsInRange(t,i.byteLength))){e.next=28;break}return e.abrupt("return");case 28:e.next=14;break;case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findAppSegmentsInRange",value:function(e,t){t-=2;for(var n,i,r,a,o,s,l=this.file,u=this.findAll,p=this.wanted,c=this.remaining,d=this.options;e<t;e++)if(255===l.getUint8(e))if(mt(n=l.getUint8(e+1))){if(i=l.getUint16(e+2),(r=yt(l,e,i))&&p.has(r)&&(o=(a=Ae.get(r)).findPosition(l,e),s=d[r],o.type=r,this.appSegments.push(o),!u&&(a.multiSegment&&s.multiSegment?(this.unfinishedMultiSegment=o.chunkNumber<o.chunkCount,this.unfinishedMultiSegment||c.delete(r)):c.delete(r),0===c.size)))break;d.recordUnknownSegments&&((o=ft.findPosition(l,e)).marker=n,this.unknownSegments.push(o)),e+=i+1}else if(vt(n)){if(i=l.getUint16(e+2),218===n&&!1!==d.stopAfterSos)return;d.recordJpegSegments&&this.jpegSegments.push({offset:e,length:i,marker:n}),e+=i+1}return e}},{key:"mergeMultiSegments",value:function(){var e=this;if(this.appSegments.some((function(e){return e.multiSegment}))){var t=function(e,t){for(var n,i,r,a=new Map,o=0;o<e.length;o++)i=(n=e[o]).type,a.has(i)?r=a.get(i):a.set(i,r=[]),r.push(n);return Array.from(a)}(this.appSegments);this.mergedAppSegments=t.map((function(t){var n=(0,$.Z)(t,2),i=n[0],r=n[1],a=Ae.get(i,e.options);return a.handleMultiSegments?{type:i,chunk:a.handleMultiSegments(r)}:r[0]}))}}},{key:"getSegment",value:function(e){return this.appSegments.find((function(t){return t.type===e}))}},{key:"getOrFindSegment",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getSegment(t),e.t0=void 0===n,!e.t0){e.next=6;break}return e.next=5,this.findAppSegments(0,[t]);case 5:n=this.getSegment(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"canHandle",value:function(e,t){return 65496===t}}]),n}(function(){function e(t,n,i){var a=this;(0,r.Z)(this,e),me(this,"errors",[]),me(this,"ensureSegmentChunk",function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t){var n,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.start,i=t.size||65536,!a.file.chunked){e.next=17;break}if(!a.file.available(n,i)){e.next=6;break}t.chunk=a.file.subarray(n,i),e.next=15;break;case 6:return e.prev=6,e.next=9,a.file.readChunk(n,i);case 9:t.chunk=e.sent,e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),Pe("Couldn't read segment: ".concat(JSON.stringify(t),". ").concat(e.t0.message));case 15:e.next=18;break;case 17:a.file.byteLength>n+i?t.chunk=a.file.subarray(n,i):void 0===t.size?t.chunk=a.file.subarray(n):Pe("Segment unreachable: "+JSON.stringify(t));case 18:return e.abrupt("return",t.chunk);case 19:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t){return e.apply(this,arguments)}}()),this.extendOptions&&this.extendOptions(t),this.options=t,this.file=n,this.parsers=i}return(0,a.Z)(e,[{key:"injectSegment",value:function(e,t){this.options[e].enabled&&this.createParser(e,t)}},{key:"createParser",value:function(e,t){var n=new(Ae.get(e))(t,this.options,this.file);return this.parsers[e]=n}},{key:"createParsers",value:function(e){var t,n=(0,de.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value,r=i.type,a=i.chunk,o=this.options[r];if(o&&o.enabled){var s=this.parsers[r];s&&s.append||s||this.createParser(r,a)}}}catch(l){n.e(l)}finally{n.f()}}},{key:"readSegments",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map(this.ensureSegmentChunk),e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}());me(gt,"type","jpeg"),Oe.set("jpeg",gt);var bt=[void 0,1,1,2,4,8,1,1,2,4,8,4,8,4],wt=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"parseHeader",value:function(){var e=this.chunk.getUint16();18761===e?this.le=!0:19789===e&&(this.le=!1),this.chunk.le=this.le,this.headerParsed=!0}},{key:"parseTags",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,i=this.options[t],r=i.pick,a=i.skip,o=(r=new Set(r)).size>0,s=0===a.size,l=this.chunk.getUint16(e);e+=2;for(var u=0;u<l;u++){var p=this.chunk.getUint16(e);if(o){if(r.has(p)&&(n.set(p,this.parseTag(e,p,t)),r.delete(p),0===r.size))break}else!s&&a.has(p)||n.set(p,this.parseTag(e,p,t));e+=12}return n}},{key:"parseTag",value:function(e,t,n){var i,r=this.chunk,a=r.getUint16(e+2),o=r.getUint32(e+4),s=bt[a];if(s*o<=4?e+=8:e=r.getUint32(e+8),(a<1||a>13)&&Pe("Invalid TIFF value type. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(a,", offset ").concat(e)),e>r.byteLength&&Pe("Invalid TIFF value offset. block: ".concat(n.toUpperCase(),", tag: ").concat(t.toString(16),", type: ").concat(a,", offset ").concat(e," is outside of chunk size ").concat(r.byteLength)),1===a)return r.getUint8Array(e,o);if(2===a)return""===(i=function(e){for(;e.endsWith("\0");)e=e.slice(0,-1);return e}(i=r.getString(e,o)).trim())?void 0:i;if(7===a)return r.getUint8Array(e,o);if(1===o)return this.parseTagValue(a,e);for(var l=new(function(e){switch(e){case 1:return Uint8Array;case 3:return Uint16Array;case 4:return Uint32Array;case 5:case 10:default:return Array;case 6:return Int8Array;case 8:return Int16Array;case 9:return Int32Array;case 11:return Float32Array;case 12:return Float64Array}}(a))(o),u=s,p=0;p<o;p++)l[p]=this.parseTagValue(a,e),e+=u;return l}},{key:"parseTagValue",value:function(e,t){var n=this.chunk;switch(e){case 1:return n.getUint8(t);case 3:return n.getUint16(t);case 4:case 13:return n.getUint32(t);case 5:return n.getUint32(t)/n.getUint32(t+4);case 6:return n.getInt8(t);case 8:return n.getInt16(t);case 9:return n.getInt32(t);case 10:return n.getInt32(t)/n.getInt32(t+4);case 11:return n.getFloat(t);case 12:return n.getDouble(t);default:Pe("Invalid tiff type ".concat(e))}}}]),n}(ft),kt=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"parse",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.parseHeader(),t=this.options,e.t0=t.ifd0.enabled,!e.t0){e.next=6;break}return e.next=6,this.parseIfd0Block();case 6:if(e.t1=t.exif.enabled,!e.t1){e.next=10;break}return e.next=10,this.safeParse("parseExifBlock");case 10:if(e.t2=t.gps.enabled,!e.t2){e.next=14;break}return e.next=14,this.safeParse("parseGpsBlock");case 14:if(e.t3=t.interop.enabled,!e.t3){e.next=18;break}return e.next=18,this.safeParse("parseInteropBlock");case 18:if(e.t4=t.ifd1.enabled,!e.t4){e.next=22;break}return e.next=22,this.safeParse("parseThumbnailBlock");case 22:return e.abrupt("return",this.createOutput());case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"safeParse",value:function(e){var t=this[e]();return void 0!==t.catch&&(t=t.catch(this.handleError)),t}},{key:"findIfd0Offset",value:function(){void 0===this.ifd0Offset&&(this.ifd0Offset=this.chunk.getUint32(4))}},{key:"findIfd1Offset",value:function(){if(void 0===this.ifd1Offset){this.findIfd0Offset();var e=this.chunk.getUint16(this.ifd0Offset),t=this.ifd0Offset+2+12*e;this.ifd1Offset=this.chunk.getUint32(t)}}},{key:"parseBlock",value:function(e,t){var n=new Map;return this[t]=n,this.parseTags(e,t,n),n}},{key:"parseIfd0Block",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t,n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ifd0){e.next=2;break}return e.abrupt("return");case 2:if(t=this.file,this.findIfd0Offset(),this.ifd0Offset<8&&Pe("Malformed EXIF data"),!t.chunked&&this.ifd0Offset>t.byteLength&&Pe("IFD0 offset points to outside of file.\nthis.ifd0Offset: ".concat(this.ifd0Offset,", file.byteLength: ").concat(t.byteLength)),e.t0=t.tiff,!e.t0){e.next=10;break}return e.next=10,t.ensureChunk(this.ifd0Offset,Se(this.options));case 10:return n=this.parseBlock(this.ifd0Offset,"ifd0"),e.abrupt("return",0!==n.size?(this.exifOffset=n.get(34665),this.interopOffset=n.get(40965),this.gpsOffset=n.get(34853),this.xmp=n.get(700),this.iptc=n.get(33723),this.icc=n.get(34675),this.options.sanitize&&(n.delete(34665),n.delete(40965),n.delete(34853),n.delete(700),n.delete(33723),n.delete(34675)),n):void 0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseExifBlock",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.exif){e.next=2;break}return e.abrupt("return");case 2:if(e.t0=this.ifd0,e.t0){e.next=6;break}return e.next=6,this.parseIfd0Block();case 6:if(void 0!==this.exifOffset){e.next=8;break}return e.abrupt("return");case 8:if(e.t1=this.file.tiff,!e.t1){e.next=12;break}return e.next=12,this.file.ensureChunk(this.exifOffset,Se(this.options));case 12:return t=this.parseBlock(this.exifOffset,"exif"),e.abrupt("return",(this.interopOffset||(this.interopOffset=t.get(40965)),this.makerNote=t.get(37500),this.userComment=t.get(37510),this.options.sanitize&&(t.delete(40965),t.delete(37500),t.delete(37510)),this.unpack(t,41728),this.unpack(t,41729),t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"unpack",value:function(e,t){var n=e.get(t);n&&1===n.length&&e.set(t,n[0])}},{key:"parseGpsBlock",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.gps){e.next=2;break}return e.abrupt("return");case 2:if(e.t0=this.ifd0,e.t0){e.next=6;break}return e.next=6,this.parseIfd0Block();case 6:if(void 0!==this.gpsOffset){e.next=8;break}return e.abrupt("return");case 8:return t=this.parseBlock(this.gpsOffset,"gps"),e.abrupt("return",(t&&t.has(2)&&t.has(4)&&(t.set("latitude",Ct.apply(void 0,(0,ce.Z)(t.get(2)).concat([t.get(1)]))),t.set("longitude",Ct.apply(void 0,(0,ce.Z)(t.get(4)).concat([t.get(3)])))),t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseInteropBlock",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!this.interop,!e.t0){e.next=11;break}if(e.t1=this.ifd0,e.t1){e.next=6;break}return e.next=6,this.parseIfd0Block();case 6:if(e.t2=void 0!==this.interopOffset||this.exif,e.t2){e.next=10;break}return e.next=10,this.parseExifBlock();case 10:e.t0=void 0!==this.interopOffset;case 11:if(!e.t0){e.next=13;break}return e.abrupt("return",this.parseBlock(this.interopOffset,"interop"));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseThumbnailBlock",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t,n=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],this.ifd1||this.ifd1Parsed||this.options.mergeOutput&&!t){e.next=3;break}return e.abrupt("return",(this.findIfd1Offset(),this.ifd1Offset>0&&(this.parseBlock(this.ifd1Offset,"ifd1"),this.ifd1Parsed=!0),this.ifd1));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"extractThumbnail",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t,n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.headerParsed||this.parseHeader(),e.t0=this.ifd1Parsed,e.t0){e.next=5;break}return e.next=5,this.parseThumbnailBlock(!0);case 5:if(void 0!==this.ifd1){e.next=7;break}return e.abrupt("return");case 7:return t=this.ifd1.get(513),n=this.ifd1.get(514),e.abrupt("return",this.chunk.getUint8Array(t,n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"image",get:function(){return this.ifd0}},{key:"thumbnail",get:function(){return this.ifd1}},{key:"createOutput",value:function(){var e,t,n,i,r={},a=(0,de.Z)(Qe);try{for(a.s();!(i=a.n()).done;)if(!Fe(e=this[t=i.value]))if(n=this.canTranslate?this.translateBlock(e,t):Object.fromEntries(e),this.options.mergeOutput){if("ifd1"===t)continue;Object.assign(r,n)}else r[t]=n}catch(o){a.e(o)}finally{a.f()}return this.makerNote&&(r.makerNote=this.makerNote),this.userComment&&(r.userComment=this.userComment),r}},{key:"assignToOutput",value:function(e,t){if(this.globalOptions.mergeOutput)Object.assign(e,t);else for(var n=0,i=Object.entries(t);n<i.length;n++){var r=(0,$.Z)(i[n],2),a=r[0],o=r[1];this.assignObjectToOutput(e,a,o)}}}],[{key:"canHandle",value:function(e,t){return 225===e.getUint8(t+1)&&1165519206===e.getUint32(t+4)&&0===e.getUint16(t+8)}}]),n}(wt);function Ct(e,t,n,i){var r=e+t/60+n/3600;return"S"!==i&&"W"!==i||(r*=-1),r}me(kt,"type","tiff"),me(kt,"headerLength",10),Ae.set("tiff",kt);Object.freeze({__proto__:null,default:ht,Exifr:pt,fileParsers:Oe,segmentParsers:Ae,fileReaders:Re,tagKeys:qe,tagValues:_e,tagRevivers:Ge,createDictionary:je,extendDictionary:He,fetchUrlAsArrayBuffer:ze,readBlobAsArrayBuffer:Ve,chunkedProps:Ke,otherSegments:Xe,segments:Ye,tiffBlocks:Qe,segmentsAndBlocks:$e,tiffExtractables:Je,inheritables:et,allFormatters:tt,Options:ot,parse:ct});var Ft={ifd0:!1,ifd1:!1,exif:!1,gps:!1,interop:!1,sanitize:!1,reviveValues:!0,translateKeys:!1,translateValues:!1,mergeOutput:!1};Object.assign({},Ft,{firstChunkSize:4e4,gps:[1,2,3,4]});Object.assign({},Ft,{tiff:!1,ifd1:!0,mergeOutput:!1});var Pt=Object.assign({},Ft,{firstChunkSize:4e4,ifd0:[274]});function St(e){return Dt.apply(this,arguments)}function Dt(){return Dt=(0,p.Z)((0,u.Z)().mark((function e(t){var n,i;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new pt(Pt),e.next=3,n.read(t);case 3:return e.next=5,n.parse();case 5:if(!(i=e.sent)||!i.ifd0){e.next=8;break}return e.abrupt("return",i.ifd0[274]);case 8:case"end":return e.stop()}}),e)}))),Dt.apply(this,arguments)}var Zt=Object.freeze({1:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:0,rad:0},2:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:0,rad:0},3:{dimensionSwapped:!1,scaleX:1,scaleY:1,deg:180,rad:180*Math.PI/180},4:{dimensionSwapped:!1,scaleX:-1,scaleY:1,deg:180,rad:180*Math.PI/180},5:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:90,rad:90*Math.PI/180},6:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:90,rad:90*Math.PI/180},7:{dimensionSwapped:!0,scaleX:1,scaleY:-1,deg:270,rad:270*Math.PI/180},8:{dimensionSwapped:!0,scaleX:1,scaleY:1,deg:270,rad:270*Math.PI/180}}),xt=!0,Tt=!0;if("object"==typeof navigator){var Bt=navigator.userAgent;if(Bt.includes("iPad")||Bt.includes("iPhone")){var Ot=Bt.match(/OS (\d+)_(\d+)/);if(Ot){var At=(0,$.Z)(Ot,3),Rt=At[1],Mt=At[2];ge=Number(Rt)+.1*Number(Mt);xt=ge<13.4,Tt=!1}}else if(Bt.includes("OS X 10")){var Ut=Bt.match(/OS X 10[_.](\d+)/),It=(0,$.Z)(Ut,2)[1];xt=Tt=Number(It)<15}if(Bt.includes("Chrome/")){var Nt=Bt.match(/Chrome\/(\d+)/),Et=(0,$.Z)(Nt,2)[1];xt=Tt=Number(Et)<81}else if(Bt.includes("Firefox/")){var Lt=Bt.match(/Firefox\/(\d+)/),zt=(0,$.Z)(Lt,2)[1];xt=Tt=Number(zt)<77}}function Vt(){return Vt=(0,p.Z)((0,u.Z)().mark((function e(t){var n;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(t);case 2:return n=e.sent,e.abrupt("return",Object.assign({canvas:xt,css:Tt},Zt[n]));case 4:case"end":return e.stop()}}),e)}))),Vt.apply(this,arguments)}var Wt=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){var e;(0,r.Z)(this,n);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=t.call.apply(t,[this].concat(a)),me((0,d.Z)(e),"ranges",new jt),0!==e.byteLength&&e.ranges.add(0,e.byteLength),e}return(0,a.Z)(n,[{key:"_tryExtend",value:function(e,t,n){if(0===e&&0===this.byteLength&&n){var i=new DataView(n.buffer||n,n.byteOffset,n.byteLength);this._swapDataView(i)}else{var r=e+t;if(r>this.byteLength){var a=this._extend(r).dataView;this._swapDataView(a)}}}},{key:"_extend",value:function(e){var t;t=ke?we.allocUnsafe(e):new Uint8Array(e);var n=new DataView(t.buffer,t.byteOffset,t.byteLength);return t.set(new Uint8Array(this.buffer,this.byteOffset,this.byteLength),0),{uintView:t,dataView:n}}},{key:"subarray",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return t=t||this._lengthToEnd(e),i&&this._tryExtend(e,t),this.ranges.add(e,t),(0,he.Z)((0,fe.Z)(n.prototype),"subarray",this).call(this,e,t)}},{key:"set",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i&&this._tryExtend(t,e.byteLength,e);var r=(0,he.Z)((0,fe.Z)(n.prototype),"set",this).call(this,e,t);return this.ranges.add(t,r.byteLength),r}},{key:"ensureChunk",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,n){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.chunked,!e.t0){e.next=6;break}if(e.t1=this.ranges.available(t,n),e.t1){e.next=6;break}return e.next=6,this.readChunk(t,n);case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"available",value:function(e,t){return this.ranges.available(e,t)}}]),n}(xe),jt=function(){function e(){(0,r.Z)(this,e),me(this,"list",[])}return(0,a.Z)(e,[{key:"length",get:function(){return this.list.length}},{key:"add",value:function(e,t){var n=e+t,i=this.list.filter((function(t){return Ht(e,t.offset,n)||Ht(e,t.end,n)}));if(i.length>0){e=Math.min.apply(Math,[e].concat((0,ce.Z)(i.map((function(e){return e.offset}))))),n=Math.max.apply(Math,[n].concat((0,ce.Z)(i.map((function(e){return e.end}))))),t=n-e;var r=i.shift();r.offset=e,r.length=t,r.end=n,this.list=this.list.filter((function(e){return!i.includes(e)}))}else this.list.push({offset:e,length:t,end:n})}},{key:"available",value:function(e,t){var n=e+t;return this.list.some((function(t){return t.offset<=e&&n<=t.end}))}}]),e}();function Ht(e,t,n){return e<=t&&t<=n}var qt=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,i){var a;return(0,r.Z)(this,n),a=t.call(this,0),me((0,d.Z)(a),"chunksRead",0),a.input=e,a.options=i,a}return(0,a.Z)(n,[{key:"readWhole",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.chunked=!1,e.next=3,this.readChunk(this.nextChunkOffset);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readChunked",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.chunked=!0,e.next=3,this.readChunk(0,this.options.firstChunkSize);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readNextChunk",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t,n,i,r=arguments;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.length>0&&void 0!==r[0]?r[0]:this.nextChunkOffset,!this.fullyRead){e.next=3;break}return e.abrupt("return",(this.chunksRead++,!1));case 3:return n=this.options.chunkSize,e.next=6,this.readChunk(t,n);case 6:return i=e.sent,e.abrupt("return",!!i&&i.byteLength===n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readChunk",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,n){return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.chunksRead++,0===(n=this.safeWrapAddress(t,n))){e.next=2;break}return e.abrupt("return",this._readChunk(t,n));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"safeWrapAddress",value:function(e,t){return void 0!==this.size&&e+t>this.size?Math.max(0,this.size-e):t}},{key:"nextChunkOffset",get:function(){if(0!==this.ranges.list.length)return this.ranges.list[0].length}},{key:"canReadNextChunk",get:function(){return this.chunksRead<this.options.chunkLimit}},{key:"fullyRead",get:function(){return void 0!==this.size&&this.nextChunkOffset===this.size}},{key:"read",value:function(){return this.options.chunked?this.readChunked():this.readWhole()}},{key:"close",value:function(){}}]),n}(Wt);Re.set("blob",function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"readWhole",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(){var t;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.chunked=!1,e.next=3,Ve(this.input);case 3:t=e.sent,this._swapArrayBuffer(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readChunked",value:function(){return this.chunked=!0,this.size=this.input.size,(0,he.Z)((0,fe.Z)(n.prototype),"readChunked",this).call(this)}},{key:"_readChunk",value:function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t,n){var i,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n?t+n:void 0,r=this.input.slice(t,i),e.next=4,Ve(r);case 4:return a=e.sent,e.abrupt("return",this.set(a,t,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(qt));var _t={strings:{generatingThumbnails:"Generating thumbnails..."}};function Gt(e,t,n){try{e.getContext("2d").getImageData(0,0,1,1)}catch(i){if(18===i.code)return Promise.reject(new Error("cannot read image, probably an svg with external resources"))}return e.toBlob?new Promise((function(i){e.toBlob(i,t,n)})).then((function(e){if(null===e)throw new Error("cannot read image, probably an svg with external resources");return e})):Promise.resolve().then((function(){return function(e,t,n){var i,r,a,o=se.exec(e),s=null!=(i=null!=(r=t.mimeType)?r:null==o?void 0:o[1])?i:"plain/text";if(null!=o[2]){for(var l=atob(decodeURIComponent(o[3])),u=new Uint8Array(l.length),p=0;p<l.length;p++)u[p]=l.charCodeAt(p);a=[u]}else a=[decodeURIComponent(o[3])];return n?new File(a,t.name||"",{type:s}):new Blob(a,{type:s})}(e.toDataURL(t,n),{})})).then((function(e){if(null===e)throw new Error("could not extract blob, probably an old browser");return e}))}var Kt=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,a){var o;(0,r.Z)(this,n),(o=t.call(this,e,a)).onFileAdded=function(e){!e.preview&&e.data&&(0,ue.Z)(e.type)&&!e.isRemote&&o.addToQueue(e.id)},o.onCancelRequest=function(e){var t=o.queue.indexOf(e.id);-1!==t&&o.queue.splice(t,1)},o.onFileRemoved=function(e){var t=o.queue.indexOf(e.id);-1!==t&&o.queue.splice(t,1),e.preview&&le(e.preview)&&URL.revokeObjectURL(e.preview)},o.onRestored=function(){o.uppy.getFiles().filter((function(e){return e.isRestored})).forEach((function(e){e.preview&&!le(e.preview)||o.addToQueue(e.id)}))},o.onAllFilesRemoved=function(){o.queue=[]},o.waitUntilAllProcessed=function(e){e.forEach((function(e){var t=o.uppy.getFile(e);o.uppy.emit("preprocess-progress",t,{mode:"indeterminate",message:o.i18n("generatingThumbnails")})}));var t=function(){e.forEach((function(e){var t=o.uppy.getFile(e);o.uppy.emit("preprocess-complete",t)}))};return new Promise((function(e){o.queueProcessing?o.uppy.once("thumbnail:all-generated",(function(){t(),e()})):(t(),e())}))},o.type="modifier",o.id=o.opts.id||"ThumbnailGenerator",o.title="Thumbnail Generator",o.queue=[],o.queueProcessing=!1,o.defaultThumbnailDimension=200,o.thumbnailType=o.opts.thumbnailType||"image/jpeg",o.defaultLocale=_t;if(o.opts=(0,i.Z)((0,i.Z)({},{thumbnailWidth:null,thumbnailHeight:null,waitForThumbnailsBeforeUpload:!1,lazy:!1}),a),o.i18nInit(),o.opts.lazy&&o.opts.waitForThumbnailsBeforeUpload)throw new Error("ThumbnailGenerator: The `lazy` and `waitForThumbnailsBeforeUpload` options are mutually exclusive. Please ensure at most one of them is set to `true`.");return o}return(0,a.Z)(n,[{key:"createThumbnail",value:function(e,t,n){var i=this,r=URL.createObjectURL(e.data),a=new Promise((function(e,t){var n=new Image;n.src=r,n.addEventListener("load",(function(){URL.revokeObjectURL(r),e(n)})),n.addEventListener("error",(function(e){URL.revokeObjectURL(r),t(e.error||new Error("Could not create thumbnail"))}))})),o=function(e){return Vt.apply(this,arguments)}(e.data).catch((function(){return 1}));return Promise.all([a,o]).then((function(e){var r=(0,$.Z)(e,2),a=r[0],o=r[1],s=i.getProportionalDimensions(a,t,n,o.deg),l=function(e,t){var n=e.width,i=e.height;90!==t.deg&&270!==t.deg||(n=e.height,i=e.width);var r=document.createElement("canvas");r.width=n,r.height=i;var a=r.getContext("2d");return a.translate(n/2,i/2),t.canvas&&(a.rotate(t.rad),a.scale(t.scaleX,t.scaleY)),a.drawImage(e,-e.width/2,-e.height/2,e.width,e.height),r}(a,o);return Gt(i.resizeImage(l,s.width,s.height),i.thumbnailType,80)})).then((function(e){return URL.createObjectURL(e)}))}},{key:"getProportionalDimensions",value:function(e,t,n,i){var r=e.width/e.height;return 90!==i&&270!==i||(r=e.height/e.width),null!=t?{width:t,height:Math.round(t/r)}:null!=n?{width:Math.round(n*r),height:n}:{width:this.defaultThumbnailDimension,height:Math.round(this.defaultThumbnailDimension/r)}}},{key:"resizeImage",value:function(e,t,n){var i=function(e){var t=e.width/e.height,n=5e6,i=4096,r=Math.floor(Math.sqrt(n*t)),a=Math.floor(n/Math.sqrt(n*t));if(r>i&&(r=i,a=Math.round(r/t)),a>i&&(a=i,r=Math.round(t*a)),e.width>r){var o=document.createElement("canvas");return o.width=r,o.height=a,o.getContext("2d").drawImage(e,0,0,r,a),o}return e}(e),r=Math.ceil(Math.log2(i.width/t));r<1&&(r=1);for(var a=t*Math.pow(2,r-1),o=n*Math.pow(2,r-1);r--;){var s=document.createElement("canvas");s.width=a,s.height=o,s.getContext("2d").drawImage(i,0,0,a,o),i=s,a=Math.round(a/2),o=Math.round(o/2)}return i}},{key:"setPreviewURL",value:function(e,t){this.uppy.setFileState(e,{preview:t})}},{key:"addToQueue",value:function(e){this.queue.push(e),!1===this.queueProcessing&&this.processQueue()}},{key:"processQueue",value:function(){var e=this;if(this.queueProcessing=!0,this.queue.length>0){var t=this.uppy.getFile(this.queue.shift());return t?this.requestThumbnail(t).catch((function(){})).then((function(){return e.processQueue()})):(this.uppy.log("[ThumbnailGenerator] file was removed before a thumbnail could be generated, but not removed from the queue. This is probably a bug","error"),Promise.resolve())}return this.queueProcessing=!1,this.uppy.log("[ThumbnailGenerator] Emptied thumbnail queue"),this.uppy.emit("thumbnail:all-generated"),Promise.resolve()}},{key:"requestThumbnail",value:function(e){var t=this;return(0,ue.Z)(e.type)&&!e.isRemote?this.createThumbnail(e,this.opts.thumbnailWidth,this.opts.thumbnailHeight).then((function(n){t.setPreviewURL(e.id,n),t.uppy.log("[ThumbnailGenerator] Generated thumbnail for ".concat(e.id)),t.uppy.emit("thumbnail:generated",t.uppy.getFile(e.id),n)})).catch((function(n){t.uppy.log("[ThumbnailGenerator] Failed thumbnail for ".concat(e.id,":"),"warning"),t.uppy.log(n,"warning"),t.uppy.emit("thumbnail:error",t.uppy.getFile(e.id),n)})):Promise.resolve()}},{key:"install",value:function(){this.uppy.on("file-removed",this.onFileRemoved),this.uppy.on("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.on("thumbnail:request",this.onFileAdded),this.uppy.on("thumbnail:cancel",this.onCancelRequest)):(this.uppy.on("file-added",this.onFileAdded),this.uppy.on("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.addPreProcessor(this.waitUntilAllProcessed)}},{key:"uninstall",value:function(){this.uppy.off("file-removed",this.onFileRemoved),this.uppy.off("cancel-all",this.onAllFilesRemoved),this.opts.lazy?(this.uppy.off("thumbnail:request",this.onFileAdded),this.uppy.off("thumbnail:cancel",this.onCancelRequest)):(this.uppy.off("file-added",this.onFileAdded),this.uppy.off("restored",this.onRestored)),this.opts.waitForThumbnailsBeforeUpload&&this.uppy.removePreProcessor(this.waitUntilAllProcessed)}}]),n}(f.di);Kt.VERSION="3.0.2";var Xt=n(8165);function Yt(e){if("string"===typeof e){var t=document.querySelectorAll(e);return 0===t.length?null:Array.from(t)}return"object"===typeof e&&(0,Xt.Z)(e)?[e]:null}var Qt=n(66483);function $t(e){var t,n,i,r=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,i=Symbol.iterator);r--;){if(n&&null!=(t=e[n]))return t.call(e);if(i&&null!=(t=e[i]))return new Jt(t.call(e));n="@@asyncIterator",i="@@iterator"}throw new TypeError("Object is not async iterable")}function Jt(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return Jt=function(e){this.s=e,this.n=e.next},Jt.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Jt(e)}function en(e,t){this.v=e,this.k=t}function tn(e){var t,n;function i(t,n){try{var a=e[t](n),o=a.value,s=o instanceof en;Promise.resolve(s?o.v:o).then((function(n){if(s){var l="return"===t?"return":"next";if(!o.k||n.done)return i(l,n);n=e[l](n).value}r(a.done?"return":"normal",n)}),(function(e){i("throw",e)}))}catch(l){r("throw",l)}}function r(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise((function(a,o){var s={key:e,arg:r,resolve:a,reject:o,next:null};n?n=n.next=s:(t=n=s,i(e,r))}))},"function"!=typeof e.return&&(this.return=void 0)}function nn(e){return function(){return new tn(e.apply(this,arguments))}}function rn(e){return new en(e,0)}function an(e){var t={},n=!1;function i(t,i){return n=!0,{done:!1,value:new en(i=new Promise((function(n){n(e[t](i))})),1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):i("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return i("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):i("return",e)}),t}function on(e,t,n,i){var r=i.onSuccess;e.readEntries((function(i){var a=[].concat((0,ce.Z)(t),(0,ce.Z)(i));i.length?queueMicrotask((function(){on(e,a,n,{onSuccess:r})})):r(a)}),(function(e){n(e),r(t)}))}function sn(e,t){return null==e?e:{kind:e.isFile?"file":e.isDirectory?"directory":void 0,name:e.name,getFile:function(){return new Promise((function(t,n){return e.file(t,n)}))},values:function(){return nn((0,u.Z)().mark((function n(){var i,r;return(0,u.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=e.createReader(),n.next=3,rn(new Promise((function(e){on(i,[],t,{onSuccess:function(n){return e(n.map((function(e){return sn(e,t)})))}})})));case 3:return r=n.sent,n.delegateYield(an($t(r)),"t0",5);case 5:case"end":return n.stop()}}),n)})))()}}}function ln(e,t){return un.apply(this,arguments)}function un(){return(un=nn((0,u.Z)().mark((function e(t,n){var i,r,a,o,s,l,p;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("file"!==t.kind){e.next=10;break}return e.next=3,rn(t.getFile());case 3:if(null===(i=e.sent)){e.next=8;break}return i.relativePath=n?"".concat(n,"/").concat(t.name):null,e.next=8,i;case 8:e.next=39;break;case 10:if("directory"!==t.kind){e.next=39;break}r=!1,a=!1,e.prev=13,s=$t(t.values());case 15:return e.next=17,rn(s.next());case 17:if(!(r=!(l=e.sent).done)){e.next=23;break}return p=l.value,e.delegateYield(an($t(ln(p,"".concat(n,"/").concat(t.name)))),"t0",20);case 20:r=!1,e.next=15;break;case 23:e.next=29;break;case 25:e.prev=25,e.t1=e.catch(13),a=!0,o=e.t1;case 29:if(e.prev=29,e.prev=30,!r||null==s.return){e.next=34;break}return e.next=34,rn(s.return());case 34:if(e.prev=34,!a){e.next=37;break}throw o;case 37:return e.finish(34);case 38:return e.finish(29);case 39:case"end":return e.stop()}}),e,null,[[13,25,29,39],[30,,34,38]])})))).apply(this,arguments)}function pn(e,t){return cn.apply(this,arguments)}function cn(){return cn=nn((0,u.Z)().mark((function e(t,n){var i,r,a,o,s,l;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rn(Promise.all(Array.from(t.items,function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t){var i,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getAsFile(),e.next=3,null==t.getAsFileSystemHandle?void 0:t.getAsFileSystemHandle();case 3:if(e.t0=i=e.sent,null==e.t0){e.next=8;break}e.t1=i,e.next=9;break;case 8:e.t1=sn(t.webkitGetAsEntry(),n);case 9:return a=e.t1,e.abrupt("return",{lastResortFile:r,entry:a});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())));case 2:i=e.sent,r=(0,de.Z)(i),e.prev=4,r.s();case 6:if((a=r.n()).done){e.next=23;break}if(o=a.value,s=o.lastResortFile,null==(l=o.entry)){e.next=21;break}return e.prev=9,e.delegateYield(an($t(ln(l,""))),"t0",11);case 11:e.next=21;break;case 13:if(e.prev=13,e.t1=e.catch(9),!s){e.next=20;break}return e.next=18,s;case 18:e.next=21;break;case 20:n(e.t1);case 21:e.next=6;break;case 23:e.next=28;break;case 25:e.prev=25,e.t2=e.catch(4),r.e(e.t2);case 28:return e.prev=28,r.f(),e.finish(28);case 31:case"end":return e.stop()}}),e,null,[[4,25,28,31],[9,13]])}))),cn.apply(this,arguments)}function dn(e){var t=(0,Qt.Z)(e.files);return Promise.resolve(t)}function hn(e,t){return fn.apply(this,arguments)}function fn(){return(fn=(0,p.Z)((0,u.Z)().mark((function e(t,n){var i,r,a,o,s,l,p,c,d;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(void 0===n?{}:n).logDropError,r=void 0===i?function(){}:i,e.prev=1,a=[],o=!1,s=!1,e.prev=5,p=$t(pn(t,r));case 7:return e.next=9,p.next();case 9:if(!(o=!(c=e.sent).done)){e.next=15;break}d=c.value,a.push(d);case 12:o=!1,e.next=7;break;case 15:e.next=21;break;case 17:e.prev=17,e.t0=e.catch(5),s=!0,l=e.t0;case 21:if(e.prev=21,e.prev=22,!o||null==p.return){e.next=26;break}return e.next=26,p.return();case 26:if(e.prev=26,!s){e.next=29;break}throw l;case 29:return e.finish(26);case 30:return e.finish(21);case 31:return e.abrupt("return",a);case 34:return e.prev=34,e.t1=e.catch(1),e.abrupt("return",dn(t));case 37:case"end":return e.stop()}}),e,null,[[1,34],[5,17,21,31],[22,,26,30]])})))).apply(this,arguments)}tn.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},tn.prototype.next=function(e){return this._invoke("next",e)},tn.prototype.throw=function(e){return this._invoke("throw",e)},tn.prototype.return=function(e){return this._invoke("return",e)};var vn="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",mn=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21,t="",n=e;n--;)t+=vn[64*Math.random()|0];return t},yn=n(85781),gn=['a[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','area[href]:not([tabindex^="-"]):not([inert]):not([aria-hidden])',"input:not([disabled]):not([inert]):not([aria-hidden])","select:not([disabled]):not([inert]):not([aria-hidden])","textarea:not([disabled]):not([inert]):not([aria-hidden])","button:not([disabled]):not([inert]):not([aria-hidden])",'iframe:not([tabindex^="-"]):not([inert]):not([aria-hidden])','object:not([tabindex^="-"]):not([inert]):not([aria-hidden])','embed:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[contenteditable]:not([tabindex^="-"]):not([inert]):not([aria-hidden])','[tabindex]:not([tabindex^="-"]):not([inert]):not([aria-hidden])'];function bn(e,t){if(t){var n=e.querySelector('[data-uppy-paneltype="'.concat(t,'"]'));if(n)return n}return e}function wn(e,t){var n=t[0];n&&(n.focus(),e.preventDefault())}function kn(e,t,n){var i=bn(n,t),r=(0,Qt.Z)(i.querySelectorAll(gn)),a=r.indexOf(document.activeElement);!function(e){return e.contains(document.activeElement)}(i)?wn(e,r):e.shiftKey&&0===a?function(e,t){var n=t[t.length-1];n&&(n.focus(),e.preventDefault())}(e,r):e.shiftKey||a!==r.length-1||wn(e,r)}var Cn=n(95095);function Fn(){var e=document.body;return"draggable"in e&&"ondragstart"in e&&"ondrop"in e&&("FormData"in window&&"FileReader"in window)}var Pn=n(97202);function Sn(e){var t={color:"#838999",icon:(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,h.h)("g",{fill:"#A7AFB7",fillRule:"nonzero"},(0,h.h)("path",{d:"M5.5 22a.5.5 0 0 1-.5-.5v-18a.5.5 0 0 1 .5-.5h10.719a.5.5 0 0 1 .367.16l3.281 3.556a.5.5 0 0 1 .133.339V21.5a.5.5 0 0 1-.5.5h-14zm.5-1h13V7.25L16 4H6v17z"}),(0,h.h)("path",{d:"M15 4v3a1 1 0 0 0 1 1h3V7h-3V4h-1z"})))};if(!e)return t;var n=e.split("/")[0],i=e.split("/")[1];if("text"===n)return{color:"#5a5e69",icon:(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,h.h)("path",{d:"M4.5 7h13a.5.5 0 1 1 0 1h-13a.5.5 0 0 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h15a.5.5 0 1 1 0 1h-15a.5.5 0 1 1 0-1zm0 3h10a.5.5 0 1 1 0 1h-10a.5.5 0 1 1 0-1z",fill:"#5A5E69",fillRule:"nonzero"}))};if("image"===n)return{color:"#686de0",icon:(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},(0,h.h)("g",{fill:"#686DE0",fillRule:"evenodd"},(0,h.h)("path",{d:"M5 7v10h15V7H5zm0-1h15a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1z",fillRule:"nonzero"}),(0,h.h)("path",{d:"M6.35 17.172l4.994-5.026a.5.5 0 0 1 .707 0l2.16 2.16 3.505-3.505a.5.5 0 0 1 .707 0l2.336 2.31-.707.72-1.983-1.97-3.505 3.505a.5.5 0 0 1-.707 0l-2.16-2.159-3.938 3.939-1.409.026z",fillRule:"nonzero"}),(0,h.h)("circle",{cx:"7.5",cy:"9.5",r:"1.5"})))};if("audio"===n)return{color:"#068dbb",icon:(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,h.h)("path",{d:"M9.5 18.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V7.25a.5.5 0 0 1 .379-.485l9-2.25A.5.5 0 0 1 18.5 5v11.64c0 1.14-1.145 2-2.5 2s-2.5-.86-2.5-2c0-1.14 1.145-2 2.5-2 .557 0 1.079.145 1.5.396V8.67l-8 2v7.97zm8-11v-2l-8 2v2l8-2zM7 19.64c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1zm9-2c.855 0 1.5-.484 1.5-1s-.645-1-1.5-1-1.5.484-1.5 1 .645 1 1.5 1z",fill:"#049BCF",fillRule:"nonzero"}))};if("video"===n)return{color:"#19af67",icon:(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,h.h)("path",{d:"M16 11.834l4.486-2.691A1 1 0 0 1 22 10v6a1 1 0 0 1-1.514.857L16 14.167V17a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v2.834zM15 9H5v8h10V9zm1 4l5 3v-6l-5 3z",fill:"#19AF67",fillRule:"nonzero"}))};if("application"===n&&"pdf"===i)return{color:"#e25149",icon:(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"25",height:"25",viewBox:"0 0 25 25"},(0,h.h)("path",{d:"M9.766 8.295c-.691-1.843-.539-3.401.747-3.726 1.643-.414 2.505.938 2.39 3.299-.039.79-.194 1.662-.537 3.148.324.49.66.967 1.055 1.51.17.231.382.488.629.757 1.866-.128 3.653.114 4.918.655 1.487.635 2.192 1.685 1.614 2.84-.566 1.133-1.839 1.084-3.416.249-1.141-.604-2.457-1.634-3.51-2.707a13.467 13.467 0 0 0-2.238.426c-1.392 4.051-4.534 6.453-5.707 4.572-.986-1.58 1.38-4.206 4.914-5.375.097-.322.185-.656.264-1.001.08-.353.306-1.31.407-1.737-.678-1.059-1.2-2.031-1.53-2.91zm2.098 4.87c-.033.144-.068.287-.104.427l.033-.01-.012.038a14.065 14.065 0 0 1 1.02-.197l-.032-.033.052-.004a7.902 7.902 0 0 1-.208-.271c-.197-.27-.38-.526-.555-.775l-.006.028-.002-.003c-.076.323-.148.632-.186.8zm5.77 2.978c1.143.605 1.832.632 2.054.187.26-.519-.087-1.034-1.113-1.473-.911-.39-2.175-.608-3.55-.608.845.766 1.787 1.459 2.609 1.894zM6.559 18.789c.14.223.693.16 1.425-.413.827-.648 1.61-1.747 2.208-3.206-2.563 1.064-4.102 2.867-3.633 3.62zm5.345-10.97c.088-1.793-.351-2.48-1.146-2.28-.473.119-.564 1.05-.056 2.405.213.566.52 1.188.908 1.859.18-.858.268-1.453.294-1.984z",fill:"#E2514A",fillRule:"nonzero"}))};return"application"===n&&-1!==["zip","x-7z-compressed","x-rar-compressed","x-tar","x-gzip","x-apple-diskimage"].indexOf(i)?{color:"#00C469",icon:(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",width:"25",height:"25",viewBox:"0 0 25 25"},(0,h.h)("path",{d:"M10.45 2.05h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V2.55a.5.5 0 0 1 .5-.5zm2.05 1.024h1.05a.5.5 0 0 1 .5.5V3.6a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5v-.001zM10.45 0h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5V.5a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 3.074h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-2.05 1.024h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm-2.05 1.025h1.05a.5.5 0 0 1 .5.5v.025a.5.5 0 0 1-.5.5h-1.05a.5.5 0 0 1-.5-.5v-.025a.5.5 0 0 1 .5-.5zm2.05 1.025h1.05a.5.5 0 0 1 .5.5v.024a.5.5 0 0 1-.5.5H12.5a.5.5 0 0 1-.5-.5v-.024a.5.5 0 0 1 .5-.5zm-1.656 3.074l-.82 5.946c.52.302 1.174.458 1.976.458.803 0 1.455-.156 1.975-.458l-.82-5.946h-2.311zm0-1.025h2.312c.512 0 .946.378 1.015.885l.82 5.946c.056.412-.142.817-.501 1.026-.686.398-1.515.597-2.49.597-.974 0-1.804-.199-2.49-.597a1.025 1.025 0 0 1-.5-1.026l.819-5.946c.07-.507.503-.885 1.015-.885zm.545 6.6a.5.5 0 0 1-.397-.561l.143-.999a.5.5 0 0 1 .495-.429h.74a.5.5 0 0 1 .495.43l.143.998a.5.5 0 0 1-.397.561c-.404.08-.819.08-1.222 0z",fill:"#00C469",fillRule:"nonzero"}))}:t}function Dn(e){var t=e.file;if(t.preview)return(0,h.h)("img",{className:"uppy-Dashboard-Item-previewImg",alt:t.name,src:t.preview});var n=Sn(t.type),i=n.color,r=n.icon;return(0,h.h)("div",{className:"uppy-Dashboard-Item-previewIconWrap"},(0,h.h)("span",{className:"uppy-Dashboard-Item-previewIcon",style:{color:i}},r),(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-Dashboard-Item-previewIconBg",width:"58",height:"76",viewBox:"0 0 58 76"},(0,h.h)("rect",{fill:"#FFF",width:"58",height:"76",rx:"3",fillRule:"evenodd"})))}function Zn(e){var t=e.file,n=e.toggleFileCard,i=e.i18n,r=e.metaFields,a=t.missingRequiredMetaFields;if(null==a||!a.length)return null;var o=a.map((function(e){return function(e,t){var n=t.filter((function(t){return t.id===e}));return n[0].name}(e,r)})).join(", ");return(0,h.h)("div",{className:"uppy-Dashboard-Item-errorMessage"},i("missingRequiredMetaFields",{smart_count:a.length,fields:o})," ",(0,h.h)("button",{type:"button",class:"uppy-u-reset uppy-Dashboard-Item-errorMessageBtn",onClick:function(){return n(!0,t.id)}},i("editFile")))}function xn(e){return(0,h.h)("div",{className:"uppy-Dashboard-Item-previewInnerWrap",style:{backgroundColor:Sn(e.file.type).color}},e.showLinkToFileUploadResult&&e.file.uploadURL&&(0,h.h)("a",{className:"uppy-Dashboard-Item-previewLink",href:e.file.uploadURL,rel:"noreferrer noopener",target:"_blank","aria-label":e.file.meta.name},(0,h.h)("span",{hidden:!0},e.file.meta.name)),(0,h.h)(Dn,{file:e.file}),(0,h.h)(Zn,{file:e.file,i18n:e.i18n,toggleFileCard:e.toggleFileCard,metaFields:e.metaFields}))}function Tn(e){return e.isUploaded?e.i18n("uploadComplete"):e.error?e.i18n("retryUpload"):e.resumableUploads?e.file.isPaused?e.i18n("resumeUpload"):e.i18n("pauseUpload"):e.individualCancellation?e.i18n("cancelUpload"):""}function Bn(e){return(0,h.h)("div",{className:"uppy-Dashboard-Item-progress"},(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-progressIndicator",type:"button","aria-label":Tn(e),title:Tn(e),onClick:function(){return function(e){e.isUploaded||(!e.error||e.hideRetryButton?e.resumableUploads&&!e.hidePauseResumeButton?e.uppy.pauseResume(e.file.id):e.individualCancellation&&!e.hideCancelButton&&e.uppy.removeFile(e.file.id):e.uppy.retryUpload(e.file.id))}(e)}},e.children))}function On(e){var t=e.children;return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",width:"70",height:"70",viewBox:"0 0 36 36",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--circle"},t)}function An(e){var t=e.progress,n=2*Math.PI*15;return(0,h.h)("g",null,(0,h.h)("circle",{className:"uppy-Dashboard-Item-progressIcon--bg",r:"15",cx:"18",cy:"18","stroke-width":"2",fill:"none"}),(0,h.h)("circle",{className:"uppy-Dashboard-Item-progressIcon--progress",r:"15",cx:"18",cy:"18",transform:"rotate(-90, 18, 18)",fill:"none","stroke-width":"2","stroke-dasharray":n,"stroke-dashoffset":n-n/100*t}))}function Rn(e){return e.file.progress.uploadStarted?e.isUploaded?(0,h.h)("div",{className:"uppy-Dashboard-Item-progress"},(0,h.h)("div",{className:"uppy-Dashboard-Item-progressIndicator"},(0,h.h)(On,null,(0,h.h)("circle",{r:"15",cx:"18",cy:"18",fill:"#1bb240"}),(0,h.h)("polygon",{className:"uppy-Dashboard-Item-progressIcon--check",transform:"translate(2, 3)",points:"14 22.5 7 15.2457065 8.99985857 13.1732815 14 18.3547104 22.9729883 9 25 11.1005634"})))):e.recoveredState?void 0:e.error&&!e.hideRetryButton?(0,h.h)(Bn,e,(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-Item-progressIcon--retry",width:"28",height:"31",viewBox:"0 0 16 19"},(0,h.h)("path",{d:"M16 11a8 8 0 1 1-8-8v2a6 6 0 1 0 6 6h2z"}),(0,h.h)("path",{d:"M7.9 3H10v2H7.9z"}),(0,h.h)("path",{d:"M8.536.5l3.535 3.536-1.414 1.414L7.12 1.914z"}),(0,h.h)("path",{d:"M10.657 2.621l1.414 1.415L8.536 7.57 7.12 6.157z"}))):e.resumableUploads&&!e.hidePauseResumeButton?(0,h.h)(Bn,e,(0,h.h)(On,null,(0,h.h)(An,{progress:e.file.progress.percentage}),e.file.isPaused?(0,h.h)("polygon",{className:"uppy-Dashboard-Item-progressIcon--play",transform:"translate(3, 3)",points:"12 20 12 10 20 15"}):(0,h.h)("g",{className:"uppy-Dashboard-Item-progressIcon--pause",transform:"translate(14.5, 13)"},(0,h.h)("rect",{x:"0",y:"0",width:"2",height:"10",rx:"0"}),(0,h.h)("rect",{x:"5",y:"0",width:"2",height:"10",rx:"0"})))):e.resumableUploads||!e.individualCancellation||e.hideCancelButton?(0,h.h)("div",{className:"uppy-Dashboard-Item-progress"},(0,h.h)("div",{className:"uppy-Dashboard-Item-progressIndicator"},(0,h.h)(On,null,(0,h.h)(An,{progress:e.file.progress.percentage})))):(0,h.h)(Bn,e,(0,h.h)(On,null,(0,h.h)(An,{progress:e.file.progress.percentage}),(0,h.h)("polygon",{className:"cancel",transform:"translate(2, 2)",points:"19.8856516 11.0625 16 14.9481516 12.1019737 11.0625 11.0625 12.1143484 14.9481516 16 11.0625 19.8980263 12.1019737 20.9375 16 17.0518484 19.8856516 20.9375 20.9375 19.8980263 17.0518484 16 20.9375 12"}))):null}var Mn=n(35604),Un="...";function In(e,t){if(0===t)return"";if(e.length<=t)return e;if(t<=Un.length+1)return"".concat(e.slice(0,t-1),"\u2026");var n=t-Un.length,i=Math.ceil(n/2),r=Math.floor(n/2);return e.slice(0,i)+Un+e.slice(-r)}var Nn=function(e){var t=e.file,n=e.onClick;return t.error?(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-errorDetails","aria-label":t.error,"data-microtip-position":"bottom","data-microtip-size":"medium",onClick:n,type:"button"},"?"):null};function En(e){var t=e.file;return(0,h.h)("div",{className:"uppy-Dashboard-Item-fileInfo","data-uppy-file-source":t.source},(0,h.h)("div",{className:"uppy-Dashboard-Item-fileName"},function(e){var t=e.file.meta,n=t.author,i=t.name;return(0,h.h)("div",{className:"uppy-Dashboard-Item-name",title:i},In(i,e.singleFile?200:e.containerWidth<=352?35:e.containerWidth<=576?60:n?20:30))}(e),(0,h.h)(Nn,{file:e.file,onClick:function(){return alert(e.file.error)}})),(0,h.h)("div",{className:"uppy-Dashboard-Item-status"},function(e){var t=e.file.meta.author,n=e.file.remote.providerName;return t?(0,h.h)("div",{className:"uppy-Dashboard-Item-author"},(0,h.h)("a",{href:"".concat(t.url,"?utm_source=Companion&utm_medium=referral"),target:"_blank",rel:"noopener noreferrer"},In(t.name,13)),n?(0,h.h)(h.HY,null," ".concat("\xb7"," "),n," ".concat("\xb7"," ")):null):null}(e),function(e){return e.file.size&&(0,h.h)("div",{className:"uppy-Dashboard-Item-statusSize"},Mn(e.file.size))}(e),function(e){return e.file.isGhost&&(0,h.h)("span",null," \u2022 ",(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-reSelect",type:"button",onClick:e.toggleAddFilesPanel},e.i18n("reSelect")))}(e)),(0,h.h)(Zn,{file:e.file,i18n:e.i18n,toggleFileCard:e.toggleFileCard,metaFields:e.metaFields}))}function Ln(e){var t=e.file,n=e.uploadInProgressOrComplete,i=e.metaFields,r=e.canEditFile,a=e.i18n,o=e.onClick;return!n&&i&&i.length>0||!n&&r(t)?(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Dashboard-Item-action uppy-Dashboard-Item-action--edit",type:"button","aria-label":a("editFileWithFilename",{file:t.meta.name}),title:a("editFileWithFilename",{file:t.meta.name}),onClick:function(){return o()}},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 14"},(0,h.h)("g",{fillRule:"evenodd"},(0,h.h)("path",{d:"M1.5 10.793h2.793A1 1 0 0 0 5 10.5L11.5 4a1 1 0 0 0 0-1.414L9.707.793a1 1 0 0 0-1.414 0l-6.5 6.5A1 1 0 0 0 1.5 8v2.793zm1-1V8L9 1.5l1.793 1.793-6.5 6.5H2.5z",fillRule:"nonzero"}),(0,h.h)("rect",{x:"1",y:"12.293",width:"11",height:"1",rx:".5"}),(0,h.h)("path",{fillRule:"nonzero",d:"M6.793 2.5L9.5 5.207l.707-.707L7.5 1.793z"})))):null}function zn(e){var t=e.i18n,n=e.onClick,i=e.file;return(0,h.h)("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--remove",type:"button","aria-label":t("removeFile",{file:i.meta.name}),title:t("removeFile",{file:i.meta.name}),onClick:function(){return n()}},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"18",height:"18",viewBox:"0 0 18 18"},(0,h.h)("path",{d:"M9 0C4.034 0 0 4.034 0 9s4.034 9 9 9 9-4.034 9-9-4.034-9-9-9z"}),(0,h.h)("path",{fill:"#FFF",d:"M13 12.222l-.778.778L9 9.778 5.778 13 5 12.222 8.222 9 5 5.778 5.778 5 9 8.222 12.222 5l.778.778L9.778 9z"})))}var Vn=function(e,t){var n,i;(n=t.file.uploadURL,i=t.i18n("copyLinkToClipboardFallback"),void 0===i&&(i="Copy the URL below"),new Promise((function(e){var t=document.createElement("textarea");t.setAttribute("style",{position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),t.value=n,document.body.appendChild(t),t.select();var r=function(){document.body.removeChild(t),window.prompt(i,n),e()};try{return document.execCommand("copy")?(document.body.removeChild(t),e()):r()}catch(a){return document.body.removeChild(t),r()}}))).then((function(){t.uppy.log("Link copied to clipboard."),t.uppy.info(t.i18n("copyLinkToClipboardSuccess"),"info",3e3)})).catch(t.uppy.log).then((function(){return e.target.focus({preventScroll:!0})}))};function Wn(e){var t=e.i18n;return(0,h.h)("button",{className:"uppy-u-reset uppy-Dashboard-Item-action uppy-Dashboard-Item-action--copyLink",type:"button","aria-label":t("copyLink"),title:t("copyLink"),onClick:function(t){return Vn(t,e)}},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"14",height:"14",viewBox:"0 0 14 12"},(0,h.h)("path",{d:"M7.94 7.703a2.613 2.613 0 0 1-.626 2.681l-.852.851a2.597 2.597 0 0 1-1.849.766A2.616 2.616 0 0 1 2.764 7.54l.852-.852a2.596 2.596 0 0 1 2.69-.625L5.267 7.099a1.44 1.44 0 0 0-.833.407l-.852.851a1.458 1.458 0 0 0 1.03 2.486c.39 0 .755-.152 1.03-.426l.852-.852c.231-.231.363-.522.406-.824l1.04-1.038zm4.295-5.937A2.596 2.596 0 0 0 10.387 1c-.698 0-1.355.272-1.849.766l-.852.851a2.614 2.614 0 0 0-.624 2.688l1.036-1.036c.041-.304.173-.6.407-.833l.852-.852c.275-.275.64-.426 1.03-.426a1.458 1.458 0 0 1 1.03 2.486l-.852.851a1.442 1.442 0 0 1-.824.406l-1.04 1.04a2.596 2.596 0 0 0 2.683-.628l.851-.85a2.616 2.616 0 0 0 0-3.697zm-6.88 6.883a.577.577 0 0 0 .82 0l3.474-3.474a.579.579 0 1 0-.819-.82L5.355 7.83a.579.579 0 0 0 0 .819z"})))}function jn(e){var t=e.uppy,n=e.file,i=e.uploadInProgressOrComplete,r=e.canEditFile,a=e.metaFields,o=e.showLinkToFileUploadResult,s=e.showRemoveButton,l=e.i18n,u=e.toggleFileCard,p=e.openFileEditor;return(0,h.h)("div",{className:"uppy-Dashboard-Item-actionWrapper"},(0,h.h)(Ln,{i18n:l,file:n,uploadInProgressOrComplete:i,canEditFile:r,metaFields:a,onClick:function(){a&&a.length>0?u(!0,n.id):p(n)}}),o&&n.uploadURL?(0,h.h)(Wn,{file:n,uppy:t,i18n:l}):null,s?(0,h.h)(zn,{i18n:l,file:n,uppy:t,onClick:function(){return e.uppy.removeFile(n.id,"removed-by-user")}}):null)}var Hn=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){var e=this.props.file;e.preview||this.props.handleRequestThumbnail(e)}},{key:"shouldComponentUpdate",value:function(e){return!Pn(this.props,e)}},{key:"componentDidUpdate",value:function(){var e=this.props.file;e.preview||this.props.handleRequestThumbnail(e)}},{key:"componentWillUnmount",value:function(){var e=this.props.file;e.preview||this.props.handleCancelThumbnail(e)}},{key:"render",value:function(){var e=this.props.file,t=e.progress.preprocess||e.progress.postprocess,n=e.progress.uploadComplete&&!t&&!e.error,i=e.progress.uploadStarted||t,r=e.progress.uploadStarted&&!e.progress.uploadComplete||t,a=e.error||!1,o=e.isGhost,s=(this.props.individualCancellation||!r)&&!n;n&&this.props.showRemoveButtonAfterComplete&&(s=!0);var l=C({"uppy-Dashboard-Item":!0,"is-inprogress":r&&!this.props.recoveredState,"is-processing":t,"is-complete":n,"is-error":!!a,"is-resumable":this.props.resumableUploads,"is-noIndividualCancellation":!this.props.individualCancellation,"is-ghost":o});return(0,h.h)("div",{className:l,id:"uppy_".concat(e.id),role:this.props.role},(0,h.h)("div",{className:"uppy-Dashboard-Item-preview"},(0,h.h)(xn,{file:e,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,i18n:this.props.i18n,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields}),(0,h.h)(Rn,{uppy:this.props.uppy,file:e,error:a,isUploaded:n,hideRetryButton:this.props.hideRetryButton,hideCancelButton:this.props.hideCancelButton,hidePauseResumeButton:this.props.hidePauseResumeButton,recoveredState:this.props.recoveredState,showRemoveButtonAfterComplete:this.props.showRemoveButtonAfterComplete,resumableUploads:this.props.resumableUploads,individualCancellation:this.props.individualCancellation,i18n:this.props.i18n})),(0,h.h)("div",{className:"uppy-Dashboard-Item-fileInfoAndButtons"},(0,h.h)(En,{file:e,id:this.props.id,acquirers:this.props.acquirers,containerWidth:this.props.containerWidth,i18n:this.props.i18n,toggleAddFilesPanel:this.props.toggleAddFilesPanel,toggleFileCard:this.props.toggleFileCard,metaFields:this.props.metaFields,singleFile:this.props.singleFile}),(0,h.h)(jn,{file:e,metaFields:this.props.metaFields,showLinkToFileUploadResult:this.props.showLinkToFileUploadResult,showRemoveButton:s,canEditFile:this.props.canEditFile,uploadInProgressOrComplete:i,toggleFileCard:this.props.toggleFileCard,openFileEditor:this.props.openFileEditor,uppy:this.props.uppy,i18n:this.props.i18n})))}}]),n}(h.wA),qn=["data","rowHeight","renderRow","overscanCount"];function _n(){return _n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_n.apply(this,arguments)}var Gn={position:"relative",width:"100%",minHeight:"100%"},Kn={position:"absolute",top:0,left:0,width:"100%",overflow:"visible"},Xn=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).handleScroll=function(){i.setState({offset:i.base.scrollTop})},i.handleResize=function(){i.resize()},i.focusElement=null,i.state={offset:0,height:0},i}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.resize(),window.addEventListener("resize",this.handleResize)}},{key:"componentWillUpdate",value:function(){this.base.contains(document.activeElement)&&(this.focusElement=document.activeElement)}},{key:"componentDidUpdate",value:function(){this.focusElement&&this.focusElement.parentNode&&document.activeElement!==this.focusElement&&this.focusElement.focus(),this.focusElement=null,this.resize()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"resize",value:function(){this.state.height!==this.base.offsetHeight&&this.setState({height:this.base.offsetHeight})}},{key:"render",value:function(e){var t=e.data,n=e.rowHeight,r=e.renderRow,a=e.overscanCount,o=void 0===a?10:a,s=(0,J.Z)(e,qn),l=this.state,u=l.offset,p=l.height,c=Math.floor(u/n),d=Math.floor(p/n);o&&(c=Math.max(0,c-c%o),d+=o);var f=c+d+4,v=t.slice(c,f),m=(0,i.Z)((0,i.Z)({},Gn),{},{height:t.length*n}),y=(0,i.Z)((0,i.Z)({},Kn),{},{top:c*n});return(0,h.h)("div",_n({onScroll:this.handleScroll},s),(0,h.h)("div",{role:"presentation",style:m},(0,h.h)("div",{role:"presentation",style:y},v.map(r))))}}]),n}(h.wA);function Yn(){return Yn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Yn.apply(this,arguments)}var Qn,$n=function(e){var t=1===e.itemsPerRow?71:200,n={id:e.id,error:e.error,i18n:e.i18n,uppy:e.uppy,acquirers:e.acquirers,resumableUploads:e.resumableUploads,individualCancellation:e.individualCancellation,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,isWide:e.isWide,metaFields:e.metaFields,recoveredState:e.recoveredState,singleFile:e.singleFile,toggleFileCard:e.toggleFileCard,handleRequestThumbnail:e.handleRequestThumbnail,handleCancelThumbnail:e.handleCancelThumbnail},i=Object.keys(e.files);e.recoveredState&&i.sort((function(t,n){return e.files[n].isGhost-e.files[t].isGhost}));var r=function(e,t){var n=[],i=[];return e.forEach((function(e){i.length<t?i.push(e):(n.push(i),i=[e])})),i.length&&n.push(i),n}(i,e.itemsPerRow),a=function(t){return(0,h.h)("div",{class:"uppy-Dashboard-filesInner",role:"presentation",key:t[0]},t.map((function(t){return(0,h.h)(Hn,Yn({key:t,uppy:e.uppy},n,{role:"listitem",openFileEditor:e.openFileEditor,canEditFile:e.canEditFile,toggleAddFilesPanel:e.toggleAddFilesPanel,file:e.files[t]}))})))};return e.singleFile?(0,h.h)("div",{class:"uppy-Dashboard-files"},a(r[0])):(0,h.h)(Xn,{class:"uppy-Dashboard-files",role:"list",data:r,renderRow:a,rowHeight:t})};Qn=Symbol.for("uppy test: disable unused locale key warning");var Jn=function(e,t){(0,o.Z)(i,e);var n=(0,s.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=n.apply(this,arguments)).triggerFileInputClick=function(){e.fileInput.click()},e.triggerFolderInputClick=function(){e.folderInput.click()},e.triggerVideoCameraInputClick=function(){e.mobileVideoFileInput.click()},e.triggerPhotoCameraInputClick=function(){e.mobilePhotoFileInput.click()},e.onFileInputChange=function(t){e.props.handleInputChange(t),t.target.value=null},e.renderHiddenInput=function(t,n){return(0,h.h)("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,webkitdirectory:t,type:"file",name:"files[]",multiple:1!==e.props.maxNumberOfFiles,onChange:e.onFileInputChange,accept:e.props.allowedFileTypes,ref:n})},e.renderHiddenCameraInput=function(t,n,i){var r={photo:"image/*",video:"video/*"}[t];return(0,h.h)("input",{className:"uppy-Dashboard-input",hidden:!0,"aria-hidden":"true",tabIndex:-1,type:"file",name:"camera-".concat(t),onChange:e.onFileInputChange,capture:n,accept:r,ref:i})},e.renderMyDeviceAcquirer=function(){return(0,h.h)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MyDevice"},(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:e.triggerFileInputClick},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,h.h)("g",{fill:"none",fillRule:"evenodd"},(0,h.h)("rect",{className:"uppy-ProviderIconBg",width:"32",height:"32",rx:"16",fill:"#2275D7"}),(0,h.h)("path",{d:"M21.973 21.152H9.863l-1.108-5.087h14.464l-1.246 5.087zM9.935 11.37h3.958l.886 1.444a.673.673 0 0 0 .585.316h6.506v1.37H9.935v-3.13zm14.898 3.44a.793.793 0 0 0-.616-.31h-.978v-2.126c0-.379-.275-.613-.653-.613H15.75l-.886-1.445a.673.673 0 0 0-.585-.316H9.232c-.378 0-.667.209-.667.587V14.5h-.782a.793.793 0 0 0-.61.303.795.795 0 0 0-.155.663l1.45 6.633c.078.36.396.618.764.618h13.354c.36 0 .674-.246.76-.595l1.631-6.636a.795.795 0 0 0-.144-.675z",fill:"#FFF"}))),(0,h.h)("div",{className:"uppy-DashboardTab-name"},e.props.i18n("myDevice"))))},e.renderPhotoCamera=function(){return(0,h.h)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobilePhotoCamera"},(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:e.triggerPhotoCameraInputClick},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,h.h)("g",{fill:"none",fillRule:"evenodd"},(0,h.h)("rect",{className:"uppy-ProviderIconBg",fill:"#03BFEF",width:"32",height:"32",rx:"16"}),(0,h.h)("path",{d:"M22 11c1.133 0 2 .867 2 2v7.333c0 1.134-.867 2-2 2H10c-1.133 0-2-.866-2-2V13c0-1.133.867-2 2-2h2.333l1.134-1.733C13.6 9.133 13.8 9 14 9h4c.2 0 .4.133.533.267L19.667 11H22zm-6 1.533a3.764 3.764 0 0 0-3.8 3.8c0 2.129 1.672 3.801 3.8 3.801s3.8-1.672 3.8-3.8c0-2.13-1.672-3.801-3.8-3.801zm0 6.261c-1.395 0-2.46-1.066-2.46-2.46 0-1.395 1.065-2.461 2.46-2.461s2.46 1.066 2.46 2.46c0 1.395-1.065 2.461-2.46 2.461z",fill:"#FFF",fillRule:"nonzero"}))),(0,h.h)("div",{className:"uppy-DashboardTab-name"},e.props.i18n("takePictureBtn"))))},e.renderVideoCamera=function(){return(0,h.h)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":"MobileVideoCamera"},(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-uppy-super-focusable":!0,onClick:e.triggerVideoCameraInputClick},(0,h.h)("svg",{"aria-hidden":"true",width:"32",height:"32",viewBox:"0 0 32 32"},(0,h.h)("rect",{fill:"#1abc9c",width:"32",height:"32",rx:"16"}),(0,h.h)("path",{fill:"#FFF",fillRule:"nonzero",d:"m21.254 14.277 2.941-2.588c.797-.313 1.243.818 1.09 1.554-.01 2.094.02 4.189-.017 6.282-.126.915-1.145 1.08-1.58.34l-2.434-2.142c-.192.287-.504 1.305-.738.468-.104-1.293-.028-2.596-.05-3.894.047-.312.381.823.426 1.069.063-.384.206-.744.362-1.09zm-12.939-3.73c3.858.013 7.717-.025 11.574.02.912.129 1.492 1.237 1.351 2.217-.019 2.412.04 4.83-.03 7.239-.17 1.025-1.166 1.59-2.029 1.429-3.705-.012-7.41.025-11.114-.019-.913-.129-1.492-1.237-1.352-2.217.018-2.404-.036-4.813.029-7.214.136-.82.83-1.473 1.571-1.454z "})),(0,h.h)("div",{className:"uppy-DashboardTab-name"},e.props.i18n("recordVideoBtn"))))},e.renderBrowseButton=function(t,n){var i=e.props.acquirers.length;return(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-browse",onClick:n,"data-uppy-super-focusable":0===i},t)},e.renderDropPasteBrowseTagline=function(){var t=e.props.acquirers.length,n=e.renderBrowseButton(e.props.i18n("browseFiles"),e.triggerFileInputClick),i=e.renderBrowseButton(e.props.i18n("browseFolders"),e.triggerFolderInputClick),r=e.props.fileManagerSelectionType,a=r.charAt(0).toUpperCase()+r.slice(1);return(0,h.h)("div",{class:"uppy-Dashboard-AddFiles-title"},e.props.disableLocalFiles?e.props.i18n("importFiles"):t>0?e.props.i18nArray("dropPasteImport".concat(a),{browseFiles:n,browseFolders:i,browse:n}):e.props.i18nArray("dropPaste".concat(a),{browseFiles:n,browseFolders:i,browse:n}))},e.renderAcquirer=function(t){return(0,h.h)("div",{className:"uppy-DashboardTab",role:"presentation","data-uppy-acquirer-id":t.id},(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-DashboardTab-btn",role:"tab",tabIndex:0,"data-cy":t.id,"aria-controls":"uppy-DashboardContent-panel--".concat(t.id),"aria-selected":e.props.activePickerPanel.id===t.id,"data-uppy-super-focusable":!0,onClick:function(){return e.props.showPanel(t.id)}},t.icon(),(0,h.h)("div",{className:"uppy-DashboardTab-name"},t.name)))},e.renderAcquirers=function(t){var n=(0,ce.Z)(t),i=n.splice(t.length-2,t.length);return(0,h.h)(h.HY,null,n.map((function(t){return e.renderAcquirer(t)})),(0,h.h)("span",{role:"presentation",style:{"white-space":"nowrap"}},i.map((function(t){return e.renderAcquirer(t)}))))},e.renderSourcesList=function(t,n){var i=e.props,r=i.showNativePhotoCameraButton,a=i.showNativeVideoCameraButton;return(0,h.h)("div",{className:"uppy-Dashboard-AddFiles-list",role:"tablist"},!n&&e.renderMyDeviceAcquirer(),!n&&r&&e.renderPhotoCamera(),!n&&a&&e.renderVideoCamera(),t.length>0&&e.renderAcquirers(t))},e}return(0,a.Z)(i,[{key:t,value:function(){this.props.i18nArray("dropPasteBoth"),this.props.i18nArray("dropPasteFiles"),this.props.i18nArray("dropPasteFolders"),this.props.i18nArray("dropPasteImportBoth"),this.props.i18nArray("dropPasteImportFiles"),this.props.i18nArray("dropPasteImportFolders")}},{key:"renderPoweredByUppy",value:function(){var e=(0,this.props.i18nArray)("poweredBy",{uppy:(0,h.h)("span",null,(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-Dashboard-poweredByIcon",width:"11",height:"11",viewBox:"0 0 11 11"},(0,h.h)("path",{d:"M7.365 10.5l-.01-4.045h2.612L5.5.806l-4.467 5.65h2.604l.01 4.044h3.718z",fillRule:"evenodd"})),(0,h.h)("span",{className:"uppy-Dashboard-poweredByUppy"},"Uppy"))});return(0,h.h)("a",{tabIndex:"-1",href:"https://uppy.io",rel:"noreferrer noopener",target:"_blank",className:"uppy-Dashboard-poweredBy"},e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.showNativePhotoCameraButton,i=t.showNativeVideoCameraButton,r=t.nativeCameraFacingMode;return(0,h.h)("div",{className:"uppy-Dashboard-AddFiles"},this.renderHiddenInput(!1,(function(t){e.fileInput=t})),this.renderHiddenInput(!0,(function(t){e.folderInput=t})),n&&this.renderHiddenCameraInput("photo",r,(function(t){e.mobilePhotoFileInput=t})),i&&this.renderHiddenCameraInput("video",r,(function(t){e.mobileVideoFileInput=t})),this.renderDropPasteBrowseTagline(),this.renderSourcesList(this.props.acquirers,this.props.disableLocalFiles),(0,h.h)("div",{className:"uppy-Dashboard-AddFiles-info"},this.props.note&&(0,h.h)("div",{className:"uppy-Dashboard-note"},this.props.note),this.props.proudlyDisplayPoweredByUppy&&this.renderPoweredByUppy(this.props)))}}]),i}(h.wA,Qn),ei=Jn,ti=function(e){return(0,h.h)("div",{className:C("uppy-Dashboard-AddFilesPanel",e.className),"data-uppy-panelType":"AddFiles","aria-hidden":e.showAddFilesPanel},(0,h.h)("div",{className:"uppy-DashboardContent-bar"},(0,h.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18n("addingMoreFiles")),(0,h.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:function(){return e.toggleAddFilesPanel(!1)}},e.i18n("back"))),(0,h.h)(ei,e))};var ni=function(e){var t=e.target.tagName;"INPUT"!==t&&"TEXTAREA"!==t?(e.preventDefault(),e.stopPropagation()):e.stopPropagation()};var ii=function(e){var t=e.activePickerPanel,n=e.className,i=e.hideAllPanels,r=e.i18n,a=e.state,o=e.uppy;return(0,h.h)("div",{className:C("uppy-DashboardContent-panel",n),role:"tabpanel","data-uppy-panelType":"PickerPanel",id:"uppy-DashboardContent-panel--".concat(t.id),onDragOver:ni,onDragLeave:ni,onDrop:ni,onPaste:ni},(0,h.h)("div",{className:"uppy-DashboardContent-bar"},(0,h.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},r("importFrom",{name:t.name})),(0,h.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:i},r("cancel"))),(0,h.h)("div",{className:"uppy-DashboardContent-panelBody"},o.getPlugin(t.id).render(a)))};var ri=function(e){var t=e.files[e.fileCardFor];return(0,h.h)("div",{className:C("uppy-DashboardContent-panel",e.className),role:"tabpanel","data-uppy-panelType":"FileEditor",id:"uppy-DashboardContent-panel--editor"},(0,h.h)("div",{className:"uppy-DashboardContent-bar"},(0,h.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},e.i18nArray("editing",{file:(0,h.h)("span",{className:"uppy-DashboardContent-titleFile"},t.meta?t.meta.name:t.name)})),(0,h.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:e.hideAllPanels},e.i18n("cancel")),(0,h.h)("button",{className:"uppy-DashboardContent-save",type:"button",onClick:e.saveFileEditor},e.i18n("save"))),(0,h.h)("div",{className:"uppy-DashboardContent-panelBody"},e.editors.map((function(t){return e.uppy.getPlugin(t.id).render(e.state)}))))},ai="error",oi="waiting",si="preprocessing",li="uploading",ui="postprocessing",pi="complete",ci="paused";function di(e){var t=e.files,n=e.i18n,i=e.isAllComplete,r=e.isAllErrored,a=e.isAllPaused,o=e.inProgressNotPausedFiles,s=e.newFiles,l=e.processingFiles,u=function(e,t,n,i){if(void 0===i&&(i={}),e)return ai;if(t)return pi;if(n)return ci;for(var r=oi,a=Object.keys(i),o=0;o<a.length;o++){var s=i[a[o]].progress;if(s.uploadStarted&&!s.uploadComplete)return li;s.preprocess&&r!==li&&(r=si),s.postprocess&&r!==li&&r!==si&&(r=ui)}return r}(r,i,a,t);switch(u){case"uploading":return n("uploadingXFiles",{smart_count:o.length});case"preprocessing":case"postprocessing":return n("processingXFiles",{smart_count:l.length});case"paused":return n("uploadPaused");case"waiting":return n("xFilesSelected",{smart_count:s.length});case"complete":return n("uploadComplete")}}var hi=function(e){var t=e.i18n,n=e.isAllComplete,i=e.hideCancelButton,r=e.maxNumberOfFiles,a=e.toggleAddFilesPanel,o=e.uppy,s=e.allowNewUpload;return s&&r&&(s=e.totalFileCount<e.maxNumberOfFiles),(0,h.h)("div",{className:"uppy-DashboardContent-bar"},n||i?(0,h.h)("div",null):(0,h.h)("button",{className:"uppy-DashboardContent-back",type:"button",onClick:function(){return o.cancelAll()}},t("cancel")),(0,h.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},(0,h.h)(di,e)),s?(0,h.h)("button",{className:"uppy-DashboardContent-addMore",type:"button","aria-label":t("addMoreFiles"),title:t("addMoreFiles"),onClick:function(){return a(!0)}},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"15",height:"15",viewBox:"0 0 15 15"},(0,h.h)("path",{d:"M8 6.5h6a.5.5 0 0 1 .5.5v.5a.5.5 0 0 1-.5.5H8v6a.5.5 0 0 1-.5.5H7a.5.5 0 0 1-.5-.5V8h-6a.5.5 0 0 1-.5-.5V7a.5.5 0 0 1 .5-.5h6v-6A.5.5 0 0 1 7 0h.5a.5.5 0 0 1 .5.5v6z"})),(0,h.h)("span",{className:"uppy-DashboardContent-addMoreCaption"},t("addMore"))):(0,h.h)("div",null))},fi=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var a;(0,r.Z)(this,n),(a=t.call(this,e)).form=document.createElement("form"),a.updateMeta=function(e,t){a.setState((function(n){var r=n.formState;return{formState:(0,i.Z)((0,i.Z)({},r),{},(0,c.Z)({},t,e))}}))},a.handleSave=function(e){e.preventDefault();var t=a.props.fileCardFor;a.props.saveFileCard(a.state.formState,t)},a.handleCancel=function(){var e=a.props.files[a.props.fileCardFor];a.props.uppy.emit("file-editor:cancel",e),a.props.toggleFileCard(!1)},a.saveOnEnter=function(e){if(13===e.keyCode){e.stopPropagation(),e.preventDefault();var t=a.props.files[a.props.fileCardFor];a.props.saveFileCard(a.state.formState,t.id)}},a.renderMetaFields=function(){var e=a.getMetaFields()||[],t={text:"uppy-u-reset uppy-c-textInput uppy-Dashboard-FileCard-input"};return e.map((function(e){var n="uppy-Dashboard-FileCard-input-".concat(e.id),i=a.props.requiredMetaFields.includes(e.id);return(0,h.h)("fieldset",{key:e.id,className:"uppy-Dashboard-FileCard-fieldset"},(0,h.h)("label",{className:"uppy-Dashboard-FileCard-label",htmlFor:n},e.name),void 0!==e.render?e.render({value:a.state.formState[e.id],onChange:function(t){return a.updateMeta(t,e.id)},fieldCSSClasses:t,required:i,form:a.form.id},h.h):(0,h.h)("input",{className:t.text,id:n,form:a.form.id,type:e.type||"text",required:i,value:a.state.formState[e.id],placeholder:e.placeholder,onKeyUp:"form"in HTMLInputElement.prototype?void 0:a.saveOnEnter,onKeyDown:"form"in HTMLInputElement.prototype?void 0:a.saveOnEnter,onKeyPress:"form"in HTMLInputElement.prototype?void 0:a.saveOnEnter,onInput:function(t){return a.updateMeta(t.target.value,e.id)},"data-uppy-super-focusable":!0}))}))};var o=a.props.files[a.props.fileCardFor],s=a.getMetaFields()||[],l={};return s.forEach((function(e){l[e.id]=o.meta[e.id]||""})),a.state={formState:l},a.form.id=mn(),a}return(0,a.Z)(n,[{key:"componentWillMount",value:function(){this.form.addEventListener("submit",this.handleSave),document.body.appendChild(this.form)}},{key:"componentWillUnmount",value:function(){this.form.removeEventListener("submit",this.handleSave),document.body.removeChild(this.form)}},{key:"getMetaFields",value:function(){return"function"===typeof this.props.metaFields?this.props.metaFields(this.props.files[this.props.fileCardFor]):this.props.metaFields}},{key:"render",value:function(){var e=this,t=this.props.files[this.props.fileCardFor],n=this.props.canEditFile(t);return(0,h.h)("div",{className:C("uppy-Dashboard-FileCard",this.props.className),"data-uppy-panelType":"FileCard",onDragOver:ni,onDragLeave:ni,onDrop:ni,onPaste:ni},(0,h.h)("div",{className:"uppy-DashboardContent-bar"},(0,h.h)("div",{className:"uppy-DashboardContent-title",role:"heading","aria-level":"1"},this.props.i18nArray("editing",{file:(0,h.h)("span",{className:"uppy-DashboardContent-titleFile"},t.meta?t.meta.name:t.name)})),(0,h.h)("button",{className:"uppy-DashboardContent-back",type:"button",form:this.form.id,title:this.props.i18n("finishEditingFile"),onClick:this.handleCancel},this.props.i18n("cancel"))),(0,h.h)("div",{className:"uppy-Dashboard-FileCard-inner"},(0,h.h)("div",{className:"uppy-Dashboard-FileCard-preview",style:{backgroundColor:Sn(t.type).color}},(0,h.h)(Dn,{file:t}),n&&(0,h.h)("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-Dashboard-FileCard-edit",onClick:function(n){e.handleSave(n),e.props.openFileEditor(t)},form:this.form.id},this.props.i18n("editFile"))),(0,h.h)("div",{className:"uppy-Dashboard-FileCard-info"},this.renderMetaFields()),(0,h.h)("div",{className:"uppy-Dashboard-FileCard-actions"},(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-primary uppy-Dashboard-FileCard-actionsBtn",type:"form"in HTMLButtonElement.prototype?"submit":"button",onClick:"form"in HTMLButtonElement.prototype?void 0:this.handleSave,form:this.form.id},this.props.i18n("saveChanges")),(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-c-btn-link uppy-Dashboard-FileCard-actionsBtn",type:"button",onClick:this.handleCancel,form:this.form.id},this.props.i18n("cancel")))))}}]),n}(h.wA),vi=fi,mi="uppy-transition-slideDownUp",yi=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this,e)).state={cachedChildren:null,className:""},i}return(0,a.Z)(n,[{key:"componentWillUpdate",value:function(e){var t=this,n=this.state.cachedChildren,i=(0,h.bR)(e.children)[0];if(n===i)return null;var r={cachedChildren:i};i&&!n&&(r.className="".concat(mi,"-enter"),cancelAnimationFrame(this.animationFrame),clearTimeout(this.leaveTimeout),this.leaveTimeout=void 0,this.animationFrame=requestAnimationFrame((function(){t.setState({className:"".concat(mi,"-enter ").concat(mi,"-enter-active")}),t.enterTimeout=setTimeout((function(){t.setState({className:""})}),250)}))),n&&!i&&void 0===this.leaveTimeout&&(r.cachedChildren=n,r.className="".concat(mi,"-leave"),cancelAnimationFrame(this.animationFrame),clearTimeout(this.enterTimeout),this.enterTimeout=void 0,this.animationFrame=requestAnimationFrame((function(){t.setState({className:"".concat(mi,"-leave ").concat(mi,"-leave-active")}),t.leaveTimeout=setTimeout((function(){t.setState({cachedChildren:null,className:""})}),250)}))),this.setState(r)}},{key:"render",value:function(){var e=this.state,t=e.cachedChildren,n=e.className;return t?(0,h.Tm)(t,{className:C(n,t.props.className)}):null}}]),n}(h.wA);function gi(){return gi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},gi.apply(this,arguments)}var bi={strings:{closeModal:"Close Modal",addMoreFiles:"Add more files",addingMoreFiles:"Adding more files",importFrom:"Import from %{name}",dashboardWindowTitle:"Uppy Dashboard Window (Press escape to close)",dashboardTitle:"Uppy Dashboard",copyLinkToClipboardSuccess:"Link copied to clipboard.",copyLinkToClipboardFallback:"Copy the URL below",copyLink:"Copy link",back:"Back",removeFile:"Remove file",editFile:"Edit file",editing:"Editing %{file}",finishEditingFile:"Finish editing file",saveChanges:"Save changes",myDevice:"My Device",dropHint:"Drop your files here",uploadComplete:"Upload complete",uploadPaused:"Upload paused",resumeUpload:"Resume upload",pauseUpload:"Pause upload",retryUpload:"Retry upload",cancelUpload:"Cancel upload",xFilesSelected:{0:"%{smart_count} file selected",1:"%{smart_count} files selected"},uploadingXFiles:{0:"Uploading %{smart_count} file",1:"Uploading %{smart_count} files"},processingXFiles:{0:"Processing %{smart_count} file",1:"Processing %{smart_count} files"},poweredBy:"Powered by %{uppy}",addMore:"Add more",editFileWithFilename:"Edit file %{file}",save:"Save",cancel:"Cancel",dropPasteFiles:"Drop files here or %{browseFiles}",dropPasteFolders:"Drop files here or %{browseFolders}",dropPasteBoth:"Drop files here, %{browseFiles} or %{browseFolders}",dropPasteImportFiles:"Drop files here, %{browseFiles} or import from:",dropPasteImportFolders:"Drop files here, %{browseFolders} or import from:",dropPasteImportBoth:"Drop files here, %{browseFiles}, %{browseFolders} or import from:",importFiles:"Import files from:",browseFiles:"browse files",browseFolders:"browse folders",recoveredXFiles:{0:"We could not fully recover 1 file. Please re-select it and resume the upload.",1:"We could not fully recover %{smart_count} files. Please re-select them and resume the upload."},recoveredAllFiles:"We restored all files. You can now resume the upload.",sessionRestored:"Session restored",reSelect:"Re-select",missingRequiredMetaFields:{0:"Missing required meta field: %{fields}.",1:"Missing required meta fields: %{fields}."},takePictureBtn:"Take Picture",recordVideoBtn:"Record Video"}};function wi(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var ki=0;function Ci(e){return"__private_"+ki+++"_"+e}var Fi=yn.Z.default||yn.Z;function Pi(){var e={};return e.promise=new Promise((function(t,n){e.resolve=t,e.reject=n})),e}function Si(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",width:"30",height:"30",viewBox:"0 0 30 30"},(0,h.h)("path",{d:"M15 30c8.284 0 15-6.716 15-15 0-8.284-6.716-15-15-15C6.716 0 0 6.716 0 15c0 8.284 6.716 15 15 15zm4.258-12.676v6.846h-8.426v-6.846H5.204l9.82-12.364 9.82 12.364H19.26z"}))}var Di=Ci("generateLargeThumbnailIfSingleFile"),Zi=Ci("openFileEditorWhenFilesAdded"),xi=Ci("attachRenderFunctionToTarget"),Ti=Ci("isTargetSupported"),Bi=Ci("getAcquirers"),Oi=Ci("getProgressIndicators"),Ai=Ci("getEditors"),Ri=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,a){var o,s;(0,r.Z)(this,n),o=t.call(this,e,a),s=(0,d.Z)(o),o.removeTarget=function(e){var t=o.getPluginState().targets.filter((function(t){return t.id!==e.id}));o.setPluginState({targets:t})},o.addTarget=function(e){var t=e.id||e.constructor.name,n=e.title||t,i=e.type;if("acquirer"===i||"progressindicator"===i||"editor"===i){var r={id:t,name:n,type:i},a=o.getPluginState().targets.slice();return a.push(r),o.setPluginState({targets:a}),o.el}o.uppy.log("Dashboard: can only be targeted by plugins of types: acquirer, progressindicator, editor","error")},o.hideAllPanels=function(){var e=o.getPluginState(),t={activePickerPanel:!1,showAddFilesPanel:!1,activeOverlayType:null,fileCardFor:null,showFileEditor:!1};e.activePickerPanel===t.activePickerPanel&&e.showAddFilesPanel===t.showAddFilesPanel&&e.showFileEditor===t.showFileEditor&&e.activeOverlayType===t.activeOverlayType||o.setPluginState(t)},o.showPanel=function(e){var t=o.getPluginState().targets.filter((function(t){return"acquirer"===t.type&&t.id===e}))[0];o.setPluginState({activePickerPanel:t,activeOverlayType:"PickerPanel"}),o.uppy.emit("dashboard:show-panel",e)},o.canEditFile=function(e){var t=o.getPluginState().targets;return wi((0,d.Z)(o),Ai)[Ai](t).some((function(t){return o.uppy.getPlugin(t.id).canEditFile(e)}))},o.openFileEditor=function(e){var t=o.getPluginState().targets,n=wi((0,d.Z)(o),Ai)[Ai](t);o.setPluginState({showFileEditor:!0,fileCardFor:e.id||null,activeOverlayType:"FileEditor"}),n.forEach((function(t){o.uppy.getPlugin(t.id).selectFile(e)}))},o.saveFileEditor=function(){var e=o.getPluginState().targets;wi((0,d.Z)(o),Ai)[Ai](e).forEach((function(e){o.uppy.getPlugin(e.id).save()})),o.hideAllPanels()},o.openModal=function(){var e=Pi(),t=e.promise,n=e.resolve;if(o.savedScrollPosition=window.pageYOffset,o.savedActiveElement=document.activeElement,o.opts.disablePageScrollWhenModalOpen&&document.body.classList.add("uppy-Dashboard-isFixed"),o.opts.animateOpenClose&&o.getPluginState().isClosing){o.el.addEventListener("animationend",(function e(){o.setPluginState({isHidden:!1}),o.el.removeEventListener("animationend",e,!1),n()}),!1)}else o.setPluginState({isHidden:!1}),n();return o.opts.browserBackButtonClose&&o.updateBrowserHistory(),document.addEventListener("keydown",o.handleKeyDownInModal),o.uppy.emit("dashboard:modal-open"),t},o.closeModal=function(e){void 0===e&&(e={});var t=e.manualClose,n=void 0===t||t,i=s.getPluginState(),r=i.isHidden,a=i.isClosing;if(!r&&!a){var o,l=Pi(),u=l.promise,p=l.resolve;if(s.opts.disablePageScrollWhenModalOpen&&document.body.classList.remove("uppy-Dashboard-isFixed"),s.opts.animateOpenClose){s.setPluginState({isClosing:!0});s.el.addEventListener("animationend",(function e(){s.setPluginState({isHidden:!0,isClosing:!1}),s.superFocus.cancel(),s.savedActiveElement.focus(),s.el.removeEventListener("animationend",e,!1),p()}),!1)}else s.setPluginState({isHidden:!0}),s.superFocus.cancel(),s.savedActiveElement.focus(),p();if(document.removeEventListener("keydown",s.handleKeyDownInModal),n)if(s.opts.browserBackButtonClose)null!=(o=history.state)&&o[s.modalName]&&history.back();return s.uppy.emit("dashboard:modal-closed"),u}},o.isModalOpen=function(){return!o.getPluginState().isHidden||!1},o.requestCloseModal=function(){return o.opts.onRequestCloseModal?o.opts.onRequestCloseModal():o.closeModal()},o.setDarkModeCapability=function(e){var t=o.uppy.getState().capabilities;o.uppy.setState({capabilities:(0,i.Z)((0,i.Z)({},t),{},{darkMode:e})})},o.handleSystemDarkModeChange=function(e){var t=e.matches;o.uppy.log("[Dashboard] Dark mode is ".concat(t?"on":"off")),o.setDarkModeCapability(t)},o.toggleFileCard=function(e,t){var n=o.uppy.getFile(t);e?o.uppy.emit("dashboard:file-edit-start",n):o.uppy.emit("dashboard:file-edit-complete",n),o.setPluginState({fileCardFor:e?t:null,activeOverlayType:e?"FileCard":null})},o.toggleAddFilesPanel=function(e){o.setPluginState({showAddFilesPanel:e,activeOverlayType:e?"AddFiles":null})},o.addFiles=function(e){var t=e.map((function(e){return{source:o.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||e.webkitRelativePath||null}}}));try{o.uppy.addFiles(t)}catch(n){o.uppy.log(n)}},o.startListeningToResize=function(){o.resizeObserver=new ResizeObserver((function(e){var t=e[0].contentRect,n=t.width,i=t.height;o.uppy.log("[Dashboard] resized: ".concat(n," / ").concat(i),"debug"),o.setPluginState({containerWidth:n,containerHeight:i,areInsidesReadyToBeVisible:!0})})),o.resizeObserver.observe(o.el.querySelector(".uppy-Dashboard-inner")),o.makeDashboardInsidesVisibleAnywayTimeout=setTimeout((function(){var e=o.getPluginState(),t=!o.opts.inline&&e.isHidden;e.areInsidesReadyToBeVisible||t||(o.uppy.log("[Dashboard] resize event didn't fire on time: defaulted to mobile layout","debug"),o.setPluginState({areInsidesReadyToBeVisible:!0}))}),1e3)},o.stopListeningToResize=function(){o.resizeObserver.disconnect(),clearTimeout(o.makeDashboardInsidesVisibleAnywayTimeout)},o.recordIfFocusedOnUppyRecently=function(e){o.el.contains(e.target)?o.ifFocusedOnUppyRecently=!0:(o.ifFocusedOnUppyRecently=!1,o.superFocus.cancel())},o.disableAllFocusableElements=function(e){var t=(0,Qt.Z)(o.el.querySelectorAll(gn));e?t.forEach((function(e){var t=e.getAttribute("tabindex");t&&(e.dataset.inertTabindex=t),e.setAttribute("tabindex","-1")})):t.forEach((function(e){"inertTabindex"in e.dataset?e.setAttribute("tabindex",e.dataset.inertTabindex):e.removeAttribute("tabindex")})),o.dashboardIsDisabled=e},o.updateBrowserHistory=function(){var e;null!=(e=history.state)&&e[o.modalName]||history.pushState((0,i.Z)((0,i.Z)({},history.state),{},(0,c.Z)({},o.modalName,!0)),""),window.addEventListener("popstate",o.handlePopState,!1)},o.handlePopState=function(e){var t;!o.isModalOpen()||e.state&&e.state[o.modalName]||o.closeModal({manualClose:!1}),!o.isModalOpen()&&null!=(t=e.state)&&t[o.modalName]&&history.back()},o.handleKeyDownInModal=function(e){27===e.keyCode&&o.requestCloseModal(e),9===e.keyCode&&kn(e,o.getPluginState().activeOverlayType,o.el)},o.handleClickOutside=function(){o.opts.closeModalOnClickOutside&&o.requestCloseModal()},o.handlePaste=function(e){o.uppy.iteratePlugins((function(t){"acquirer"===t.type&&(null==t.handleRootPaste||t.handleRootPaste(e))}));var t=(0,Qt.Z)(e.clipboardData.files);t.length>0&&(o.uppy.log("[Dashboard] Files pasted"),o.addFiles(t))},o.handleInputChange=function(e){e.preventDefault();var t=(0,Qt.Z)(e.target.files);t.length>0&&(o.uppy.log("[Dashboard] Files selected through input"),o.addFiles(t))},o.handleDragOver=function(e){var t,n;e.preventDefault(),e.stopPropagation();var i=function(){var t=!0;return o.uppy.iteratePlugins((function(n){null!=n.canHandleRootDrop&&n.canHandleRootDrop(e)&&(t=!0)})),t}(),r=e.dataTransfer.types.some((function(e){return"Files"===e}));if(!i&&!r||o.opts.disabled||o.opts.disableLocalFiles&&(r||!i)||!o.uppy.getState().allowNewUpload)return e.dataTransfer.dropEffect="none",void clearTimeout(o.removeDragOverClassTimeout);e.dataTransfer.dropEffect="copy",clearTimeout(o.removeDragOverClassTimeout),o.setPluginState({isDraggingOver:!0}),null==(t=(n=o.opts).onDragOver)||t.call(n,e)},o.handleDragLeave=function(e){var t,n;e.preventDefault(),e.stopPropagation(),clearTimeout(o.removeDragOverClassTimeout),o.removeDragOverClassTimeout=setTimeout((function(){o.setPluginState({isDraggingOver:!1})}),50),null==(t=(n=o.opts).onDragLeave)||t.call(n,e)},o.handleDrop=function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t){var n,i,r,a,s;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),clearTimeout(o.removeDragOverClassTimeout),o.setPluginState({isDraggingOver:!1}),o.uppy.iteratePlugins((function(e){"acquirer"===e.type&&(null==e.handleRootDrop||e.handleRootDrop(t))})),r=!1,a=function(e){o.uppy.log(e,"error"),r||(o.uppy.info(e.message,"error"),r=!0)},e.next=9,hn(t.dataTransfer,{logDropError:a});case 9:(s=e.sent).length>0&&(o.uppy.log("[Dashboard] Files dropped"),o.addFiles(s)),null==(n=(i=o.opts).onDrop)||n.call(i,t);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.handleRequestThumbnail=function(e){o.opts.waitForThumbnailsBeforeUpload||o.uppy.emit("thumbnail:request",e)},o.handleCancelThumbnail=function(e){o.opts.waitForThumbnailsBeforeUpload||o.uppy.emit("thumbnail:cancel",e)},o.handleKeyDownInInline=function(e){9===e.keyCode&&function(e,t,n){null===t||kn(e,t,n)}(e,o.getPluginState().activeOverlayType,o.el)},o.handlePasteOnBody=function(e){o.el.contains(document.activeElement)&&o.handlePaste(e)},o.handleComplete=function(e){var t=e.failed;o.opts.closeAfterFinish&&0===t.length&&o.requestCloseModal()},o.handleCancelRestore=function(){o.uppy.emit("restore-canceled")},Object.defineProperty((0,d.Z)(o),Di,{writable:!0,value:function(){if(!o.opts.disableThumbnailGenerator){var e=o.uppy.getFiles();if(1===e.length){var t=o.uppy.getPlugin("".concat(o.id,":ThumbnailGenerator"));null==t||t.setOptions({thumbnailWidth:600});var n=(0,i.Z)((0,i.Z)({},e[0]),{},{preview:void 0});t.requestThumbnail(n).then((function(){null==t||t.setOptions({thumbnailWidth:o.opts.thumbnailWidth})}))}}}}),Object.defineProperty((0,d.Z)(o),Zi,{writable:!0,value:function(e){var t=e[0];o.canEditFile(t)&&o.openFileEditor(t)}}),o.initEvents=function(){if(o.opts.trigger&&!o.opts.inline){var e=Yt(o.opts.trigger);e?e.forEach((function(e){return e.addEventListener("click",o.openModal)})):o.uppy.log("Dashboard modal trigger not found. Make sure `trigger` is set in Dashboard options, unless you are planning to call `dashboard.openModal()` method yourself","warning")}o.startListeningToResize(),document.addEventListener("paste",o.handlePasteOnBody),o.uppy.on("plugin-remove",o.removeTarget),o.uppy.on("file-added",o.hideAllPanels),o.uppy.on("dashboard:modal-closed",o.hideAllPanels),o.uppy.on("file-editor:complete",o.hideAllPanels),o.uppy.on("complete",o.handleComplete),o.uppy.on("files-added",wi((0,d.Z)(o),Di)[Di]),o.uppy.on("file-removed",wi((0,d.Z)(o),Di)[Di]),document.addEventListener("focus",o.recordIfFocusedOnUppyRecently,!0),document.addEventListener("click",o.recordIfFocusedOnUppyRecently,!0),o.opts.inline&&o.el.addEventListener("keydown",o.handleKeyDownInInline),o.opts.autoOpenFileEditor&&o.uppy.on("files-added",wi((0,d.Z)(o),Zi)[Zi])},o.removeEvents=function(){var e=Yt(o.opts.trigger);!o.opts.inline&&e&&e.forEach((function(e){return e.removeEventListener("click",o.openModal)})),o.stopListeningToResize(),document.removeEventListener("paste",o.handlePasteOnBody),window.removeEventListener("popstate",o.handlePopState,!1),o.uppy.off("plugin-remove",o.removeTarget),o.uppy.off("file-added",o.hideAllPanels),o.uppy.off("dashboard:modal-closed",o.hideAllPanels),o.uppy.off("file-editor:complete",o.hideAllPanels),o.uppy.off("complete",o.handleComplete),o.uppy.off("files-added",wi((0,d.Z)(o),Di)[Di]),o.uppy.off("file-removed",wi((0,d.Z)(o),Di)[Di]),document.removeEventListener("focus",o.recordIfFocusedOnUppyRecently),document.removeEventListener("click",o.recordIfFocusedOnUppyRecently),o.opts.inline&&o.el.removeEventListener("keydown",o.handleKeyDownInInline),o.opts.autoOpenFileEditor&&o.uppy.off("files-added",wi((0,d.Z)(o),Zi)[Zi])},o.superFocusOnEachUpdate=function(){var e=o.el.contains(document.activeElement),t=document.activeElement===document.body||null===document.activeElement,n=0===o.uppy.getState().info.length,i=!o.opts.inline;n&&(i||e||t&&o.ifFocusedOnUppyRecently)?o.superFocus(o.el,o.getPluginState().activeOverlayType):o.superFocus.cancel()},o.afterUpdate=function(){!o.opts.disabled||o.dashboardIsDisabled?(!o.opts.disabled&&o.dashboardIsDisabled&&o.disableAllFocusableElements(!1),o.superFocusOnEachUpdate()):o.disableAllFocusableElements(!0)},o.saveFileCard=function(e,t){o.uppy.setFileMeta(t,e),o.toggleFileCard(!1,t)},Object.defineProperty((0,d.Z)(o),xi,{writable:!0,value:function(e){var t=o.uppy.getPlugin(e.id);return(0,i.Z)((0,i.Z)({},e),{},{icon:t.icon||o.opts.defaultPickerIcon,render:t.render})}}),Object.defineProperty((0,d.Z)(o),Ti,{writable:!0,value:function(e){var t=o.uppy.getPlugin(e.id);return"function"!==typeof t.isSupported||t.isSupported()}}),Object.defineProperty((0,d.Z)(o),Bi,{writable:!0,value:Fi((function(e){return e.filter((function(e){return"acquirer"===e.type&&wi((0,d.Z)(o),Ti)[Ti](e)})).map(wi((0,d.Z)(o),xi)[xi])}))}),Object.defineProperty((0,d.Z)(o),Oi,{writable:!0,value:Fi((function(e){return e.filter((function(e){return"progressindicator"===e.type})).map(wi((0,d.Z)(o),xi)[xi])}))}),Object.defineProperty((0,d.Z)(o),Ai,{writable:!0,value:Fi((function(e){return e.filter((function(e){return"editor"===e.type})).map(wi((0,d.Z)(o),xi)[xi])}))}),o.render=function(e){var t,n=o.getPluginState(),i=e.files,r=e.capabilities,a=e.allowNewUpload,s=o.uppy.getObjectOfFilesPerState(),l=s.newFiles,u=s.uploadStartedFiles,p=s.completeFiles,c=s.erroredFiles,f=s.inProgressFiles,v=s.inProgressNotPausedFiles,m=s.processingFiles,y=s.isUploadStarted,g=s.isAllComplete,b=s.isAllErrored,w=s.isAllPaused,k=wi((0,d.Z)(o),Bi)[Bi](n.targets),F=wi((0,d.Z)(o),Oi)[Oi](n.targets),P=wi((0,d.Z)(o),Ai)[Ai](n.targets);return t="auto"===o.opts.theme?r.darkMode?"dark":"light":o.opts.theme,["files","folders","both"].indexOf(o.opts.fileManagerSelectionType)<0&&(o.opts.fileManagerSelectionType="files",console.warn('Unsupported option for "fileManagerSelectionType". Using default of "'.concat(o.opts.fileManagerSelectionType,'".'))),function(e){var t=0===e.totalFileCount,n=1===e.totalFileCount,i=e.containerWidth>576,r=C({"uppy-Dashboard":!0,"uppy-Dashboard--isDisabled":e.disabled,"uppy-Dashboard--animateOpenClose":e.animateOpenClose,"uppy-Dashboard--isClosing":e.isClosing,"uppy-Dashboard--isDraggingOver":e.isDraggingOver,"uppy-Dashboard--modal":!e.inline,"uppy-size--md":e.containerWidth>576,"uppy-size--lg":e.containerWidth>700,"uppy-size--xl":e.containerWidth>900,"uppy-size--height-md":e.containerHeight>400,"uppy-Dashboard--isAddFilesPanelVisible":e.showAddFilesPanel,"uppy-Dashboard--isInnerWrapVisible":e.areInsidesReadyToBeVisible,"uppy-Dashboard--singleFile":n}),a=1;e.containerWidth>900?a=5:e.containerWidth>700?a=4:e.containerWidth>576&&(a=3);var o=e.showSelectedFiles&&!t,s=e.recoveredState?Object.keys(e.recoveredState.files).length:null,l=e.files?Object.keys(e.files).filter((function(t){return e.files[t].isGhost})).length:null;return(0,h.h)("div",{className:r,"data-uppy-theme":e.theme,"data-uppy-num-acquirers":e.acquirers.length,"data-uppy-drag-drop-supported":!e.disableLocalFiles&&Fn(),"aria-hidden":e.inline?"false":e.isHidden,"aria-disabled":e.disabled,"aria-label":e.inline?e.i18n("dashboardTitle"):e.i18n("dashboardWindowTitle"),onPaste:e.handlePaste,onDragOver:e.handleDragOver,onDragLeave:e.handleDragLeave,onDrop:e.handleDrop},(0,h.h)("div",{"aria-hidden":"true",className:"uppy-Dashboard-overlay",tabIndex:-1,onClick:e.handleClickOutside}),(0,h.h)("div",{className:"uppy-Dashboard-inner","aria-modal":!e.inline&&"true",role:!e.inline&&"dialog",style:{width:e.inline&&e.width?e.width:"",height:e.inline&&e.height?e.height:""}},e.inline?null:(0,h.h)("button",{className:"uppy-u-reset uppy-Dashboard-close",type:"button","aria-label":e.i18n("closeModal"),title:e.i18n("closeModal"),onClick:e.closeModal},(0,h.h)("span",{"aria-hidden":"true"},"\xd7")),(0,h.h)("div",{className:"uppy-Dashboard-innerWrap"},(0,h.h)("div",{className:"uppy-Dashboard-dropFilesHereHint"},e.i18n("dropHint")),o&&(0,h.h)(hi,e),s&&(0,h.h)("div",{className:"uppy-Dashboard-serviceMsg"},(0,h.h)("svg",{className:"uppy-Dashboard-serviceMsg-icon","aria-hidden":"true",focusable:"false",width:"21",height:"16",viewBox:"0 0 24 19"},(0,h.h)("g",{transform:"translate(0 -1)",fill:"none",fillRule:"evenodd"},(0,h.h)("path",{d:"M12.857 1.43l10.234 17.056A1 1 0 0122.234 20H1.766a1 1 0 01-.857-1.514L11.143 1.429a1 1 0 011.714 0z",fill:"#FFD300"}),(0,h.h)("path",{fill:"#000",d:"M11 6h2l-.3 8h-1.4z"}),(0,h.h)("circle",{fill:"#000",cx:"12",cy:"17",r:"1"}))),(0,h.h)("strong",{className:"uppy-Dashboard-serviceMsg-title"},e.i18n("sessionRestored")),(0,h.h)("div",{className:"uppy-Dashboard-serviceMsg-text"},l>0?e.i18n("recoveredXFiles",{smart_count:l}):e.i18n("recoveredAllFiles"))),o?(0,h.h)($n,gi({},e,{singleFile:n,itemsPerRow:a})):(0,h.h)(ei,gi({},e,{isSizeMD:i})),(0,h.h)(yi,null,e.showAddFilesPanel?(0,h.h)(ti,gi({key:"AddFiles"},e,{isSizeMD:i})):null),(0,h.h)(yi,null,e.fileCardFor?(0,h.h)(vi,gi({key:"FileCard"},e)):null),(0,h.h)(yi,null,e.activePickerPanel?(0,h.h)(ii,gi({key:"Picker"},e)):null),(0,h.h)(yi,null,e.showFileEditor?(0,h.h)(ri,gi({key:"Editor"},e)):null),(0,h.h)("div",{className:"uppy-Dashboard-progressindicators"},e.progressindicators.map((function(t){return e.uppy.getPlugin(t.id).render(e.state)}))))))}({state:e,isHidden:n.isHidden,files:i,newFiles:l,uploadStartedFiles:u,completeFiles:p,erroredFiles:c,inProgressFiles:f,inProgressNotPausedFiles:v,processingFiles:m,isUploadStarted:y,isAllComplete:g,isAllErrored:b,isAllPaused:w,totalFileCount:Object.keys(i).length,totalProgress:e.totalProgress,allowNewUpload:a,acquirers:k,theme:t,disabled:o.opts.disabled,disableLocalFiles:o.opts.disableLocalFiles,direction:o.opts.direction,activePickerPanel:n.activePickerPanel,showFileEditor:n.showFileEditor,saveFileEditor:o.saveFileEditor,disableAllFocusableElements:o.disableAllFocusableElements,animateOpenClose:o.opts.animateOpenClose,isClosing:n.isClosing,progressindicators:F,editors:P,autoProceed:o.uppy.opts.autoProceed,id:o.id,closeModal:o.requestCloseModal,handleClickOutside:o.handleClickOutside,handleInputChange:o.handleInputChange,handlePaste:o.handlePaste,inline:o.opts.inline,showPanel:o.showPanel,hideAllPanels:o.hideAllPanels,i18n:o.i18n,i18nArray:o.i18nArray,uppy:o.uppy,note:o.opts.note,recoveredState:e.recoveredState,metaFields:n.metaFields,resumableUploads:r.resumableUploads||!1,individualCancellation:r.individualCancellation,isMobileDevice:r.isMobileDevice,fileCardFor:n.fileCardFor,toggleFileCard:o.toggleFileCard,toggleAddFilesPanel:o.toggleAddFilesPanel,showAddFilesPanel:n.showAddFilesPanel,saveFileCard:o.saveFileCard,openFileEditor:o.openFileEditor,canEditFile:o.canEditFile,width:o.opts.width,height:o.opts.height,showLinkToFileUploadResult:o.opts.showLinkToFileUploadResult,fileManagerSelectionType:o.opts.fileManagerSelectionType,proudlyDisplayPoweredByUppy:o.opts.proudlyDisplayPoweredByUppy,hideCancelButton:o.opts.hideCancelButton,hideRetryButton:o.opts.hideRetryButton,hidePauseResumeButton:o.opts.hidePauseResumeButton,showRemoveButtonAfterComplete:o.opts.showRemoveButtonAfterComplete,containerWidth:n.containerWidth,containerHeight:n.containerHeight,areInsidesReadyToBeVisible:n.areInsidesReadyToBeVisible,isTargetDOMEl:o.isTargetDOMEl,parentElement:o.el,allowedFileTypes:o.uppy.opts.restrictions.allowedFileTypes,maxNumberOfFiles:o.uppy.opts.restrictions.maxNumberOfFiles,requiredMetaFields:o.uppy.opts.restrictions.requiredMetaFields,showSelectedFiles:o.opts.showSelectedFiles,showNativePhotoCameraButton:o.opts.showNativePhotoCameraButton,showNativeVideoCameraButton:o.opts.showNativeVideoCameraButton,nativeCameraFacingMode:o.opts.nativeCameraFacingMode,handleCancelRestore:o.handleCancelRestore,handleRequestThumbnail:o.handleRequestThumbnail,handleCancelThumbnail:o.handleCancelThumbnail,isDraggingOver:n.isDraggingOver,handleDragOver:o.handleDragOver,handleDragLeave:o.handleDragLeave,handleDrop:o.handleDrop})},o.discoverProviderPlugins=function(){o.uppy.iteratePlugins((function(e){e&&!e.target&&e.opts&&e.opts.target===o.constructor&&o.addTarget(e)}))},o.install=function(){o.setPluginState({isHidden:!0,fileCardFor:null,activeOverlayType:null,showAddFilesPanel:!1,activePickerPanel:!1,showFileEditor:!1,metaFields:o.opts.metaFields,targets:[],areInsidesReadyToBeVisible:!1,isDraggingOver:!1});var e=o.opts,t=e.inline,n=e.closeAfterFinish;if(t&&n)throw new Error("[Dashboard] `closeAfterFinish: true` cannot be used on an inline Dashboard, because an inline Dashboard cannot be closed at all. Either set `inline: false`, or disable the `closeAfterFinish` option.");var i=o.uppy.opts,r=i.allowMultipleUploads,a=i.allowMultipleUploadBatches;(r||a)&&n&&o.uppy.log("[Dashboard] When using `closeAfterFinish`, we recommended setting the `allowMultipleUploadBatches` option to `false` in the Uppy constructor. See https://uppy.io/docs/uppy/#allowMultipleUploads-true","warning");var s=o.opts.target;s&&o.mount(s,(0,d.Z)(o)),(o.opts.plugins||[]).forEach((function(e){var t=o.uppy.getPlugin(e);t&&t.mount((0,d.Z)(o),t)})),o.opts.disableStatusBar||o.uppy.use(Y,{id:"".concat(o.id,":StatusBar"),target:(0,d.Z)(o),hideUploadButton:o.opts.hideUploadButton,hideRetryButton:o.opts.hideRetryButton,hidePauseResumeButton:o.opts.hidePauseResumeButton,hideCancelButton:o.opts.hideCancelButton,showProgressDetails:o.opts.showProgressDetails,hideAfterFinish:o.opts.hideProgressAfterFinish,locale:o.opts.locale,doneButtonHandler:o.opts.doneButtonHandler}),o.opts.disableInformer||o.uppy.use(oe,{id:"".concat(o.id,":Informer"),target:(0,d.Z)(o)}),o.opts.disableThumbnailGenerator||o.uppy.use(Kt,{id:"".concat(o.id,":ThumbnailGenerator"),thumbnailWidth:o.opts.thumbnailWidth,thumbnailHeight:o.opts.thumbnailHeight,thumbnailType:o.opts.thumbnailType,waitForThumbnailsBeforeUpload:o.opts.waitForThumbnailsBeforeUpload,lazy:!o.opts.waitForThumbnailsBeforeUpload}),o.darkModeMediaQuery="undefined"!==typeof window&&window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;var l=!!o.darkModeMediaQuery&&o.darkModeMediaQuery.matches;o.uppy.log("[Dashboard] Dark mode is ".concat(l?"on":"off")),o.setDarkModeCapability(l),"auto"===o.opts.theme&&o.darkModeMediaQuery.addListener(o.handleSystemDarkModeChange),o.discoverProviderPlugins(),o.initEvents()},o.uninstall=function(){if(!o.opts.disableInformer){var e=o.uppy.getPlugin("".concat(o.id,":Informer"));e&&o.uppy.removePlugin(e)}if(!o.opts.disableStatusBar){var t=o.uppy.getPlugin("".concat(o.id,":StatusBar"));t&&o.uppy.removePlugin(t)}if(!o.opts.disableThumbnailGenerator){var n=o.uppy.getPlugin("".concat(o.id,":ThumbnailGenerator"));n&&o.uppy.removePlugin(n)}(o.opts.plugins||[]).forEach((function(e){var t=o.uppy.getPlugin(e);t&&t.unmount()})),"auto"===o.opts.theme&&o.darkModeMediaQuery.removeListener(o.handleSystemDarkModeChange),o.unmount(),o.removeEvents()},o.id=o.opts.id||"Dashboard",o.title="Dashboard",o.type="orchestrator",o.modalName="uppy-Dashboard-".concat(mn()),o.defaultLocale=bi;var l={target:"body",metaFields:[],trigger:null,inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,defaultPickerIcon:Si,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,doneButtonHandler:function(){o.uppy.cancelAll(),o.requestCloseModal()},note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,onRequestCloseModal:function(){return o.closeModal()},showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,showNativePhotoCameraButton:!1,showNativeVideoCameraButton:!1,theme:"light",autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1};return o.opts=(0,i.Z)((0,i.Z)({},l),a),o.i18nInit(),o.superFocus=function(){var e=!1;return Cn((function(t,n){var i=bn(t,n),r=i.contains(document.activeElement);if(!r||!e){var a=i.querySelector("[data-uppy-super-focusable]");if(!r||a)if(a)a.focus({preventScroll:!0}),e=!0;else{var o=i.querySelector(gn);null==o||o.focus({preventScroll:!0}),e=!1}}}),260)}(),o.ifFocusedOnUppyRecently=!1,o.makeDashboardInsidesVisibleAnywayTimeout=null,o.removeDragOverClassTimeout=null,o}return(0,a.Z)(n)}(f.di);Ri.VERSION="3.2.0";var Mi=n(52007),Ui=Mi.instanceOf(f.hS),Ii=Mi.arrayOf(Mi.string),Ni=Mi.shape({strings:Mi.object,pluralize:Mi.func}),Ei=Mi.shape({id:Mi.string.isRequired,name:Mi.string.isRequired,placeholder:Mi.string}),Li=Mi.oneOfType([Mi.arrayOf(Ei),Mi.func]),zi=Mi.oneOfType([Mi.string,Mi.number]),Vi={uppy:Ui,inline:Mi.bool,plugins:Ii,width:zi,height:zi,showProgressDetails:Mi.bool,hideUploadButton:Mi.bool,hideProgressAfterFinish:Mi.bool,note:Mi.string,metaFields:Li,proudlyDisplayPoweredByUppy:Mi.bool,disableStatusBar:Mi.bool,disableInformer:Mi.bool,disableThumbnailGenerator:Mi.bool,thumbnailWidth:Mi.number,locale:Ni},Wi=["defaultChecked","defaultValue","suppressContentEditableWarning","suppressHydrationWarning","dangerouslySetInnerHTML","accessKey","className","contentEditable","contextMenu","dir","draggable","hidden","id","lang","placeholder","slot","spellCheck","style","tabIndex","title","translate","radioGroup","role","about","datatype","inlist","prefix","property","resource","typeof","vocab","autoCapitalize","autoCorrect","autoSave","color","itemProp","itemScope","itemType","itemID","itemRef","results","security","unselectable","inputMode","is","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],ji=/^(aria-|data-)/,Hi=function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=(0,$.Z)(e,1)[0];return ji.test(t)||Wi.includes(t)})))};function qi(e,t){return Object.keys(e).some((function(n){return!Object.hasOwn(e,n)&&e[n]!==t[n]}))}var _i=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(qi(this.props,e)){var t=(0,i.Z)((0,i.Z)({},this.props),{},{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props.uppy,t=(0,i.Z)((0,i.Z)({id:"react:Dashboard"},this.props),{},{target:this.container});delete t.uppy,e.use(Ri,t),this.plugin=e.getPlugin(t.id)}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,l.createElement)("div",(0,i.Z)({className:"uppy-Container",ref:function(t){e.container=t}},Hi(this.props)))}}]),n}(l.Component);_i.propTypes=Vi,_i.defaultProps={inline:!0};var Gi=_i,Ki=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.uppy,r=t.open,a=t.onRequestClose;if(e.uppy!==n)this.uninstallPlugin(e),this.installPlugin();else if(qi(this.props,e)){var o=(0,i.Z)((0,i.Z)({},this.props),{},{onRequestCloseModal:a});delete o.uppy,this.plugin.setOptions(o)}e.open&&!r?this.plugin.closeModal():!e.open&&r&&this.plugin.openModal()}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props,t=e.uppy,n=e.target,i=e.open,r=e.onRequestClose,a={id:"react:DashboardModal",target:n,closeModalOnClickOutside:e.closeModalOnClickOutside,disablePageScrollWhenModalOpen:e.disablePageScrollWhenModalOpen,inline:e.inline,plugins:e.plugins,width:e.width,height:e.height,showProgressDetails:e.showProgressDetails,note:e.note,metaFields:e.metaFields,proudlyDisplayPoweredByUppy:e.proudlyDisplayPoweredByUppy,autoOpenFileEditor:e.autoOpenFileEditor,animateOpenClose:e.animateOpenClose,browserBackButtonClose:e.browserBackButtonClose,closeAfterFinish:e.closeAfterFinish,disableStatusBar:e.disableStatusBar,disableInformer:e.disableInformer,disableThumbnailGenerator:e.disableThumbnailGenerator,disableLocalFiles:e.disableLocalFiles,disabled:e.disabled,hideCancelButton:e.hideCancelButton,hidePauseResumeButton:e.hidePauseResumeButton,hideProgressAfterFinish:e.hideProgressAfterFinish,hideRetryButton:e.hideRetryButton,hideUploadButton:e.hideUploadButton,showLinkToFileUploadResult:e.showLinkToFileUploadResult,showRemoveButtonAfterComplete:e.showRemoveButtonAfterComplete,showSelectedFiles:e.showSelectedFiles,waitForThumbnailsBeforeUpload:e.waitForThumbnailsBeforeUpload,fileManagerSelectionType:e.fileManagerSelectionType,theme:e.theme,thumbnailType:e.thumbnailType,thumbnailWidth:e.thumbnailWidth,locale:e.locale,onRequestCloseModal:r};a.target||(a.target=this.container),delete a.uppy,t.use(Ri,a),this.plugin=t.getPlugin(a.id),i&&this.plugin.openModal()}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,l.createElement)("div",(0,i.Z)({className:"uppy-Container",ref:function(t){e.container=t}},Hi(this.props)))}}]),n}(l.Component);Ki.propTypes={uppy:Ui.isRequired,target:"undefined"!==typeof window?Mi.instanceOf(window.HTMLElement):Mi.any,open:Mi.bool,onRequestClose:Mi.func,closeModalOnClickOutside:Mi.bool,disablePageScrollWhenModalOpen:Mi.bool,inline:Mi.bool,plugins:Ii,width:zi,height:zi,showProgressDetails:Mi.bool,note:Mi.string,metaFields:Li,proudlyDisplayPoweredByUppy:Mi.bool,autoOpenFileEditor:Mi.bool,animateOpenClose:Mi.bool,browserBackButtonClose:Mi.bool,closeAfterFinish:Mi.bool,disableStatusBar:Mi.bool,disableInformer:Mi.bool,disableThumbnailGenerator:Mi.bool,disableLocalFiles:Mi.bool,disabled:Mi.bool,hideCancelButton:Mi.bool,hidePauseResumeButton:Mi.bool,hideProgressAfterFinish:Mi.bool,hideRetryButton:Mi.bool,hideUploadButton:Mi.bool,showLinkToFileUploadResult:Mi.bool,showRemoveButtonAfterComplete:Mi.bool,showSelectedFiles:Mi.bool,waitForThumbnailsBeforeUpload:Mi.bool,fileManagerSelectionType:Mi.string,theme:Mi.string,thumbnailType:Mi.string,thumbnailWidth:Mi.number,locale:Ni},Ki.defaultProps={metaFields:[],plugins:[],inline:!1,width:750,height:550,thumbnailWidth:280,thumbnailType:"image/jpeg",waitForThumbnailsBeforeUpload:!1,showLinkToFileUploadResult:!1,showProgressDetails:!1,hideUploadButton:!1,hideCancelButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideProgressAfterFinish:!1,note:null,closeModalOnClickOutside:!1,closeAfterFinish:!1,disableStatusBar:!1,disableInformer:!1,disableThumbnailGenerator:!1,disablePageScrollWhenModalOpen:!0,animateOpenClose:!0,fileManagerSelectionType:"files",proudlyDisplayPoweredByUppy:!0,showSelectedFiles:!0,showRemoveButtonAfterComplete:!1,browserBackButtonClose:!1,theme:"light",autoOpenFileEditor:!1,disabled:!1,disableLocalFiles:!1,open:void 0,target:void 0,locale:null,onRequestClose:void 0};var Xi={strings:{dropHereOr:"Drop here or %{browse}",browse:"browse"}},Yi=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,a){var o;(0,r.Z)(this,n),(o=t.call(this,e,a)).handleDrop=function(){var e=(0,p.Z)((0,u.Z)().mark((function e(t){var n,i,r,a;return(0,u.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),clearTimeout(o.removeDragOverClassTimeout),o.setPluginState({isDraggingOver:!1}),r=function(e){o.uppy.log(e,"error")},e.next=7,hn(t.dataTransfer,{logDropError:r});case 7:(a=e.sent).length>0&&(o.uppy.log("[DragDrop] Files dropped"),o.addFiles(a)),null==(n=(i=o.opts).onDrop)||n.call(i,t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o.type="acquirer",o.id=o.opts.id||"DragDrop",o.title="Drag & Drop",o.defaultLocale=Xi;return o.opts=(0,i.Z)((0,i.Z)({},{target:null,inputName:"files[]",width:"100%",height:"100%",note:null}),a),o.i18nInit(),o.isDragDropSupported=Fn(),o.removeDragOverClassTimeout=null,o.onInputChange=o.onInputChange.bind((0,d.Z)(o)),o.handleDragOver=o.handleDragOver.bind((0,d.Z)(o)),o.handleDragLeave=o.handleDragLeave.bind((0,d.Z)(o)),o.handleDrop=o.handleDrop.bind((0,d.Z)(o)),o.addFiles=o.addFiles.bind((0,d.Z)(o)),o.render=o.render.bind((0,d.Z)(o)),o}return(0,a.Z)(n,[{key:"addFiles",value:function(e){var t=this,n=e.map((function(e){return{source:t.id,name:e.name,type:e.type,data:e,meta:{relativePath:e.relativePath||null}}}));try{this.uppy.addFiles(n)}catch(i){this.uppy.log(i)}}},{key:"onInputChange",value:function(e){var t=(0,Qt.Z)(e.target.files);t.length>0&&(this.uppy.log("[DragDrop] Files selected through input"),this.addFiles(t)),e.target.value=null}},{key:"handleDragOver",value:function(e){var t,n;e.preventDefault(),e.stopPropagation();var i=e.dataTransfer.types.some((function(e){return"Files"===e})),r=this.uppy.getState().allowNewUpload;if(!i||!r)return e.dataTransfer.dropEffect="none",void clearTimeout(this.removeDragOverClassTimeout);e.dataTransfer.dropEffect="copy",clearTimeout(this.removeDragOverClassTimeout),this.setPluginState({isDraggingOver:!0}),null==(t=(n=this.opts).onDragOver)||t.call(n,e)}},{key:"handleDragLeave",value:function(e){var t,n,i=this;e.preventDefault(),e.stopPropagation(),clearTimeout(this.removeDragOverClassTimeout),this.removeDragOverClassTimeout=setTimeout((function(){i.setPluginState({isDraggingOver:!1})}),50),null==(t=(n=this.opts).onDragLeave)||t.call(n,e)}},{key:"renderHiddenFileInput",value:function(){var e=this,t=this.uppy.opts.restrictions;return(0,h.h)("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:function(t){e.fileInputRef=t},name:this.opts.inputName,multiple:1!==t.maxNumberOfFiles,accept:t.allowedFileTypes,onChange:this.onInputChange})}},{key:"renderLabel",value:function(){return(0,h.h)("div",{className:"uppy-DragDrop-label"},this.i18nArray("dropHereOr",{browse:(0,h.h)("span",{className:"uppy-DragDrop-browse"},this.i18n("browse"))}))}},{key:"renderNote",value:function(){return(0,h.h)("span",{className:"uppy-DragDrop-note"},this.opts.note)}},{key:"render",value:function(){var e=this,t="uppy-u-reset\n      uppy-DragDrop-container\n      ".concat(this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":"","\n      ").concat(this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":"","\n    "),i={width:this.opts.width,height:this.opts.height};return(0,h.h)("button",{type:"button",className:t,style:i,onClick:function(){return e.fileInputRef.click()},onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),(0,h.h)("div",{className:"uppy-DragDrop-inner"},n.renderArrowSvg(),this.renderLabel(),this.renderNote()))}},{key:"install",value:function(){var e=this.opts.target;this.setPluginState({isDraggingOver:!1}),e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.unmount()}}],[{key:"renderArrowSvg",value:function(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},(0,h.h)("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"}))}}]),n}(f.di);Yi.VERSION="3.0.1";var Qi=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(qi(this.props,e)){var t=(0,i.Z)((0,i.Z)({},this.props),{},{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props,t=e.uppy,n={id:"react:DragDrop",locale:e.locale,inputName:e.inputName,width:e.width,height:e.height,note:e.note,target:this.container};delete n.uppy,t.use(Yi,n),this.plugin=t.getPlugin(n.id)}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,l.createElement)("div",(0,i.Z)({className:"uppy-Container",ref:function(t){e.container=t}},Hi(this.props)))}}]),n}(l.Component);Qi.propTypes={uppy:Ui.isRequired,locale:Ni,inputName:Mi.string,width:Mi.string,height:Mi.string,note:Mi.string},Qi.defaultProps={locale:null,inputName:"files[]",width:"100%",height:"100%",note:null};var $i=Qi,Ji=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,a){var o;(0,r.Z)(this,n),(o=t.call(this,e,a)).id=o.opts.id||"ProgressBar",o.title="Progress Bar",o.type="progressindicator";return o.opts=(0,i.Z)((0,i.Z)({},{target:"body",fixed:!1,hideAfterFinish:!0}),a),o.render=o.render.bind((0,d.Z)(o)),o}return(0,a.Z)(n,[{key:"render",value:function(e){var t=e.totalProgress||0,n=(0===t||100===t)&&this.opts.hideAfterFinish;return(0,h.h)("div",{className:"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":n},(0,h.h)("div",{className:"uppy-ProgressBar-inner",style:{width:"".concat(t,"%")}}),(0,h.h)("div",{className:"uppy-ProgressBar-percentage"},t))}},{key:"install",value:function(){var e=this.opts.target;e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.unmount()}}]),n}(f.di);Ji.VERSION="3.0.1";var er=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(qi(this.props,e)){var t=(0,i.Z)((0,i.Z)({},this.props),{},{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props,t=e.uppy,n={id:"react:ProgressBar",fixed:e.fixed,hideAfterFinish:e.hideAfterFinish,target:this.container};delete n.uppy,t.use(Ji,n),this.plugin=t.getPlugin(n.id)}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,l.createElement)("div",(0,i.Z)({className:"uppy-Container",ref:function(t){e.container=t}},Hi(this.props)))}}]),n}(l.Component);er.propTypes={uppy:Ui.isRequired,fixed:Mi.bool,hideAfterFinish:Mi.bool},er.defaultProps={fixed:!1,hideAfterFinish:!0};var tr=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){if(e.uppy!==this.props.uppy)this.uninstallPlugin(e),this.installPlugin();else if(qi(this.props,e)){var t=(0,i.Z)((0,i.Z)({},this.props),{},{target:this.container});delete t.uppy,this.plugin.setOptions(t)}}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props,t=e.uppy,n={id:"react:StatusBar",hideUploadButton:e.hideUploadButton,hideRetryButton:e.hideRetryButton,hidePauseResumeButton:e.hidePauseResumeButton,hideCancelButton:e.hideCancelButton,showProgressDetails:e.showProgressDetails,hideAfterFinish:e.hideAfterFinish,doneButtonHandler:e.doneButtonHandler,target:this.container};delete n.uppy,t.use(Y,n),this.plugin=t.getPlugin(n.id)}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,l.createElement)("div",(0,i.Z)({className:"uppy-Container",ref:function(t){e.container=t}},Hi(this.props)))}}]),n}(l.Component);tr.propTypes={uppy:Ui.isRequired,hideUploadButton:Mi.bool,hideRetryButton:Mi.bool,hidePauseResumeButton:Mi.bool,hideCancelButton:Mi.bool,showProgressDetails:Mi.bool,hideAfterFinish:Mi.bool,doneButtonHandler:Mi.func},tr.defaultProps={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var nr={strings:{chooseFiles:"Choose files"}},ir=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,a){var o;(0,r.Z)(this,n),(o=t.call(this,e,a)).id=o.opts.id||"FileInput",o.title="File Input",o.type="acquirer",o.defaultLocale=nr;return o.opts=(0,i.Z)((0,i.Z)({},{target:null,pretty:!0,inputName:"files[]"}),a),o.i18nInit(),o.render=o.render.bind((0,d.Z)(o)),o.handleInputChange=o.handleInputChange.bind((0,d.Z)(o)),o.handleClick=o.handleClick.bind((0,d.Z)(o)),o}return(0,a.Z)(n,[{key:"addFiles",value:function(e){var t=this,n=e.map((function(e){return{source:t.id,name:e.name,type:e.type,data:e}}));try{this.uppy.addFiles(n)}catch(i){this.uppy.log(i)}}},{key:"handleInputChange",value:function(e){this.uppy.log("[FileInput] Something selected through input...");var t=(0,Qt.Z)(e.target.files);this.addFiles(t),e.target.value=null}},{key:"handleClick",value:function(){this.input.click()}},{key:"render",value:function(){var e=this,t=this.uppy.opts.restrictions,n=t.allowedFileTypes?t.allowedFileTypes.join(","):null;return(0,h.h)("div",{className:"uppy-FileInput-container"},(0,h.h)("input",{className:"uppy-FileInput-input",style:this.opts.pretty&&{width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},type:"file",name:this.opts.inputName,onChange:this.handleInputChange,multiple:1!==t.maxNumberOfFiles,accept:n,ref:function(t){e.input=t}}),this.opts.pretty&&(0,h.h)("button",{className:"uppy-FileInput-btn",type:"button",onClick:this.handleClick},this.i18n("chooseFiles")))}},{key:"install",value:function(){var e=this.opts.target;e&&this.mount(e,this)}},{key:"uninstall",value:function(){this.unmount()}}]),n}(f.di);ir.VERSION="3.0.1";var rr=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,a.Z)(n,[{key:"componentDidMount",value:function(){this.installPlugin()}},{key:"componentDidUpdate",value:function(e){e.uppy!==this.props.uppy&&(this.uninstallPlugin(e),this.installPlugin())}},{key:"componentWillUnmount",value:function(){this.uninstallPlugin()}},{key:"installPlugin",value:function(){var e=this.props,t=e.uppy,n={id:"react:FileInput",locale:e.locale,pretty:e.pretty,inputName:e.inputName,target:this.container};delete n.uppy,t.use(ir,n),this.plugin=t.getPlugin(n.id)}},{key:"uninstallPlugin",value:function(e){void 0===e&&(e=this.props),e.uppy.removePlugin(this.plugin)}},{key:"render",value:function(){var e=this;return(0,l.createElement)("div",{className:"uppy-Container",ref:function(t){e.container=t}})}}]),n}(l.Component);rr.propTypes={uppy:Ui.isRequired,locale:Ni,pretty:Mi.bool,inputName:Mi.string},rr.defaultProps={locale:void 0,pretty:!0,inputName:"files[]"};var ar=rr},65279:function(e,t,n){"use strict";function i(e){return!!e&&/^[^/]+\/(jpe?g|gif|png|svg|svg\+xml|bmp|webp|avif)$/.test(e)}n.d(t,{Z:function(){return i}})},66483:function(e,t){"use strict";t.Z=Array.from},67652:function(e,t,n){"use strict";n.d(t,{Z:function(){return V}});var i=n(74165),r=n(15861),a=n(1413),o=n(15671),s=n(43144),l=n(97326),u=n(11752),p=n(61120),c=n(60136),d=n(29388),h=n(58620),f=n(50732),v=n(29439),m={"audio/mp3":"mp3","audio/mp4":"mp4","audio/ogg":"ogg","audio/webm":"webm","image/gif":"gif","image/heic":"heic","image/heif":"heif","image/jpeg":"jpg","image/png":"png","image/svg+xml":"svg","video/mp4":"mp4","video/ogg":"ogv","video/quicktime":"mov","video/webm":"webm","video/x-matroska":"mkv","video/x-msvideo":"avi"};function y(e){var t=e.split(";",1);return e=(0,v.Z)(t,1)[0],m[e]||null}var g=n(75611),b=n(32789);var w=function(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",fill:"#0097DC",width:"66",height:"55",viewBox:"0 0 66 55"},(0,h.h)("path",{d:"M57.3 8.433c4.59 0 8.1 3.51 8.1 8.1v29.7c0 4.59-3.51 8.1-8.1 8.1H8.7c-4.59 0-8.1-3.51-8.1-8.1v-29.7c0-4.59 3.51-8.1 8.1-8.1h9.45l4.59-7.02c.54-.54 1.35-1.08 2.16-1.08h16.2c.81 0 1.62.54 2.16 1.08l4.59 7.02h9.45zM33 14.64c-8.62 0-15.393 6.773-15.393 15.393 0 8.62 6.773 15.393 15.393 15.393 8.62 0 15.393-6.773 15.393-15.393 0-8.62-6.773-15.393-15.393-15.393zM33 40c-5.648 0-9.966-4.319-9.966-9.967 0-5.647 4.318-9.966 9.966-9.966s9.966 4.319 9.966 9.966C42.966 35.681 38.648 40 33 40z",fillRule:"evenodd"}))},k=function(e){var t=e.onSnapshot,n=e.i18n;return(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--picture",type:"button",title:n("takePicture"),"aria-label":n("takePicture"),onClick:t,"data-uppy-super-focusable":!0},w())};function C(e){var t=e.recording,n=e.onStartRecording,i=e.onStopRecording,r=e.i18n;return t?(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:r("stopRecording"),"aria-label":r("stopRecording"),onClick:i,"data-uppy-super-focusable":!0},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,h.h)("rect",{x:"15",y:"15",width:"70",height:"70"}))):(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button",type:"button",title:r("startRecording"),"aria-label":r("startRecording"),onClick:n,"data-uppy-super-focusable":!0},(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"100",height:"100",viewBox:"0 0 100 100"},(0,h.h)("circle",{cx:"50",cy:"50",r:"40"})))}function F(e){var t,n=e.recordingLengthSeconds,i=e.i18n,r=(t=n,"".concat(Math.floor(t/60),":").concat(String(t%60).padStart(2,0)));return(0,h.h)("span",{"aria-label":i("recordingLength",{recording_length:r})},r)}var P=function(e){var t=e.onSubmit,n=e.i18n;return(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--submit",type:"button",title:n("submitRecordedFile"),"aria-label":n("submitRecordedFile"),onClick:t,"data-uppy-super-focusable":!0},(0,h.h)("svg",{width:"12",height:"9",viewBox:"0 0 12 9",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,h.h)("path",{fill:"#fff",fillRule:"nonzero",d:"M10.66 0L12 1.31 4.136 9 0 4.956l1.34-1.31L4.136 6.38z"})))};var S=function(e){var t=e.onDiscard,n=e.i18n;return(0,h.h)("button",{className:"uppy-u-reset uppy-c-btn uppy-Webcam-button uppy-Webcam-button--discard",type:"button",title:n("discardRecordedFile"),"aria-label":n("discardRecordedFile"),onClick:t,"data-uppy-super-focusable":!0},(0,h.h)("svg",{width:"13",height:"13",viewBox:"0 0 13 13",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",focusable:"false",className:"uppy-c-icon"},(0,h.h)("g",{fill:"#FFF",fillRule:"evenodd"},(0,h.h)("path",{d:"M.496 11.367L11.103.76l1.414 1.414L1.911 12.781z"}),(0,h.h)("path",{d:"M11.104 12.782L.497 2.175 1.911.76l10.607 10.606z"}))))};function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},D.apply(this,arguments)}function Z(e,t){return e.includes(t)}var x=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(){return(0,o.Z)(this,n),t.apply(this,arguments)}return(0,s.Z)(n,[{key:"componentDidMount",value:function(){(0,this.props.onFocus)()}},{key:"componentWillUnmount",value:function(){(0,this.props.onStop)()}},{key:"render",value:function(){var e=this,t=this.props,n=t.src,i=t.recordedVideo,r=t.recording,a=t.modes,o=t.supportsRecording,s=t.videoSources,l=t.showVideoSourceDropdown,u=t.showRecordingLength,p=t.onSubmit,c=t.i18n,d=t.mirror,f=t.onSnapshot,v=t.onStartRecording,m=t.onStopRecording,y=t.onDiscardRecordedVideo,g=t.recordingLengthSeconds,b=!!i,w=!b&&o&&(Z(a,"video-only")||Z(a,"audio-only")||Z(a,"video-audio")),x=!b&&Z(a,"picture"),T=o&&u&&!b,B=l&&s&&s.length>1,O={playsinline:!0};return i?(O.muted=!1,O.controls=!0,O.src=i,this.videoElement&&(this.videoElement.srcObject=void 0)):(O.muted=!0,O.autoplay=!0,O.srcObject=n),(0,h.h)("div",{className:"uppy uppy-Webcam-container"},(0,h.h)("div",{className:"uppy-Webcam-videoContainer"},(0,h.h)("video",D({ref:function(t){return e.videoElement=t},className:"uppy-Webcam-video  ".concat(d?"uppy-Webcam-video--mirrored":"")},O))),(0,h.h)("div",{className:"uppy-Webcam-footer"},(0,h.h)("div",{className:"uppy-Webcam-videoSourceContainer"},B?function(e){var t=e.currentDeviceId,n=e.videoSources,i=e.onChangeVideoSource;return(0,h.h)("div",{className:"uppy-Webcam-videoSource"},(0,h.h)("select",{className:"uppy-u-reset uppy-Webcam-videoSource-select",onChange:function(e){i(e.target.value)}},n.map((function(e){return(0,h.h)("option",{key:e.deviceId,value:e.deviceId,selected:e.deviceId===t},e.label)}))))}(this.props):null),(0,h.h)("div",{className:"uppy-Webcam-buttonContainer"},x&&(0,h.h)(k,{onSnapshot:f,i18n:c}),w&&(0,h.h)(C,{recording:r,onStartRecording:v,onStopRecording:m,i18n:c}),b&&(0,h.h)(P,{onSubmit:p,i18n:c}),b&&(0,h.h)(S,{onDiscard:y,i18n:c})),(0,h.h)("div",{className:"uppy-Webcam-recordingLength"},T&&(0,h.h)(F,{recordingLengthSeconds:g,i18n:c}))))}}]),n}(h.wA),T=x,B=function(e){var t=e.icon,n=e.i18n,i=e.hasCamera;return(0,h.h)("div",{className:"uppy-Webcam-permissons"},(0,h.h)("div",{className:"uppy-Webcam-permissonsIcon"},t()),(0,h.h)("h1",{className:"uppy-Webcam-title"},n(i?"allowAccessTitle":"noCameraTitle")),(0,h.h)("p",null,n(i?"allowAccessDescription":"noCameraDescription")))},O={strings:{pluginNameCamera:"Camera",noCameraTitle:"Camera Not Available",noCameraDescription:"In order to take pictures or record video, please connect a camera device",recordingStoppedMaxSize:"Recording stopped because the file size is about to exceed the limit",submitRecordedFile:"Submit recorded file",discardRecordedFile:"Discard recorded file",smile:"Smile!",takePicture:"Take a picture",startRecording:"Begin video recording",stopRecording:"Stop video recording",recordingLength:"Recording length %{recording_length}",allowAccessTitle:"Please allow access to your camera",allowAccessDescription:"In order to take pictures or record video with your camera, please allow camera access for this site."}};function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},A.apply(this,arguments)}function R(e,t){if(!Object.prototype.hasOwnProperty.call(e,t))throw new TypeError("attempted to use private field on non-instance");return e}var M=0;function U(e){return"__private_"+M+++"_"+e}function I(e){return"."===e[0]?g.Z[e.slice(1)]:e}function N(e){return/^video\/[^*]+$/.test(e)}function E(e){return/^image\/[^*]+$/.test(e)}function L(e,t){return e.includes(t)}var z=U("enableMirror"),V=function(e){(0,c.Z)(n,e);var t=(0,d.Z)(n);function n(e,i){var r;(0,o.Z)(this,n),r=t.call(this,e,i),Object.defineProperty((0,l.Z)(r),z,{writable:!0,value:void 0}),r.mediaDevices=navigator.mediaDevices,r.supportsUserMedia=!!r.mediaDevices,r.protocol=location.protocol.match(/https/i)?"https":"http",r.id=r.opts.id||"Webcam",r.type="acquirer",r.capturedMediaFile=null,r.icon=function(){return(0,h.h)("svg",{"aria-hidden":"true",focusable:"false",width:"32",height:"32",viewBox:"0 0 32 32"},(0,h.h)("g",{fill:"none",fillRule:"evenodd"},(0,h.h)("rect",{className:"uppy-ProviderIconBg",fill:"#03BFEF",width:"32",height:"32",rx:"16"}),(0,h.h)("path",{d:"M22 11c1.133 0 2 .867 2 2v7.333c0 1.134-.867 2-2 2H10c-1.133 0-2-.866-2-2V13c0-1.133.867-2 2-2h2.333l1.134-1.733C13.6 9.133 13.8 9 14 9h4c.2 0 .4.133.533.267L19.667 11H22zm-6 1.533a3.764 3.764 0 0 0-3.8 3.8c0 2.129 1.672 3.801 3.8 3.801s3.8-1.672 3.8-3.8c0-2.13-1.672-3.801-3.8-3.801zm0 6.261c-1.395 0-2.46-1.066-2.46-2.46 0-1.395 1.065-2.461 2.46-2.461s2.46 1.066 2.46 2.46c0 1.395-1.065 2.461-2.46 2.461z",fill:"#FFF",fillRule:"nonzero"})))},r.defaultLocale=O;var s={onBeforeSnapshot:function(){return Promise.resolve()},countdown:!1,modes:["video-audio","video-only","audio-only","picture"],mirror:!0,showVideoSourceDropdown:!1,facingMode:"user",videoConstraints:void 0,preferredImageMimeType:null,preferredVideoMimeType:null,showRecordingLength:!1,mobileNativeCamera:b({tablet:!0})};return r.opts=(0,a.Z)((0,a.Z)({},s),i),r.i18nInit(),r.title=r.i18n("pluginNameCamera"),R((0,l.Z)(r),z)[z]=r.opts.mirror,r.install=r.install.bind((0,l.Z)(r)),r.setPluginState=r.setPluginState.bind((0,l.Z)(r)),r.render=r.render.bind((0,l.Z)(r)),r.start=r.start.bind((0,l.Z)(r)),r.stop=r.stop.bind((0,l.Z)(r)),r.takeSnapshot=r.takeSnapshot.bind((0,l.Z)(r)),r.startRecording=r.startRecording.bind((0,l.Z)(r)),r.stopRecording=r.stopRecording.bind((0,l.Z)(r)),r.discardRecordedVideo=r.discardRecordedVideo.bind((0,l.Z)(r)),r.submit=r.submit.bind((0,l.Z)(r)),r.oneTwoThreeSmile=r.oneTwoThreeSmile.bind((0,l.Z)(r)),r.focus=r.focus.bind((0,l.Z)(r)),r.changeVideoSource=r.changeVideoSource.bind((0,l.Z)(r)),r.webcamActive=!1,r.opts.countdown&&(r.opts.onBeforeSnapshot=r.oneTwoThreeSmile),r.setPluginState({hasCamera:!1,cameraReady:!1,cameraError:null,recordingLengthSeconds:0,videoSources:[],currentDeviceId:null}),r}return(0,s.Z)(n,[{key:"setOptions",value:function(e){(0,u.Z)((0,p.Z)(n.prototype),"setOptions",this).call(this,(0,a.Z)((0,a.Z)({},e),{},{videoConstraints:(0,a.Z)((0,a.Z)({},this.opts.videoConstraints),null==e?void 0:e.videoConstraints)}))}},{key:"hasCameraCheck",value:function(){return this.mediaDevices?this.mediaDevices.enumerateDevices().then((function(e){return e.some((function(e){return"videoinput"===e.kind}))})):Promise.resolve(!1)}},{key:"isAudioOnly",value:function(){return 1===this.opts.modes.length&&"audio-only"===this.opts.modes[0]}},{key:"getConstraints",value:function(e){void 0===e&&(e=null);var t=-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("audio-only"),n=!this.isAudioOnly()&&(-1!==this.opts.modes.indexOf("video-audio")||-1!==this.opts.modes.indexOf("video-only")||-1!==this.opts.modes.indexOf("picture")),i=(0,a.Z)((0,a.Z)({},this.opts.videoConstraints||{facingMode:this.opts.facingMode}),e?{deviceId:e,facingMode:null}:{});return{audio:t,video:!!n&&i}}},{key:"start",value:function(e){var t=this;if(void 0===e&&(e=null),!this.supportsUserMedia)return Promise.reject(new Error("Webcam access not supported"));this.webcamActive=!0,this.opts.mirror&&(R(this,z)[z]=!0);var n=this.getConstraints(e&&e.deviceId?e.deviceId:null);this.hasCameraCheck().then((function(i){return t.setPluginState({hasCamera:i}),t.mediaDevices.getUserMedia(n).then((function(n){t.stream=n;var i=null,r=t.isAudioOnly()?n.getAudioTracks():n.getVideoTracks();e&&e.deviceId?r.forEach((function(t){t.getSettings().deviceId===e.deviceId&&(i=t.getSettings().deviceId)})):i=r[0].getSettings().deviceId,t.updateVideoSources(),t.setPluginState({currentDeviceId:i,cameraReady:!0})})).catch((function(e){t.setPluginState({cameraReady:!1,cameraError:e}),t.uppy.info(e.message,"error")}))}))}},{key:"getMediaRecorderOptions",value:function(){var e={};if(MediaRecorder.isTypeSupported){var t=this.uppy.opts.restrictions,n=[];this.opts.preferredVideoMimeType?n=[this.opts.preferredVideoMimeType]:t.allowedFileTypes&&(n=t.allowedFileTypes.map(I).filter(N));var i=n.filter((function(e){return MediaRecorder.isTypeSupported(e)&&y(e)}));i.length>0&&(e.mimeType=i[0])}return e}},{key:"startRecording",value:function(){var e=this;this.recorder=new MediaRecorder(this.stream,this.getMediaRecorderOptions()),this.recordingChunks=[];var t=!1;this.recorder.addEventListener("dataavailable",(function(n){e.recordingChunks.push(n.data);var i=e.uppy.opts.restrictions;if(e.recordingChunks.length>1&&null!=i.maxFileSize&&!t){var r=e.recordingChunks.reduce((function(e,t){return e+t.size}),0),a=3*((r-e.recordingChunks[0].size)/(e.recordingChunks.length-1));r>Math.max(0,i.maxFileSize-a)&&(t=!0,e.uppy.info(e.i18n("recordingStoppedMaxSize"),"warning",4e3),e.stopRecording())}})),this.recorder.start(500),this.opts.showRecordingLength&&(this.recordingLengthTimer=setInterval((function(){var t=e.getPluginState().recordingLengthSeconds;e.setPluginState({recordingLengthSeconds:t+1})}),1e3)),this.setPluginState({isRecording:!0})}},{key:"stopRecording",value:function(){var e=this;return new Promise((function(t){e.recorder.addEventListener("stop",(function(){t()})),e.recorder.stop(),e.opts.showRecordingLength&&(clearInterval(e.recordingLengthTimer),e.setPluginState({recordingLengthSeconds:0}))})).then((function(){return e.setPluginState({isRecording:!1}),e.getVideo()})).then((function(t){try{e.capturedMediaFile=t,e.setPluginState({recordedVideo:URL.createObjectURL(t.data)}),R(e,z)[z]=!1}catch(n){n.isRestriction||e.uppy.log(n)}})).then((function(){e.recordingChunks=null,e.recorder=null}),(function(t){throw e.recordingChunks=null,e.recorder=null,t}))}},{key:"discardRecordedVideo",value:function(){this.setPluginState({recordedVideo:null}),this.opts.mirror&&(R(this,z)[z]=!0),this.capturedMediaFile=null}},{key:"submit",value:function(){try{this.capturedMediaFile&&this.uppy.addFile(this.capturedMediaFile)}catch(e){e.isRestriction||this.uppy.log(e,"error")}}},{key:"stop",value:function(){var e=(0,r.Z)((0,i.Z)().mark((function e(){var t,n,r=this;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.stream&&(t=this.stream.getAudioTracks(),n=this.stream.getVideoTracks(),t.concat(n).forEach((function(e){return e.stop()}))),!this.recorder){e.next=4;break}return e.next=4,new Promise((function(e){r.recorder.addEventListener("stop",e,{once:!0}),r.recorder.stop(),r.opts.showRecordingLength&&clearInterval(r.recordingLengthTimer)}));case 4:this.recordingChunks=null,this.recorder=null,this.webcamActive=!1,this.stream=null,this.setPluginState({recordedVideo:null,isRecording:!1,recordingLengthSeconds:0});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getVideoElement",value:function(){return this.el.querySelector(".uppy-Webcam-video")}},{key:"oneTwoThreeSmile",value:function(){var e=this;return new Promise((function(t,n){var i=e.opts.countdown,r=setInterval((function(){if(!e.webcamActive)return clearInterval(r),e.captureInProgress=!1,n(new Error("Webcam is not active"));i>0?(e.uppy.info("".concat(i,"..."),"warning",800),i--):(clearInterval(r),e.uppy.info(e.i18n("smile"),"success",1500),setTimeout((function(){return t()}),1500))}),1e3)}))}},{key:"takeSnapshot",value:function(){var e=this;this.captureInProgress||(this.captureInProgress=!0,this.opts.onBeforeSnapshot().catch((function(t){var n="object"===typeof t?t.message:t;return e.uppy.info(n,"error",5e3),Promise.reject(new Error("onBeforeSnapshot: ".concat(n)))})).then((function(){return e.getImage()})).then((function(t){e.captureInProgress=!1;try{e.uppy.addFile(t)}catch(n){n.isRestriction||e.uppy.log(n)}}),(function(t){throw e.captureInProgress=!1,t})))}},{key:"getImage",value:function(){var e=this,t=this.getVideoElement();if(!t)return Promise.reject(new Error("No video element found, likely due to the Webcam tab being closed."));var n=t.videoWidth,i=t.videoHeight,r=document.createElement("canvas");r.width=n,r.height=i,r.getContext("2d").drawImage(t,0,0);var a=this.uppy.opts.restrictions,o=[];this.opts.preferredImageMimeType?o=[this.opts.preferredImageMimeType]:a.allowedFileTypes&&(o=a.allowedFileTypes.map(I).filter(E));var s=o[0]||"image/jpeg",l=y(s)||"jpg",u="cam-".concat(Date.now(),".").concat(l);return function(e,t,n){return new Promise((function(i){e.toBlob(i,t,n)}))}(r,s).then((function(t){return{source:e.id,name:u,data:new Blob([t],{type:s}),type:s}}))}},{key:"getVideo",value:function(){var e=this.recordingChunks.find((function(e){var t;return(null==(t=e.type)?void 0:t.length)>0})).type,t=y(e);if(!t)return Promise.reject(new Error('Could not retrieve recording: Unsupported media type "'.concat(e,'"')));var n="webcam-".concat(Date.now(),".").concat(t),i=new Blob(this.recordingChunks,{type:e}),r={source:this.id,name:n,data:new Blob([i],{type:e}),type:e};return Promise.resolve(r)}},{key:"focus",value:function(){var e=this;this.opts.countdown&&setTimeout((function(){e.uppy.info(e.i18n("smile"),"success",1500)}),1e3)}},{key:"changeVideoSource",value:function(e){this.stop(),this.start({deviceId:e})}},{key:"updateVideoSources",value:function(){var e=this;this.mediaDevices.enumerateDevices().then((function(t){e.setPluginState({videoSources:t.filter((function(e){return"videoinput"===e.kind}))})}))}},{key:"render",value:function(){this.webcamActive||this.start();var e=this.getPluginState();return e.cameraReady&&e.hasCamera?(0,h.h)(T,A({},e,{onChangeVideoSource:this.changeVideoSource,onSnapshot:this.takeSnapshot,onStartRecording:this.startRecording,onStopRecording:this.stopRecording,onDiscardRecordedVideo:this.discardRecordedVideo,onSubmit:this.submit,onFocus:this.focus,onStop:this.stop,i18n:this.i18n,modes:this.opts.modes,showRecordingLength:this.opts.showRecordingLength,showVideoSourceDropdown:this.opts.showVideoSourceDropdown,supportsRecording:"function"===typeof MediaRecorder&&!!MediaRecorder.prototype&&"function"===typeof MediaRecorder.prototype.start,recording:e.isRecording,mirror:R(this,z)[z],src:this.stream})):(0,h.h)(B,{icon:w,i18n:this.i18n,hasCamera:e.hasCamera})}},{key:"install",value:function(){var e,t=this,n=this.opts,i=n.mobileNativeCamera,r=n.modes,a=n.facingMode,o=n.videoConstraints,s=this.opts.target;i&&s?null==(e=this.getTargetPlugin(s))||e.setOptions({showNativeVideoCameraButton:L(r,"video-only")||L(r,"video-audio"),showNativePhotoCameraButton:L(r,"picture"),nativeCameraFacingMode:(null==o?void 0:o.facingMode)||a}):(this.setPluginState({cameraReady:!1,recordingLengthSeconds:0}),s&&this.mount(s,this),this.mediaDevices&&(this.updateVideoSources(),this.mediaDevices.ondevicechange=function(){if(t.updateVideoSources(),t.stream){var e=!0,n=t.getPluginState(),i=n.videoSources,r=n.currentDeviceId;i.forEach((function(t){r===t.deviceId&&(e=!1)})),e&&(t.stop(),t.start())}}))}},{key:"uninstall",value:function(){this.stop(),this.unmount()}},{key:"onUnmount",value:function(){this.stop()}}]),n}(f.di);V.VERSION="3.2.1"}}]);
//# sourceMappingURL=9051.50e2e042.chunk.js.map